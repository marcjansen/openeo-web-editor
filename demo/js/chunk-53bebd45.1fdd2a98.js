(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-53bebd45"],{"0354":function(t,e,i){"use strict";t.exports=n,t.exports.default=n;var s=i("61ca");function n(t,e){if(!(this instanceof n))return new n(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function r(t,e,i){if(!i)return e.indexOf(t);for(var s=0;s<e.length;s++)if(i(t,e[s]))return s;return-1}function a(t,e){o(t,0,t.children.length,e,t)}function o(t,e,i,s,n){n||(n=v(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var r,a=e;a<i;a++)r=t.children[a],l(n,t.leaf?s(r):r);return n}function l(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function c(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function h(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function d(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function f(t,e){var i=Math.max(t.minX,e.minX),s=Math.max(t.minY,e.minY),n=Math.min(t.maxX,e.maxX),r=Math.min(t.maxY,e.maxY);return Math.max(0,n-i)*Math.max(0,r-s)}function m(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function g(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function v(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function b(t,e,i,n,r){var a,o=[e,i];while(o.length)i=o.pop(),e=o.pop(),i-e<=n||(a=e+Math.ceil((i-e)/n/2)*n,s(t,a,e,i,r),o.push(e,a,a,i))}n.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],s=this.toBBox;if(!g(t,e))return i;var n,r,a,o,l=[];while(e){for(n=0,r=e.children.length;n<r;n++)a=e.children[n],o=e.leaf?s(a):a,g(t,o)&&(e.leaf?i.push(a):m(t,o)?this._all(a,i):l.push(a));e=l.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!g(t,e))return!1;var s,n,r,a,o=[];while(e){for(s=0,n=e.children.length;s<n;s++)if(r=e.children[s],a=e.leaf?i(r):r,g(t,a)){if(e.leaf||m(t,a))return!0;o.push(r)}e=o.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var s=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===s.height)this._splitRoot(this.data,s);else{if(this.data.height<s.height){var n=this.data;this.data=s,s=n}this._insert(s,this.data.height-s.height-1,!0)}else this.data=s;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=v([]),this},remove:function(t,e){if(!t)return this;var i,s,n,a,o=this.data,l=this.toBBox(t),c=[],u=[];while(o||c.length){if(o||(o=c.pop(),s=c[c.length-1],i=u.pop(),a=!0),o.leaf&&(n=r(t,o.children,e),-1!==n))return o.children.splice(n,1),c.push(o),this._condense(c),this;a||o.leaf||!m(o,l)?s?(i++,o=s.children[i],a=!1):o=null:(c.push(o),u.push(i),i=0,s=o,o=o.children[0])}return this},toBBox:function(t){return t},compareMinX:c,compareMinY:u,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){var i=[];while(t)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,s){var n,r=i-e+1,o=this._maxEntries;if(r<=o)return n=v(t.slice(e,i+1)),a(n,this.toBBox),n;s||(s=Math.ceil(Math.log(r)/Math.log(o)),o=Math.ceil(r/Math.pow(o,s-1))),n=v([]),n.leaf=!1,n.height=s;var l,c,u,h,d=Math.ceil(r/o),p=d*Math.ceil(Math.sqrt(o));for(b(t,e,i,p,this.compareMinX),l=e;l<=i;l+=p)for(u=Math.min(l+p-1,i),b(t,l,u,d,this.compareMinY),c=l;c<=u;c+=d)h=Math.min(c+d-1,u),n.children.push(this._build(t,c,h,s-1));return a(n,this.toBBox),n},_chooseSubtree:function(t,e,i,s){var n,r,a,o,l,c,u,d;while(1){if(s.push(e),e.leaf||s.length-1===i)break;for(u=d=1/0,n=0,r=e.children.length;n<r;n++)a=e.children[n],l=h(a),c=p(t,a)-l,c<d?(d=c,u=l<u?l:u,o=a):c===d&&l<u&&(u=l,o=a);e=o||e.children[0]}return e},_insert:function(t,e,i){var s=this.toBBox,n=i?t:s(t),r=[],a=this._chooseSubtree(n,this.data,e,r);a.children.push(t),l(a,n);while(e>=0){if(!(r[e].children.length>this._maxEntries))break;this._split(r,e),e--}this._adjustParentBBoxes(n,r,e)},_split:function(t,e){var i=t[e],s=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,s);var r=this._chooseSplitIndex(i,n,s),o=v(i.children.splice(r,i.children.length-r));o.height=i.height,o.leaf=i.leaf,a(i,this.toBBox),a(o,this.toBBox),e?t[e-1].children.push(o):this._splitRoot(i,o)},_splitRoot:function(t,e){this.data=v([t,e]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var s,n,r,a,l,c,u,d;for(c=u=1/0,s=e;s<=i-e;s++)n=o(t,0,s,this.toBBox),r=o(t,s,i,this.toBBox),a=f(n,r),l=h(n)+h(r),a<c?(c=a,d=s,u=l<u?l:u):a===c&&l<u&&(u=l,d=s);return d},_chooseSplitAxis:function(t,e,i){var s=t.leaf?this.compareMinX:c,n=t.leaf?this.compareMinY:u,r=this._allDistMargin(t,e,i,s),a=this._allDistMargin(t,e,i,n);r<a&&t.children.sort(s)},_allDistMargin:function(t,e,i,s){t.children.sort(s);var n,r,a=this.toBBox,c=o(t,0,e,a),u=o(t,i-e,i,a),h=d(c)+d(u);for(n=e;n<i-e;n++)r=t.children[n],l(c,t.leaf?a(r):r),h+=d(c);for(n=i-e-1;n>=e;n--)r=t.children[n],l(u,t.leaf?a(r):r),h+=d(u);return h},_adjustParentBBoxes:function(t,e,i){for(var s=i;s>=0;s--)l(e[s],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)0===t[i].children.length?i>0?(e=t[i-1].children,e.splice(e.indexOf(t[i]),1)):this.clear():a(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},"0791":function(t,e,i){"use strict";i("c240")},"0921":function(t,e,i){"use strict";var s=i("3115"),n=i("025e"),r=(i("5bc0"),i("c320")),a=i("9d47"),o=i("8f3a"),l=i("0af5"),c=i("a2e1"),u=i("5eee"),h=i("a2c7"),d=i("256f"),p=i("480c"),f=i("3e6b"),m=i("5831"),g=i("d0e9"),v=(i("1399"),i("0417")),b=i("3900");class y{constructor(){this.createHtml(),this.loading=0,this.loaded=0}addLoading(){this.loading++,this.update()}addLoaded(){this.loaded++,this.update()}update(){var t=(this.loaded/this.loading*100).toFixed(1)+"%";this.label.innerText="Loading Tiles ("+t+")",this.progressBarInner.style.width=t,this.loading===this.loaded&&(this.loading=0,this.loaded=0),this.el.style.opacity=this.show()?1:0}show(){return this.loading>0&&this.loaded<=this.loading}createHtml(){this.el=document.createElement("div"),this.el.className="ol-unselectable ol-progress-control",this.progressBar=document.createElement("div"),this.progressBar.className="progress-bar",this.progressBarInner=document.createElement("div"),this.progressBarInner.className="progress-bar-inner",this.progressBar.appendChild(this.progressBarInner),this.label=document.createElement("div"),this.label.className="progress-label",this.el.appendChild(this.progressBar),this.el.appendChild(this.label)}getControl(){var t=new b["a"]({element:this.el});return t}}var w,x,S={mixins:[s["a"]],props:{id:{type:String,required:!0},center:{type:Array,default:()=>[0,0]},zoom:{type:Number,default:1},show:{type:Boolean,default:!0},editable:{type:Boolean,default:!0}},data(){return{map:null,baseLayer:null,osm:null,progress:null}},watch:{show(){this.showMap()}},mounted(){this.showMap()},methods:{showMap(){this.show&&this.$nextTick(this.renderMap)},createMap(t=!1){if(null!==this.map)return this.map.updateSize(),void this.map.render();this.progress=new y,this.osm=new g["a"],this.baseLayer=new p["a"]({source:this.trackTileProgress(this.osm),baseLayer:!0,title:"OpenStreetMap"});var e=[new r["a"],new a["a"],this.progress.getControl()];t&&e.push(new v["a"]);var i={target:this.id,layers:[this.baseLayer],view:new h["a"]({center:Object(d["d"])([this.center[1],this.center[0]]),zoom:this.zoom})};this.editable?i.controls=Object(o["a"])().extend(e):(i.interactions=[],i.controls=e),this.map=new u["a"](i),this.listen("windowResized",this.updateMapSize)},renderMap(){this.createMap()},updateMapSize(){this.map&&this.map.updateSize()},addGeoJson(t){var e={};n["a"].detectGeoJson(t)&&(e.features=(new c["a"]).readFeatures(t,{featureProjection:this.osm.getProjection()}));var i=new m["a"](e),s=new f["a"]({title:"GeoJSON",source:i});this.map.addLayer(s);var r=i.getExtent();return Object(l["H"])(r)||this.map.getView().fit(r),s},trackTileProgress(t){return t.on("tileloadstart",()=>{this.progress.addLoading()}),t.on("tileloadend",()=>{this.progress.addLoaded()}),t.on("tileloaderror",()=>{this.progress.addLoaded()}),t}}},_=S,C=i("2877"),E=Object(C["a"])(_,w,x,!1,null,null,null);e["a"]=E.exports},"0f29":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"textEditor",class:t.languageString},[i("div",{staticClass:"sourceHeader"},[t.title?i("h3",[t._v(t._s(t.title))]):t._e(),i("div",{staticClass:"sourceToolbar"},[t.editable?i("span",{staticClass:"sepr"},[i("button",{attrs:{type:"button",title:"New script / Clear current script"},on:{click:t.confirmClear}},[i("i",{staticClass:"fas fa-file"})]),t._t("file-toolbar")],2):t._e(),t.editable?i("span",{staticClass:"sepr"},[i("button",{attrs:{type:"button",disabled:!t.canUndo,title:"Revert last change"},on:{click:function(e){return t.editor.undo()}}},[i("i",{staticClass:"fas fa-undo-alt"})]),i("button",{attrs:{type:"button",disabled:!t.canRedo,title:"Redo last reverted change"},on:{click:function(e){return t.editor.redo()}}},[i("i",{staticClass:"fas fa-redo-alt"})]),t._t("edit-toolbar")],2):t._e(),i("FullscreenButton",{attrs:{element:t.$el}}),t._t("toolbar")],2)]),i("div",{staticClass:"sourceCodeEditor",attrs:{id:t.id}})])},n=[],r=(i("5319"),i("025e")),a=i("5472"),o=i("a76e"),l=i("56b3"),c=i.n(l),u=(i("a7be"),i("f9d4"),i("959b"),i("ced6"),i("db91"),i("903e"),i("d7d5"),i("8c33"),i("10b2"),i("0dd0"),i("8822"),i("d2de"),i("4ebc")),h=i.n(u);window.jsonlint=h.a;var d={name:"TextEditor",components:{FullscreenButton:a["a"]},props:{id:String,editable:{type:Boolean,default:!0},value:{required:!0},language:{type:String,default:null},placeholder:{type:String,default:""},title:{type:String}},computed:{...r["a"].mapGetters(["processRegistry"]),languageString(){return"string"===typeof this.language?this.language.toLowerCase():""},editorOptions(){let t={indentUnit:2,lineNumbers:!0,indentWithTabs:!0,matchBrackets:!0,autoCloseBrackets:!0,readOnly:!this.editable,placeholder:this.placeholder};switch(this.languageString){case"r":t.mode="text/x-rsrc";break;case"python":t.mode="text/x-python";break;case"math":t.mode="text/x-mathematica";break;case"markdown":t.mode="text/x-markdown";break;case"json":case"processgraph":Object.assign(t,{mode:"application/json",gutters:["CodeMirror-lint-markers"],lint:!0});break}return t}},data(){return{canUndo:!1,canRedo:!1,editor:null,emitValue:this.value}},watch:{value(){this.emitValue!==this.value&&(this.updateContent(),this.editor.clearHistory())},editorOptions(){for(var t in this.editorOptions)this.editor.setOption(t,this.editorOptions[t])}},mounted(){this.editor=c()(document.getElementById(this.id),this.editorOptions),this.editor.setSize(null,"100%"),"processgraph"===this.languageString&&this.editor.on("change",()=>this.updateState()),this.updateContent(),this.editor.on("changes",(t,e)=>{try{0===Object.values(e).filter(t=>"setValue"===t.origin).length&&this.commit()}catch(i){this.$emit("error",i)}})},methods:{confirmClear(){var t=confirm("Do you really want to clear the existing code?");t&&(this.insert(""),this.emit(null))},updateState(){this.editor.setOption("lint",!!this.editor.getValue().trim());let t=this.editor.getDoc().historySize();this.canUndo=t.undo>0,this.canRedo=t.redo>0,this.editor.refresh()},commit(){var t=this.editor.getValue();switch(this.languageString){case"math":return this.emit(t.replace(/[\r\n\t]+/," "));case"processgraph":if(t){var e=JSON.parse(t);if(r["a"].size(e)>0){var i=new o["ProcessGraph"](e,this.processRegistry);return i.allowEmpty(),i.parse(),this.emit(e)}}return this.emit(null);case"json":return t?this.emit(JSON.parse(t)):this.emit(null);default:return this.emit(t)}},emit(t){this.emitValue=t,this.$emit("input",t)},insert(t,e=!0){if("string"!==typeof t&&(t=String(t)),e){const e=this.editor.getValue();if(t!==e){const e=this.editor.getScrollInfo();this.editor.setValue(t),this.editor.scrollTo(e.left,e.top)}}else this.editor.replaceSelection(t)},updateContent(){if(this.value)switch(this.languageString){case"processgraph":r["a"].isObject(this.value)?this.insert(JSON.stringify(this.value,null,this.editorOptions.indentUnit)):this.insert("");break;case"json":this.insert(JSON.stringify(this.value,null,this.editorOptions.indentUnit));break;default:this.insert(this.value)}else this.insert("");this.editor.getDoc().clearHistory(),this.updateState()},insertProcess(t){try{this.insert(JSON.stringify(t,null,2),!1)}catch(e){r["a"].exception(this,e)}}}},p=d,f=(i("4cd1"),i("ccbe"),i("2877")),m=Object(f["a"])(p,s,n,!1,null,"17370a10",null);e["a"]=m.exports},"15dd":function(t,e,i){"use strict";i("bdf7")},1843:function(t,e,i){"use strict";i("e7a4")},"1ccd":function(t,e,i){},"1fa6":function(t,e,i){"use strict";i("de39")},"206d":function(t,e,i){},"25f7":function(t,e,i){},"282a":function(t,e,i){"use strict";i("d00a")},"2f5a":function(t,e,i){"use strict";i("dc31")},"2fc0":function(t,e,i){"use strict";i("ac8e")},"307b":function(t,e,i){},3265:function(t,e,i){},"352f":function(t,e,i){"use strict";i("da12")},"35cc":function(t,e,i){"use strict";i("375e")},"375e":function(t,e,i){},3916:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.selectedSchema?i("div",{staticClass:"fieldContainer"},[t.showDataTypeChooser?i("div",{staticClass:"dataTypeChooser"},[i("select",{attrs:{name:"dataType",disabled:!t.editable},domProps:{value:t.selectedType},on:{input:t.onSelectType}},t._l(t.groupedallowedTypes,(function(e){return i("optgroup",{key:e.name,attrs:{label:e.name}},t._l(e.types,(function(e,s){return i("option",{key:s,domProps:{value:e.dataType()}},[t._v(t._s(e.title()))])})),0)})),0)]):t._e(),!t.isItem&&t.selectedSchema.description()?i("div",{staticClass:"description"},[i("i",{staticClass:"fas fa-info-circle"}),i("Description",{attrs:{description:t.selectedSchema.description(),compact:!0}})],1):t._e(),i("ParameterDataType",{attrs:{editable:t.editable,parameter:t.parameter,schema:t.selectedSchema,processId:t.processId,context:t.context},on:{changeType:t.setSelected},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}})],1):t._e()},n=[],r=(i("5319"),i("025e")),a=i("a76e"),o=i("783b"),l=i.n(o),c=i("fbdae"),u=null;class h extends a["JsonSchemaValidator"]{static create(t){return null===u&&(u=new h(t)),u}constructor(t){super(),this.store=t,this.setFileFormats(this.store.getters.fileFormats)}async validateBandName(t){return t.length>0}async validateEpsgCode(t){if(await this.store.dispatch("editor/loadEpsgCodes"),this.store.state.editor.epsgCodes[t])return!0;throw new l.a.ValidationError([{message:"Invalid EPSG code '"+t+"' specified."}])}async validateCollectionId(t){if(this.store.state.collections.filter(e=>e.id===t).length>0)return!0;throw new l.a.ValidationError([{message:"Collection with id '"+t+"' doesn't exist."}])}async validateFilePath(t){if(this.store.getters["files/getById"](t))return!0;throw new l.a.ValidationError([{message:"File at '"+t+"' doesn't exist."}])}async validateInputFormatOptions(t){throw"Not supported"}async validateOutputFormatOptions(t){throw"Not supported"}async validateJobId(t){if(this.store.getters["jobs/getById"](t))return!0;throw new l.a.ValidationError([{message:"Job with id '"+t+"' doesn't exist."}])}async validateUri(t){if(t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/))return!0;throw new l.a.ValidationError([{message:"URI is invalid"}])}async validateUdfCode(t){if(t.match(/(\r|\n)/))return!0;throw new l.a.ValidationError([{message:"UDF Code is invalid"}])}async validateUdfRuntime(t){if(t in this.store.state.udfRuntimes)return!0;throw new l.a.ValidationError([{message:"UDF runtime '"+t+"' is not supported."}])}async validateUdfRuntimeVersion(t){if(c["Versions"].validate(t))return!0;throw new l.a.ValidationError([{message:"UDF runtime version '"+t+"' is not a valid version number."}])}}var d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"fieldEditorContainer"},[t.isResult?[i("div",{staticClass:"fieldValue externalData fromNode"},[i("span",[t._v("Output of "),i("tt",[t._v("#"+t._s(t.state.from_node))])],1)]),"array"===t.nativeParameterType?i("button",{attrs:{type:"button"},on:{click:function(e){return t.convertToArray()}}},[i("i",{staticClass:"fas fa-list"}),t._v(" Convert to array")]):t._e()]:"raster-cube"===t.type||"vector-cube"===t.type?i("div",{staticClass:"fieldValue description"},[i("i",{staticClass:"fas fa-exclamation-circle"}),t._v(' This parameter can only be set by creating a connection between an "Output" / "Result" and this parameter in the Visual Model. ')]):t.isPgParameter?[i("div",{staticClass:"fieldValue externalData fromArgument"},[i("span",[t._v("Value of process parameter "),i("tt",[t._v(t._s(t.state.from_parameter))])],1)]),"array"===t.nativeParameterType?i("button",{attrs:{type:"button"},on:{click:function(e){return t.convertToArray()}}},[i("i",{staticClass:"fas fa-list"}),t._v(" Convert to array")]):t._e()]:"null"===t.type?i("div",{staticClass:"description"},[i("i",{staticClass:"fas fa-info-circle"}),t._v(" This is set to "),i("strong",[i("tt",[t._v("null")])],1),t._v(", which is usually used as placeholder for no-data values or a default value.")]):t.isSelection?i("SelectBox",{key:t.type,attrs:{type:t.type,editable:t.editable,schema:t.schema,context:t.dependency},on:{onDetails:t.onSelectDetails},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}}):t.isTemporal?i("TemporalPicker",{key:t.type,attrs:{type:t.type,editable:t.editable},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}}):"bounding-box"===t.type?i("MapAreaSelect",{key:t.type,staticClass:"areaSelector",attrs:{id:t.name+"_bbox",editable:t.editable},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}}):"geojson"===t.type?i("MapGeoJsonEditor",{key:t.type,staticClass:"geoJsonEditor",attrs:{id:t.name+"_geojson",editable:t.editable},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}}):"process-graph"===t.type?i("Editor",{staticClass:"callbackEditor",attrs:{id:t.name,editable:t.editable,pgParameters:t.schema.getCallbackParameters(),showDiscoveryToolbar:!0,defaultValue:t.editorDefaultValue},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}}):"output-format-options"===t.type||"input-format-options"===t.type?i("FileFormatOptionsEditor",{ref:"fileFormatOptionsEditor",attrs:{type:t.type,format:t.dependency},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}}):"budget"===t.type?i("Budget",{attrs:{editable:t.editable},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}}):"udf-code"===t.type?i("TextEditor",{staticClass:"fieldValue textarea",attrs:{id:t.name,editable:t.editable,language:t.dependency},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}}):"commonmark"===t.type?i("TextEditor",{staticClass:"fieldValue textarea",attrs:{id:t.name,editable:t.editable,language:"markdown"},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}}):"wkt2-definition"===t.type||"proj-definition"===t.type?i("TextEditor",{staticClass:"fieldValue textarea",attrs:{id:t.name,editable:t.editable},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}}):"json"==t.type?i("TextEditor",{staticClass:"fieldValue textarea",attrs:{id:t.name,editable:t.editable,language:"json"},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}}):"boolean"===t.type?i("input",{directives:[{name:"model",rawName:"v-model",value:t.state,expression:"state"}],staticClass:"fieldValue",attrs:{type:"checkbox",name:t.name,disabled:!t.editable},domProps:{checked:Array.isArray(t.state)?t._i(t.state,null)>-1:t.state},on:{change:function(e){var i=t.state,s=e.target,n=!!s.checked;if(Array.isArray(i)){var r=null,a=t._i(i,r);s.checked?a<0&&(t.state=i.concat([r])):a>-1&&(t.state=i.slice(0,a).concat(i.slice(a+1)))}else t.state=n}}}):"integer"===t.type?i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.state,expression:"state",modifiers:{number:!0}}],staticClass:"fieldValue",attrs:{type:"number",min:t.numericMin,max:t.numericMax,step:t.numericStep,name:t.name,disabled:!t.editable},domProps:{value:t.state},on:{input:function(e){e.target.composing||(t.state=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}):"url"===t.type||"uri"===t.type?i("input",{directives:[{name:"model",rawName:"v-model",value:t.state,expression:"state"}],staticClass:"fieldValue",attrs:{type:"url",name:t.name,disabled:!t.editable},domProps:{value:t.state},on:{input:function(e){e.target.composing||(t.state=e.target.value)}}}):"object"===t.nativeType||"array"===t.nativeType?i("ObjectEditor",{attrs:{editable:t.editable,parameter:t.parameter,schema:t.schema,isObject:"object"===t.nativeType,context:t.context},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}}):i("input",{directives:[{name:"model",rawName:"v-model",value:t.state,expression:"state"}],staticClass:"fieldValue",attrs:{type:"text",name:t.name,disabled:!t.editable},domProps:{value:t.state},on:{input:function(e){e.target.composing||(t.state=e.target.value)}}})],2)},p=[],f=i("3115"),m=function(){var t=this,e=this,i=e.$createElement,s=e._self._c||i;return s("div",{class:{editor:!0,array:!e.isObject,object:e.isObject}},[s("div",{staticClass:"buttons"},[e.editable?s("button",{staticClass:"addBtn",attrs:{type:"button"},on:{click:function(t){return e.add()}}},[s("i",{staticClass:"fas fa-plus"}),e._v(" Add")]):e._e(),s("FullscreenButton",{attrs:{element:function(){return t.$el}}})],1),e.elements.length?s("draggable",{attrs:{handle:".mover"},model:{value:e.elements,callback:function(t){e.elements=t},expression:"elements"}},e._l(e.elements,(function(t,i){return s("div",{key:t.id,staticClass:"fieldValue element"},[s("label",{key:i,staticClass:"fieldLabel"},[e.isObject?s("input",{directives:[{name:"model",rawName:"v-model",value:t.key,expression:"e.key"}],attrs:{type:"text",disabled:!e.editable},domProps:{value:t.key},on:{input:function(i){i.target.composing||e.$set(t,"key",i.target.value)}}}):[e._v(e._s(i))]],2),s("ParameterDataTypes",{attrs:{editable:e.editable,parameter:e.elementSchema(i,t.key),isItem:!0,context:e.context},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"e.value"}}),e.editable?s("button",{staticClass:"deleteBtn",attrs:{type:"button"},on:{click:function(t){return e.remove(i)}}},[s("i",{staticClass:"fas fa-trash"})]):e._e(),s("button",{directives:[{name:"show",rawName:"v-show",value:e.editable&&!e.isObject,expression:"editable && !isObject"}],staticClass:"mover",attrs:{type:"button"}},[s("i",{staticClass:"fas fa-arrows-alt"})])],1)})),0):s("div",{staticClass:"empty description"},[s("i",{staticClass:"fas fa-info-circle"}),e.isObject?[e._v(" Object is empty")]:[e._v(" Array is empty")]],2)],1)},g=[],v=i("b76a"),b=i.n(v),y=i("5472"),w={name:"ObjectEditor",components:{draggable:b.a,FullscreenButton:y["a"],ParameterDataTypes:()=>Promise.resolve().then(i.bind(null,"3916"))},props:{parameter:Object,editable:{type:Boolean,default:!0},schema:Object,value:{},isObject:{type:Boolean,default:!1},context:{}},data(){return{elements:[]}},computed:{newValue(){if(this.isObject){let t={};for(let e of this.elements)t[e.key]=e.value;return t}return this.elements.map(t=>t.value)}},watch:{newValue:{deep:!0,handler(t){this.$emit("input",t)}},value:{immediate:!0,handler(t){if(this.newValue!==t&&(this.elements=[],t&&"object"===typeof t))for(var e in t)this.add(e,t[e])}}},methods:{elementSchema(t,e=null){return this.schema.getElementSchema(e||t)},add(t=null,e){let i={id:String(this.elements.length),value:e};this.isObject&&(i.key=t||"unnamed"+this.elements.length),"undefined"===typeof i.value&&(i.value=this.elementSchema(this.elements.length,i.key).default),this.elements.push(i)},remove(t){this.elements.splice(t,1)}}},x=w,S=(i("35cc"),i("2877")),_=Object(S["a"])(x,m,g,!1,null,"e5082542",null),C=_.exports,E=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"datatypeEditor budget"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.hasBudget,expression:"hasBudget"}],attrs:{type:"checkbox",disabled:!t.editable},domProps:{checked:Array.isArray(t.hasBudget)?t._i(t.hasBudget,null)>-1:t.hasBudget},on:{change:function(e){var i=t.hasBudget,s=e.target,n=!!s.checked;if(Array.isArray(i)){var r=null,a=t._i(i,r);s.checked?a<0&&(t.hasBudget=i.concat([r])):a>-1&&(t.hasBudget=i.slice(0,a).concat(i.slice(a+1)))}else t.hasBudget=n}}}),i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.amount,expression:"amount",modifiers:{number:!0}}],attrs:{type:"number",min:"0.00",max:t.max,step:"0.01",disabled:!t.hasBudget||!t.editable},domProps:{value:t.amount},on:{input:function(e){e.target.composing||(t.amount=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),t._v(" "+t._s(t.capabilities.currency())+" ")])},k=[],P={name:"Budget",computed:{...r["a"].mapState(["userInfo"]),...r["a"].mapGetters(["capabilities"]),max(){return this.userInfo.budget>0?this.userInfo.budget:Number.MAX_VALUE}},props:{value:{type:Number,default:null},editable:{type:Boolean,default:!0}},data(){return{hasBudget:"number"===typeof this.value,amount:this.value}},watch:{hasBudget(){this.updateData()},amount(){this.updateData()}},methods:{updateData(){this.$emit("input",this.hasBudget&&!Number.isNaN(this.amount)?this.amount:null)}}},D=P,T=Object(S["a"])(D,E,k,!1,null,null,null),O=T.exports,M=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:t.id}})},I=[],F=i("0921"),j=i("3900"),B=i("256f");class L{constructor(t,e=!0,i=null,s=null){this.map=t;var n=this.map.getSize();this.width=i||(n[0]>0?.7*n[0]:300),this.height=s||(n[1]>0?.7*n[1]:200),this.moving=!1,this.editable=e,this.interactionListener=null,this.createElements(),this.addControls(),this.render()}setInteractionListener(t){this.interactionListener=t}getBounds(t=!1){var e=this.map.getSize(),i=[0,0],s=[0,0];s[0]=Math.round((e[0]-this.width)/2),i[1]=Math.round((e[1]-this.height)/2),i[0]=e[0]-s[0],s[1]=e[1]-i[1];var n=Object(B["i"])(this.map.getCoordinateFromPixel(s)),r=Object(B["i"])(this.map.getCoordinateFromPixel(i));return t?n.concat(r):{west:n[0],south:n[1],east:r[0],north:r[1]}}setBounds(t){if(t){Array.isArray(t)&&(t=r["a"].extentToBBox(t));var e=Object(B["d"])([t.west,t.south]),i=Object(B["d"])([t.east,t.north]),s={callback:()=>{var t=this.map.getPixelFromCoordinate(e),s=this.map.getPixelFromCoordinate(i);this.width=parseInt(Math.abs(t[0]-s[0])),this.height=parseInt(Math.abs(t[1]-s[1])),this.render()}},n=this.map.getSize();!this.editable&&n&&(s.padding=[n[0]/3,n[1]/3,n[0]/3,n[1]/3]),this.map.getView().fit([...e,...i],s)}}createElement(t,e,i){var s=document.createElement(t);return s.className=e,i&&i.appendChild(s),s}createElements(){this.overlayContainer||(this.overlayContainer=this.createElement("div","ol-unselectable ol-areaselect ol-areaselect-shade-container",this.map.getOverlayContainer()),this.topShade=this.createElement("div","ol-areaselect-shade",this.overlayContainer),this.bottomShade=this.createElement("div","ol-areaselect-shade",this.overlayContainer),this.leftShade=this.createElement("div","ol-areaselect-shade",this.overlayContainer),this.rightShade=this.createElement("div","ol-areaselect-shade",this.overlayContainer),this.editable&&(this.nwHandle=this.createElement("div","ol-areaselect-handle"),this.swHandle=this.createElement("div","ol-areaselect-handle"),this.neHandle=this.createElement("div","ol-areaselect-handle"),this.seHandle=this.createElement("div","ol-areaselect-handle"),this.setUpHandlerEvents(this.nwHandle,1,1),this.setUpHandlerEvents(this.neHandle,-1,1),this.setUpHandlerEvents(this.swHandle,1,-1),this.setUpHandlerEvents(this.seHandle,-1,-1)),this.map.on("change:size",()=>this.onInteraction()))}setUpHandlerEvents(t,e,i){var s=t=>{if(this.moving){var s=this.map.getSize();this.width+=2*(this.moving[0]-t.pageX)*e,this.height+=2*(this.moving[1]-t.pageY)*i,this.width=Math.max(30,this.width),this.height=Math.max(30,this.height),this.width=Math.min(s[0]-30,this.width),this.height=Math.min(s[1]-30,this.height),this.moving=[t.pageX,t.pageY],this.render()}},n=this.map.getTargetElement(),r=document.querySelector("html"),a=()=>{this.map.getTargetElement()&&(n.removeEventListener("mousemove",s),r.removeEventListener("mouseup",a),this.moving=!1,"function"===typeof this.interactionListener&&this.interactionListener())};t.addEventListener("mousedown",t=>{t.stopPropagation(),this.moving=[t.pageX,t.pageY],n.addEventListener("mousemove",s),r.addEventListener("mouseup",a)})}onInteraction(){this.render()}render(){var t=this.map.getSize(),e=Math.round((t[1]-this.height)/2),i=Math.round((t[0]-this.width)/2);if(this.setElementDimensions(this.overlayContainer,{width:t[0],height:t[1]}),this.setElementDimensions(this.topShade,{width:t[0],height:e,top:0,left:0}),this.setElementDimensions(this.bottomShade,{width:t[0],height:e,bottom:0,left:0}),this.setElementDimensions(this.leftShade,{width:i,height:t[1]-2*e,top:e,left:0}),this.setElementDimensions(this.rightShade,{width:i,height:t[1]-2*e,top:e,right:0}),this.editable){var s=Math.round(this.nwHandle.offsetWidth/2);this.setElementDimensions(this.nwHandle,{left:i-s,top:e-7}),this.setElementDimensions(this.neHandle,{right:i-s,top:e-7}),this.setElementDimensions(this.swHandle,{left:i-s,bottom:e-7}),this.setElementDimensions(this.seHandle,{right:i-s,bottom:e-7})}}setElementDimensions(t,e){t.style.width=e.width+"px",t.style.height=e.height+"px",t.style.top=e.top+"px",t.style.left=e.left+"px",t.style.bottom=e.bottom+"px",t.style.right=e.right+"px"}addControls(){this.editable&&(this.addControl(this.nwHandle),this.addControl(this.neHandle),this.addControl(this.swHandle),this.addControl(this.seHandle))}addControl(t){this.map.addControl(new j["a"]({element:t}))}}var $={name:"MapAreaSelect",mixins:[F["a"]],props:{value:{type:[Object,Array],default:()=>null}},computed:{asArray(){return Array.isArray(this.value)}},methods:{renderMap(){if(this.createMap(),this.areaSelect=new L(this.map,this.editable),null!==this.value&&this.areaSelect.setBounds(this.value),this.editable){var t=()=>this.$emit("input",this.areaSelect.getBounds(this.asArray));this.areaSelect.setInteractionListener(t),this.map.on("change",t),this.map.getView().on("change",t),this.map.on("propertychange",t)}}}},A=$,N=(i("991b"),i("1fa6"),Object(S["a"])(A,M,I,!1,null,null,null)),R=N.exports,V=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:t.id}})},U=[],J=i("a2e1"),H=i("b2fc"),G=(i("faaa"),i("f087")),z=i("e887"),X=(i("159a"),i("c516")),Y=i("d803"),W={name:"MapGeoJsonEditor",mixins:[F["a"]],props:{value:{type:Object,default:null}},data(){return{geoJsonLayer:null}},methods:{showMap(){this.show&&this.$nextTick(this.renderMap)},renderMap(){if(this.createMap(!0),this.editable?this.geoJsonLayer=this.geoJsonEditor(this.value):this.geoJsonLayer=this.addGeoJson(this.value),this.editable){var t=()=>this.$emit("input",this.getGeoJson());this.geoJsonLayer.getSource().on("change",t)}},geoJsonEditor(t){var e=this.addGeoJson(t),i=new G["a"];this.map.addControl(i);var s=new X["a"]({source:e.getSource(),interactions:{Info:!1,DrawHole:!1,Offset:!1,Split:!1}});i.addControl(s);var n=new Y["a"];this.map.addInteraction(n),n.on("undo",t=>{"addfeature"===t.action.type&&(s.getInteraction("Select").getFeatures().clear(),s.getInteraction("Transform").select())});var r=new G["a"]({group:!0,controls:[new z["a"]({html:'<i class="fas fa-undo-alt"></i>',title:"Undo",handleClick:()=>n.undo()}),new z["a"]({html:'<i class="fas fa-redo-alt"></i>',title:"Redo",handleClick:()=>n.redo()})]});return i.addControl(r),this.map.addInteraction(new H["a"]({source:e.getSource()})),e},getGeoJson(){var t=new J["a"],e=this.geoJsonLayer.getSource().getFeatures(),i=[];for(var s in e)i.push(t.writeFeatureObject(e[s],{dataProjection:"EPSG:4326",featureProjection:this.osm.getProjection()}));return 0===i.length?null:1===i.length?!i[0].properties&&i[0].geometry?i[0].geometry:i[0]:{type:"FeatureCollection",features:i}}}},q=W,K=Object(S["a"])(q,V,U,!1,null,null,null),Z=K.exports,Q=i("0f29"),tt={name:"ParameterDataType",mixins:[f["a"]],components:{ObjectEditor:C,Budget:O,MapAreaSelect:R,MapGeoJsonEditor:Z,TextEditor:Q["a"],Editor:()=>Promise.resolve().then(i.bind(null,"ceb0")),FileFormatOptionsEditor:()=>i.e("chunk-68913ea4").then(i.bind(null,"eeea")),ParameterDataTypes:()=>Promise.resolve().then(i.bind(null,"3916")),SelectBox:()=>i.e("chunk-260d7de1").then(i.bind(null,"3e57")),TemporalPicker:()=>i.e("chunk-0dea606c").then(i.bind(null,"cca6f"))},props:{parameter:Object,editable:{type:Boolean,default:!0},schema:Object,value:{},processId:String,context:{}},data(){return{state:this.value}},computed:{...r["a"].mapGetters(["processRegistry"]),type(){return this.schema.dataType()},nativeType(){return this.schema.nativeDataType()},nativeParameterType(){return this.parameter.nativeDataType()},editorDefaultValue(){if("process-graph"===this.type){if("undefined"!==typeof this.parameter.default)return this.parameter.default;if(this.parameter.nullable())return null}},isTemporal(){return"date"===this.type||"time"===this.type||"date-time"===this.type||"temporal-interval"===this.type||"year"===this.type},isSelection(){switch(this.type){case"collection-id":case"job-id":case"file-path":case"file-paths":case"epsg-code":case"input-format":case"output-format":case"service-type":case"billing-plan":case"udf-runtime":case"udf-runtime-version":return!0;case"band-name":return!!this.dependency;default:return this.schema.isEnum()}},name(){return this.parameter.name+(Array.isArray(this.parameter.value)?"[]":"")},isResult(){return Boolean(r["a"].isObject(this.state)&&this.state.from_node&&1===r["a"].size(this.state)&&this.schema.schema.isRef)},isPgParameter(){return Boolean(r["a"].isObject(this.state)&&this.state.from_parameter&&1===r["a"].size(this.state)&&this.schema.schema.isRef)},numericMin(){return"number"===typeof this.schema.minimum?this.schema.minimum:""},numericMax(){return"number"===typeof this.schema.maximum?this.schema.maximum:""},numbericStep(){return"number"===typeof this.schema.multipleOf?this.schema.multipleOf:"integer"===this.type?1:"any"},newValue(){if("number"===this.type)return Number.isNaN(this.state)?null:this.state;if("integer"===this.type){var t=Number.parseInt(this.state);return Number.isNaN(t)?null:t}if("null"===this.type)return null;if("string"===typeof this.state&&this.state.length>0&&("any"===this.type||"mixed"===this.type)){t=Number(this.state);return Number.isNaN(t)?this.state:t}return this.state},dependency(){switch(this.type){case"output-format-options":case"input-format-options":return this.getValueFromOtherParameterByDataType(this.type.replace("-options",""));case"udf-runtime-version":case"udf-code":return this.getValueFromOtherParameterByDataType("udf-runtime");case"band-name":return this.getValueFromOtherParameterByDataType("collection-id");default:return}}},watch:{value(t){t!==this.newValue&&(this.state=this.value)},async newValue(t,e){this.$emit("input",t)}},methods:{getValueFromOtherParameterByDataType(t){if(r["a"].isObject(this.context)&&r["a"].isObject(this.context.schemas)&&r["a"].isObject(this.context.values))for(let e in this.context.schemas){let i=this.context.schemas[e];if(r["a"].isObject(i)&&i.dataType()===t)return this.context.values[e]}},convertToArray(){this.state=[this.state],this.$emit("input",this.state),this.$emit("changeType","array")},onSelectDetails(){"collection-id"===this.type&&this.emit("showCollection",this.state)}}},et=tt,it=(i("469f"),Object(S["a"])(et,d,p,!1,null,"373e2c3b",null)),st=it.exports,nt=i("8088"),rt=i("79e5");const at=r["a"].resolveJsonRefs(i("ff6c")).definitions,ot=["Basics","References","Spatial","Temporal","File and Folders","Resources","CRS","UDF","Other"],lt=()=>(new Date).toISOString().replace(/\.\d+/,""),ct=[{type:"null",const:null,group:"Basics"},{type:"string",default:"",group:"Basics"},{type:"integer",default:0,group:"Basics"},{type:"number",default:0,group:"Basics"},{type:"boolean",default:!1,group:"Basics"},{type:"array",default:[],group:"Basics"},{type:"object",default:{},group:"Basics"},{type:"string",subtype:"date-time",format:"date-time",title:"Date and Time",group:"Temporal",default:()=>lt()},{type:"string",subtype:"date",format:"date",title:"Date only",group:"Temporal",default:()=>lt().substring(0,10)},{type:"string",subtype:"time",format:"time",title:"Time only",group:"Temporal",default:()=>lt().substring(11)},{type:"string",subtype:"year",title:"Year only",group:"Temporal"},{type:"array",subtype:"temporal-interval",title:"Temporal interval",group:"Temporal"},{type:"array",subtype:"temporal-intervals",title:"Temporal intervals (multiple)",group:"Temporal",default:[]},{type:"object",subtype:"geojson",title:"GeoJSON",group:"Spatial"},{type:"object",subtype:"bounding-box",title:"Bounding Box",group:"Spatial"},{type:"string",subtype:"band-name",title:"Band",group:"Resources"},{type:"string",subtype:"collection-id",title:"Collection",group:"Resources"},{type:"string",subtype:"job-id",title:"Batch Job",group:"Resources"},{type:"string",subtype:"udf-code",title:"UDF Source Code",group:"UDF",default:""},{type:"string",subtype:"udf-runtime",title:"UDF Runtime",group:"UDF"},{type:"string",subtype:"udf-runtime-version",title:"UDF Runtime Version",group:"UDF",any:!1},{type:"integer",subtype:"epsg-code",title:"EPSG Code (CRS)",group:"CRS"},{type:"string",subtype:"proj-definition",title:"PROJ defintiion (CRS)",group:"CRS",default:""},{type:"string",subtype:"wkt2-definition",title:"WKT2 defintiion (CRS)",group:"CRS",default:""},{type:"array",subtype:"file-path",title:"File path",group:"File and Folders"},{type:"array",subtype:"file-paths",title:"File paths (multiple)",group:"File and Folders",default:[]},{type:"string",subtype:"uri",format:"uri",title:"URI / URL",group:"File and Folders"},{type:"string",subtype:"output-format",title:"Export file format",group:"File and Folders"},{type:"object",subtype:"output-format-options",title:"Export file format parameters",group:"File and Folders",any:!1},{type:"string",subtype:"input-format",title:"Import file format",group:"File and Folders"},{type:"object",subtype:"input-format-options",title:"Import file format parameters",group:"File and Folders",any:!1},{type:"object",subtype:"process-graph",title:"Custom Process"},{subtype:"json",title:"JSON"}];var ut={name:"ParameterDataTypes",mixins:[f["a"]],components:{Description:nt["default"],ParameterDataType:st},props:{parameter:{type:Object,default:()=>new rt["c"]({})},editable:{type:Boolean,default:!0},processId:String,value:{},isItem:{type:Boolean,default:!1},context:{}},data(){return{state:"undefined"===typeof this.value?this.parameter.default:this.value,selectedType:null,selectedSchema:null,jsonSchemaValidator:h.create(this.$store)}},async created(){await this.detectType()},computed:{refSchemas(){let t={};for(let e of this.parameter.getRefs()){e.from_node?(name="from_node:"+e.from_node,t[name]=new rt["b"]({type:"object",group:"References",refId:name,isRef:"from_node",from_node:e.from_node,title:"Output of #"+e.from_node,required:["from_node"],properties:{from_node:{type:"string",const:e.from_node}},const:e,additionalProperties:!1})):e.from_parameter&&(name="from_parameter:"+e.from_parameter,t[name]=new rt["b"]({type:"object",group:"References",refId:name,isRef:"from_parameter",from_parameter:e.from_parameter,title:'Value of process parameter "'+e.from_parameter+'"',required:["from_parameter"],properties:{from_parameter:{type:"string",const:e.from_parameter}},const:e,additionalProperties:!1}))}return t},showDataTypeChooser(){return r["a"].size(this.allowedTypes)>=2},allowedTypes(){if("any"===this.parameter.dataType())return Object.assign({},this.supportedTypes,this.refSchemas);{let t={};for(let e of this.parameter.schemas){let i=e.dataType();t[i]=e}return Object.assign(t,this.refSchemas)}},supportedTypes(){let t={};for(let e of ct){if(!1===e.any)continue;let i=e.subtype||e.type,s=Object.assign({},at[i],e);t[i]=new rt["b"](s,this.parameter)}return t},groupedallowedTypes(){let t={};for(let e in this.allowedTypes){let i=this.allowedTypes[e],s=i.group();Array.isArray(t[s])?t[s].push(i):t[s]=[i]}return ot.map(e=>({name:e,types:t[e]||[]})).filter(t=>0!==t.types.length)}},watch:{value(t){t!==this.state&&(this.state=t)},state(t){this.$emit("input",t)},selectedType(t){this.$emit("schemaSelected",this.supportedTypes[t])}},methods:{async getTypeForValue(t,e){var i=[],s=[];for(var n of t)try{var r=await this.jsonSchemaValidator.validateValue(e,n.schema);if(r.length>0)continue;let t=n.dataType();t===n.nativeDataType()?s.push(t):i.push(t)}catch(a){}return 0===i.length?s:i},async detectType(){let t=Object.keys(this.allowedTypes),e="undefined"===typeof this.state;if(0===t.length)await this.setSelected("json");else if(1===t.length)await this.setSelected(t[0],e);else if(e){let e=t.filter(t=>"null"!==t);await this.setSelected(e[0],!0)}else{let t=await this.getTypeForValue(Object.values(this.allowedTypes),this.state);if(0===t.length)await this.setSelected("json");else if(1===t.length)await this.setSelected(t[0]);else{t.sort();let e=2===t.length&&"integer"===t[0]&&"number"===t[1];r["a"].isRef(this.state)||e||console.warn("A parameter is ambiguous. Potential types: "+t.join(", ")+". Value: "+JSON.stringify(this.state)),await this.setSelected(t[0])}}},async onSelectType(t){await this.setSelected(t.target.value,!0)},async setSelected(t,e=!1){if(t instanceof rt["b"]?(this.selectedSchema=t,this.selectedType=t.dataType()):(this.selectedSchema=this.allowedTypes[t]?this.allowedTypes[t]:this.supportedTypes[t],this.selectedType=t),e)if(this.selectedSchema.isNull())this.state=null;else if("undefined"!==typeof this.selectedSchema.const)this.state=this.selectedSchema.const;else if(this.selectedSchema.isEnum()&&1===this.selectedSchema.getEnumChoices().length)this.state=this.selectedSchema.getEnumChoices()[0];else{let t=this.selectedSchema.default();try{("undefined"===typeof this.state||(await this.jsonSchemaValidator.validateValue(this.state,this.selectedSchema)).length>0)&&(this.state=t)}catch(i){this.state=t}}}}},ht=ut,dt=(i("2f5a"),Object(S["a"])(ht,s,n,!1,null,null,null));e["default"]=dt.exports},3986:function(t,e,i){},"42c6":function(t,e,i){"use strict";i("46f2")},4525:function(t,e,i){},"469f":function(t,e,i){"use strict";i("1ccd")},"46f2":function(t,e,i){},"4cd1":function(t,e,i){"use strict";i("3265")},"4d982":function(t,e,i){"use strict";i("c98e")},"50e5":function(t,e,i){},"532e":function(t,e,i){"use strict";i("bb43")},5472:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("button",{attrs:{type:"button",title:t.isFullscreen?"Close fullscreen":"Show fullscreen"},on:{click:t.toggleFullscreen}},[i("span",{directives:[{name:"show",rawName:"v-show",value:t.isFullscreen,expression:"isFullscreen"}]},[i("i",{staticClass:"fas fa-compress"})]),i("span",{directives:[{name:"show",rawName:"v-show",value:!t.isFullscreen,expression:"!isFullscreen"}]},[i("i",{staticClass:"fas fa-expand"})])])},n=[],r=i("025e"),a={name:"FullscreenButton",props:["element"],data(){return{isFullscreen:!1,keyDownFn:null,oldZIndex:"auto"}},mounted(){this.keyDownFn=this.onkeyDown.bind(this);let t=this.getElement();t&&t.addEventListener("keydown",this.keyDownFn)},beforeDestroy(){let t=this.getElement();t&&t.removeEventListener("keydown",this.keyDownFn)},computed:{...r["a"].mapState("editor",["hightestModalZIndex"])},methods:{...r["a"].mapMutations("editor",["openModal","closeModal"]),onkeyDown(t){("F11"===t.key||this.isFullscreen&&"Escape"===t.key)&&(this.toggleFullscreen(),t.preventDefault(),t.stopPropagation())},getElement(){return"string"===typeof this.element?document.querySelector(this.element):"function"===typeof this.element?this.element():this.element},toggleFullscreen(){let t=this.getElement();this.isFullscreen?(this.isFullscreen=!1,t.classList.remove("fullscreen"),t.style.zIndex=this.oldZIndex,this.closeModal()):(this.isFullscreen=!0,t.classList.add("fullscreen"),this.openModal(),this.oldZIndex=t.style.zIndex,t.style.zIndex=this.hightestModalZIndex),this.$emit("changed",this.isFullscreen)}}},o=a,l=(i("90f4"),i("2877")),c=Object(l["a"])(o,s,n,!1,null,null,null);e["a"]=c.exports},"58f1":function(t,e,i){},"61ca":function(t,e,i){(function(e,i){t.exports=i()})(0,(function(){"use strict";function t(t,i,n,r,a){e(t,i,n||0,r||t.length-1,a||s)}function e(t,s,n,r,a){while(r>n){if(r-n>600){var o=r-n+1,l=s-n+1,c=Math.log(o),u=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*u*(o-u)/o)*(l-o/2<0?-1:1),d=Math.max(n,Math.floor(s-l*u/o+h)),p=Math.min(r,Math.floor(s+(o-l)*u/o+h));e(t,s,d,p,a)}var f=t[s],m=n,g=r;i(t,n,s),a(t[r],f)>0&&i(t,n,r);while(m<g){i(t,m,g),m++,g--;while(a(t[m],f)<0)m++;while(a(t[g],f)>0)g--}0===a(t[n],f)?i(t,n,g):(g++,i(t,g,r)),g<=s&&(n=g+1),s<=g&&(r=g-1)}}function i(t,e,i){var s=t[e];t[e]=t[i],t[i]=s}function s(t,e){return t<e?-1:t>e?1:0}return t}))},6224:function(t,e,i){"use strict";i("58f1")},"69b4":function(t,e,i){},"6e6b":function(t,e,i){"use strict";i("ded2")},"76b6":function(t,e,i){},"7b86":function(t,e,i){"use strict";i("3986")},"8aff":function(t,e,i){},"8e5f":function(t,e,i){!function(e,i){t.exports=i()}(0,(function(){return function(t){function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var i={};return e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=60)}([function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(t,e,i){var s=i(49)("wks"),n=i(30),r=i(0).Symbol,a="function"==typeof r;(t.exports=function(t){return s[t]||(s[t]=a&&r[t]||(a?r:n)("Symbol."+t))}).store=s},function(t,e,i){var s=i(5);t.exports=function(t){if(!s(t))throw TypeError(t+" is not an object!");return t}},function(t,e,i){var s=i(0),n=i(10),r=i(8),a=i(6),o=i(11),l=function(t,e,i){var c,u,h,d,p=t&l.F,f=t&l.G,m=t&l.S,g=t&l.P,v=t&l.B,b=f?s:m?s[e]||(s[e]={}):(s[e]||{}).prototype,y=f?n:n[e]||(n[e]={}),w=y.prototype||(y.prototype={});for(c in f&&(i=e),i)u=!p&&b&&void 0!==b[c],h=(u?b:i)[c],d=v&&u?o(h,s):g&&"function"==typeof h?o(Function.call,h):h,b&&a(b,c,h,t&l.U),y[c]!=h&&r(y,c,d),g&&w[c]!=h&&(w[c]=h)};s.core=n,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},function(t,e,i){t.exports=!i(7)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,i){var s=i(0),n=i(8),r=i(12),a=i(30)("src"),o=Function.toString,l=(""+o).split("toString");i(10).inspectSource=function(t){return o.call(t)},(t.exports=function(t,e,i,o){var c="function"==typeof i;c&&(r(i,"name")||n(i,"name",e)),t[e]!==i&&(c&&(r(i,a)||n(i,a,t[e]?""+t[e]:l.join(String(e)))),t===s?t[e]=i:o?t[e]?t[e]=i:n(t,e,i):(delete t[e],n(t,e,i)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[a]||o.call(this)}))},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,i){var s=i(13),n=i(25);t.exports=i(4)?function(t,e,i){return s.f(t,e,n(1,i))}:function(t,e,i){return t[e]=i,t}},function(t,e){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},function(t,e){var i=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=i)},function(t,e,i){var s=i(14);t.exports=function(t,e,i){if(s(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,s){return t.call(e,i,s)};case 3:return function(i,s,n){return t.call(e,i,s,n)}}return function(){return t.apply(e,arguments)}}},function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},function(t,e,i){var s=i(2),n=i(41),r=i(29),a=Object.defineProperty;e.f=i(4)?Object.defineProperty:function(t,e,i){if(s(t),e=r(e,!0),s(i),n)try{return a(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports={}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,i){"use strict";var s=i(7);t.exports=function(t,e){return!!t&&s((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},function(t,e,i){var s=i(23),n=i(16);t.exports=function(t){return s(n(t))}},function(t,e,i){var s=i(53),n=Math.min;t.exports=function(t){return t>0?n(s(t),9007199254740991):0}},function(t,e,i){var s=i(11),n=i(23),r=i(28),a=i(19),o=i(64);t.exports=function(t,e){var i=1==t,l=2==t,c=3==t,u=4==t,h=6==t,d=5==t||h,p=e||o;return function(e,o,f){for(var m,g,v=r(e),b=n(v),y=s(o,f,3),w=a(b.length),x=0,S=i?p(e,w):l?p(e,0):void 0;w>x;x++)if((d||x in b)&&(m=b[x],g=y(m,x,v),t))if(i)S[x]=g;else if(g)switch(t){case 3:return!0;case 5:return m;case 6:return x;case 2:S.push(m)}else if(u)return!1;return h?-1:c||u?u:S}}},function(t,e,i){var s=i(5),n=i(0).document,r=s(n)&&s(n.createElement);t.exports=function(t){return r?n.createElement(t):{}}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,i){var s=i(9);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==s(t)?t.split(""):Object(t)}},function(t,e){t.exports=!1},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,i){var s=i(13).f,n=i(12),r=i(1)("toStringTag");t.exports=function(t,e,i){t&&!n(t=i?t:t.prototype,r)&&s(t,r,{configurable:!0,value:e})}},function(t,e,i){var s=i(49)("keys"),n=i(30);t.exports=function(t){return s[t]||(s[t]=n(t))}},function(t,e,i){var s=i(16);t.exports=function(t){return Object(s(t))}},function(t,e,i){var s=i(5);t.exports=function(t,e){if(!s(t))return t;var i,n;if(e&&"function"==typeof(i=t.toString)&&!s(n=i.call(t)))return n;if("function"==typeof(i=t.valueOf)&&!s(n=i.call(t)))return n;if(!e&&"function"==typeof(i=t.toString)&&!s(n=i.call(t)))return n;throw TypeError("Can't convert object to primitive value")}},function(t,e){var i=0,s=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+s).toString(36))}},function(t,e,i){"use strict";var s=i(0),n=i(12),r=i(9),a=i(67),o=i(29),l=i(7),c=i(77).f,u=i(45).f,h=i(13).f,d=i(51).trim,p=s.Number,f=p,m=p.prototype,g="Number"==r(i(44)(m)),v="trim"in String.prototype,b=function(t){var e=o(t,!1);if("string"==typeof e&&e.length>2){e=v?e.trim():d(e,3);var i,s,n,r=e.charCodeAt(0);if(43===r||45===r){if(88===(i=e.charCodeAt(2))||120===i)return NaN}else if(48===r){switch(e.charCodeAt(1)){case 66:case 98:s=2,n=49;break;case 79:case 111:s=8,n=55;break;default:return+e}for(var a,l=e.slice(2),c=0,u=l.length;c<u;c++)if((a=l.charCodeAt(c))<48||a>n)return NaN;return parseInt(l,s)}}return+e};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var e=arguments.length<1?0:t,i=this;return i instanceof p&&(g?l((function(){m.valueOf.call(i)})):"Number"!=r(i))?a(new f(b(e)),i,p):b(e)};for(var y,w=i(4)?c(f):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;w.length>x;x++)n(f,y=w[x])&&!n(p,y)&&h(p,y,u(f,y));p.prototype=m,m.constructor=p,i(6)(s,"Number",p)}},function(t,e,i){"use strict";function s(t){return 0!==t&&(!(!Array.isArray(t)||0!==t.length)||!t)}function n(t){return function(){return!t.apply(void 0,arguments)}}function r(t,e){return void 0===t&&(t="undefined"),null===t&&(t="null"),!1===t&&(t="false"),-1!==t.toString().toLowerCase().indexOf(e.trim())}function a(t,e,i,s){return t.filter((function(t){return r(s(t,i),e)}))}function o(t){return t.filter((function(t){return!t.$isLabel}))}function l(t,e){return function(i){return i.reduce((function(i,s){return s[t]&&s[t].length?(i.push({$groupLabel:s[e],$isLabel:!0}),i.concat(s[t])):i}),[])}}function c(t,e,s,n,r){return function(o){return o.map((function(o){var l;if(!o[s])return console.warn("Options passed to vue-multiselect do not contain groups, despite the config."),[];var c=a(o[s],t,e,r);return c.length?(l={},i.i(f.a)(l,n,o[n]),i.i(f.a)(l,s,c),l):[]}))}}var u=i(59),h=i(54),d=(i.n(h),i(95)),p=(i.n(d),i(31)),f=(i.n(p),i(58)),m=i(91),g=(i.n(m),i(98)),v=(i.n(g),i(92)),b=(i.n(v),i(88)),y=(i.n(b),i(97)),w=(i.n(y),i(89)),x=(i.n(w),i(96)),S=(i.n(x),i(93)),_=(i.n(S),i(90)),C=(i.n(_),function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(t){return e.reduce((function(t,e){return e(t)}),t)}});e.a={data:function(){return{search:"",isOpen:!1,preferredOpenDirection:"below",optimizedHeight:this.maxHeight}},props:{internalSearch:{type:Boolean,default:!0},options:{type:Array,required:!0},multiple:{type:Boolean,default:!1},value:{type:null,default:function(){return[]}},trackBy:{type:String},label:{type:String},searchable:{type:Boolean,default:!0},clearOnSelect:{type:Boolean,default:!0},hideSelected:{type:Boolean,default:!1},placeholder:{type:String,default:"Select option"},allowEmpty:{type:Boolean,default:!0},resetAfter:{type:Boolean,default:!1},closeOnSelect:{type:Boolean,default:!0},customLabel:{type:Function,default:function(t,e){return s(t)?"":e?t[e]:t}},taggable:{type:Boolean,default:!1},tagPlaceholder:{type:String,default:"Press enter to create a tag"},tagPosition:{type:String,default:"top"},max:{type:[Number,Boolean],default:!1},id:{default:null},optionsLimit:{type:Number,default:1e3},groupValues:{type:String},groupLabel:{type:String},groupSelect:{type:Boolean,default:!1},blockKeys:{type:Array,default:function(){return[]}},preserveSearch:{type:Boolean,default:!1},preselectFirst:{type:Boolean,default:!1}},mounted:function(){!this.multiple&&this.max&&console.warn("[Vue-Multiselect warn]: Max prop should not be used when prop Multiple equals false."),this.preselectFirst&&!this.internalValue.length&&this.options.length&&this.select(this.filteredOptions[0])},computed:{internalValue:function(){return this.value||0===this.value?Array.isArray(this.value)?this.value:[this.value]:[]},filteredOptions:function(){var t=this.search||"",e=t.toLowerCase().trim(),i=this.options.concat();return i=this.internalSearch?this.groupValues?this.filterAndFlat(i,e,this.label):a(i,e,this.label,this.customLabel):this.groupValues?l(this.groupValues,this.groupLabel)(i):i,i=this.hideSelected?i.filter(n(this.isSelected)):i,this.taggable&&e.length&&!this.isExistingOption(e)&&("bottom"===this.tagPosition?i.push({isTag:!0,label:t}):i.unshift({isTag:!0,label:t})),i.slice(0,this.optionsLimit)},valueKeys:function(){var t=this;return this.trackBy?this.internalValue.map((function(e){return e[t.trackBy]})):this.internalValue},optionKeys:function(){var t=this;return(this.groupValues?this.flatAndStrip(this.options):this.options).map((function(e){return t.customLabel(e,t.label).toString().toLowerCase()}))},currentOptionLabel:function(){return this.multiple?this.searchable?"":this.placeholder:this.internalValue.length?this.getOptionLabel(this.internalValue[0]):this.searchable?"":this.placeholder}},watch:{internalValue:function(){this.resetAfter&&this.internalValue.length&&(this.search="",this.$emit("input",this.multiple?[]:null))},search:function(){this.$emit("search-change",this.search,this.id)}},methods:{getValue:function(){return this.multiple?this.internalValue:0===this.internalValue.length?null:this.internalValue[0]},filterAndFlat:function(t,e,i){return C(c(e,i,this.groupValues,this.groupLabel,this.customLabel),l(this.groupValues,this.groupLabel))(t)},flatAndStrip:function(t){return C(l(this.groupValues,this.groupLabel),o)(t)},updateSearch:function(t){this.search=t},isExistingOption:function(t){return!!this.options&&this.optionKeys.indexOf(t)>-1},isSelected:function(t){var e=this.trackBy?t[this.trackBy]:t;return this.valueKeys.indexOf(e)>-1},isOptionDisabled:function(t){return!!t.$isDisabled},getOptionLabel:function(t){if(s(t))return"";if(t.isTag)return t.label;if(t.$isLabel)return t.$groupLabel;var e=this.customLabel(t,this.label);return s(e)?"":e},select:function(t,e){if(t.$isLabel&&this.groupSelect)this.selectGroup(t);else if(!(-1!==this.blockKeys.indexOf(e)||this.disabled||t.$isDisabled||t.$isLabel)&&(!this.max||!this.multiple||this.internalValue.length!==this.max)&&("Tab"!==e||this.pointerDirty)){if(t.isTag)this.$emit("tag",t.label,this.id),this.search="",this.closeOnSelect&&!this.multiple&&this.deactivate();else{if(this.isSelected(t))return void("Tab"!==e&&this.removeElement(t));this.$emit("select",t,this.id),this.multiple?this.$emit("input",this.internalValue.concat([t]),this.id):this.$emit("input",t,this.id),this.clearOnSelect&&(this.search="")}this.closeOnSelect&&this.deactivate()}},selectGroup:function(t){var e=this,i=this.options.find((function(i){return i[e.groupLabel]===t.$groupLabel}));if(i)if(this.wholeGroupSelected(i)){this.$emit("remove",i[this.groupValues],this.id);var s=this.internalValue.filter((function(t){return-1===i[e.groupValues].indexOf(t)}));this.$emit("input",s,this.id)}else{var n=i[this.groupValues].filter((function(t){return!(e.isOptionDisabled(t)||e.isSelected(t))}));this.$emit("select",n,this.id),this.$emit("input",this.internalValue.concat(n),this.id)}},wholeGroupSelected:function(t){var e=this;return t[this.groupValues].every((function(t){return e.isSelected(t)||e.isOptionDisabled(t)}))},wholeGroupDisabled:function(t){return t[this.groupValues].every(this.isOptionDisabled)},removeElement:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.disabled&&!t.$isDisabled){if(!this.allowEmpty&&this.internalValue.length<=1)return void this.deactivate();var s="object"===i.i(u.a)(t)?this.valueKeys.indexOf(t[this.trackBy]):this.valueKeys.indexOf(t);if(this.$emit("remove",t,this.id),this.multiple){var n=this.internalValue.slice(0,s).concat(this.internalValue.slice(s+1));this.$emit("input",n,this.id)}else this.$emit("input",null,this.id);this.closeOnSelect&&e&&this.deactivate()}},removeLastElement:function(){-1===this.blockKeys.indexOf("Delete")&&0===this.search.length&&Array.isArray(this.internalValue)&&this.internalValue.length&&this.removeElement(this.internalValue[this.internalValue.length-1],!1)},activate:function(){var t=this;this.isOpen||this.disabled||(this.adjustPosition(),this.groupValues&&0===this.pointer&&this.filteredOptions.length&&(this.pointer=1),this.isOpen=!0,this.searchable?(this.preserveSearch||(this.search=""),this.$nextTick((function(){return t.$refs.search.focus()}))):this.$el.focus(),this.$emit("open",this.id))},deactivate:function(){this.isOpen&&(this.isOpen=!1,this.searchable?this.$refs.search.blur():this.$el.blur(),this.preserveSearch||(this.search=""),this.$emit("close",this.getValue(),this.id))},toggle:function(){this.isOpen?this.deactivate():this.activate()},adjustPosition:function(){if("undefined"!=typeof window){var t=this.$el.getBoundingClientRect().top,e=window.innerHeight-this.$el.getBoundingClientRect().bottom;e>this.maxHeight||e>t||"below"===this.openDirection||"bottom"===this.openDirection?(this.preferredOpenDirection="below",this.optimizedHeight=Math.min(e-40,this.maxHeight)):(this.preferredOpenDirection="above",this.optimizedHeight=Math.min(t-40,this.maxHeight))}}}}},function(t,e,i){"use strict";var s=i(54),n=(i.n(s),i(31));i.n(n),e.a={data:function(){return{pointer:0,pointerDirty:!1}},props:{showPointer:{type:Boolean,default:!0},optionHeight:{type:Number,default:40}},computed:{pointerPosition:function(){return this.pointer*this.optionHeight},visibleElements:function(){return this.optimizedHeight/this.optionHeight}},watch:{filteredOptions:function(){this.pointerAdjust()},isOpen:function(){this.pointerDirty=!1}},methods:{optionHighlight:function(t,e){return{"multiselect__option--highlight":t===this.pointer&&this.showPointer,"multiselect__option--selected":this.isSelected(e)}},groupHighlight:function(t,e){var i=this;if(!this.groupSelect)return["multiselect__option--group","multiselect__option--disabled"];var s=this.options.find((function(t){return t[i.groupLabel]===e.$groupLabel}));return s&&!this.wholeGroupDisabled(s)?["multiselect__option--group",{"multiselect__option--highlight":t===this.pointer&&this.showPointer},{"multiselect__option--group-selected":this.wholeGroupSelected(s)}]:"multiselect__option--disabled"},addPointerElement:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Enter",e=t.key;this.filteredOptions.length>0&&this.select(this.filteredOptions[this.pointer],e),this.pointerReset()},pointerForward:function(){this.pointer<this.filteredOptions.length-1&&(this.pointer++,this.$refs.list.scrollTop<=this.pointerPosition-(this.visibleElements-1)*this.optionHeight&&(this.$refs.list.scrollTop=this.pointerPosition-(this.visibleElements-1)*this.optionHeight),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()),this.pointerDirty=!0},pointerBackward:function(){this.pointer>0?(this.pointer--,this.$refs.list.scrollTop>=this.pointerPosition&&(this.$refs.list.scrollTop=this.pointerPosition),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerBackward()):this.filteredOptions[this.pointer]&&this.filteredOptions[0].$isLabel&&!this.groupSelect&&this.pointerForward(),this.pointerDirty=!0},pointerReset:function(){this.closeOnSelect&&(this.pointer=0,this.$refs.list&&(this.$refs.list.scrollTop=0))},pointerAdjust:function(){this.pointer>=this.filteredOptions.length-1&&(this.pointer=this.filteredOptions.length?this.filteredOptions.length-1:0),this.filteredOptions.length>0&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()},pointerSet:function(t){this.pointer=t,this.pointerDirty=!0}}}},function(t,e,i){"use strict";var s=i(36),n=i(74),r=i(15),a=i(18);t.exports=i(72)(Array,"Array",(function(t,e){this._t=a(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,n(1)):n(0,"keys"==e?i:"values"==e?t[i]:[i,t[i]])}),"values"),r.Arguments=r.Array,s("keys"),s("values"),s("entries")},function(t,e,i){"use strict";var s=i(31),n=(i.n(s),i(32)),r=i(33);e.a={name:"vue-multiselect",mixins:[n.a,r.a],props:{name:{type:String,default:""},selectLabel:{type:String,default:"Press enter to select"},selectGroupLabel:{type:String,default:"Press enter to select group"},selectedLabel:{type:String,default:"Selected"},deselectLabel:{type:String,default:"Press enter to remove"},deselectGroupLabel:{type:String,default:"Press enter to deselect group"},showLabels:{type:Boolean,default:!0},limit:{type:Number,default:99999},maxHeight:{type:Number,default:300},limitText:{type:Function,default:function(t){return"and ".concat(t," more")}},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},openDirection:{type:String,default:""},showNoOptions:{type:Boolean,default:!0},showNoResults:{type:Boolean,default:!0},tabindex:{type:Number,default:0}},computed:{isSingleLabelVisible:function(){return(this.singleValue||0===this.singleValue)&&(!this.isOpen||!this.searchable)&&!this.visibleValues.length},isPlaceholderVisible:function(){return!(this.internalValue.length||this.searchable&&this.isOpen)},visibleValues:function(){return this.multiple?this.internalValue.slice(0,this.limit):[]},singleValue:function(){return this.internalValue[0]},deselectLabelText:function(){return this.showLabels?this.deselectLabel:""},deselectGroupLabelText:function(){return this.showLabels?this.deselectGroupLabel:""},selectLabelText:function(){return this.showLabels?this.selectLabel:""},selectGroupLabelText:function(){return this.showLabels?this.selectGroupLabel:""},selectedLabelText:function(){return this.showLabels?this.selectedLabel:""},inputStyle:function(){if(this.searchable||this.multiple&&this.value&&this.value.length)return this.isOpen?{width:"100%"}:{width:"0",position:"absolute",padding:"0"}},contentStyle:function(){return this.options.length?{display:"inline-block"}:{display:"block"}},isAbove:function(){return"above"===this.openDirection||"top"===this.openDirection||"below"!==this.openDirection&&"bottom"!==this.openDirection&&"above"===this.preferredOpenDirection},showSearchInput:function(){return this.searchable&&(!this.hasSingleSelectedSlot||!this.visibleSingleValue&&0!==this.visibleSingleValue||this.isOpen)}}}},function(t,e,i){var s=i(1)("unscopables"),n=Array.prototype;void 0==n[s]&&i(8)(n,s,{}),t.exports=function(t){n[s][t]=!0}},function(t,e,i){var s=i(18),n=i(19),r=i(85);t.exports=function(t){return function(e,i,a){var o,l=s(e),c=n(l.length),u=r(a,c);if(t&&i!=i){for(;c>u;)if((o=l[u++])!=o)return!0}else for(;c>u;u++)if((t||u in l)&&l[u]===i)return t||u||0;return!t&&-1}}},function(t,e,i){var s=i(9),n=i(1)("toStringTag"),r="Arguments"==s(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,i,o;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=a(e=Object(t),n))?i:r?s(e):"Object"==(o=s(e))&&"function"==typeof e.callee?"Arguments":o}},function(t,e,i){"use strict";var s=i(2);t.exports=function(){var t=s(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,i){var s=i(0).document;t.exports=s&&s.documentElement},function(t,e,i){t.exports=!i(4)&&!i(7)((function(){return 7!=Object.defineProperty(i(21)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,i){var s=i(9);t.exports=Array.isArray||function(t){return"Array"==s(t)}},function(t,e,i){"use strict";function s(t){var e,i;this.promise=new t((function(t,s){if(void 0!==e||void 0!==i)throw TypeError("Bad Promise constructor");e=t,i=s})),this.resolve=n(e),this.reject=n(i)}var n=i(14);t.exports.f=function(t){return new s(t)}},function(t,e,i){var s=i(2),n=i(76),r=i(22),a=i(27)("IE_PROTO"),o=function(){},l=function(){var t,e=i(21)("iframe"),s=r.length;for(e.style.display="none",i(40).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),l=t.F;s--;)delete l.prototype[r[s]];return l()};t.exports=Object.create||function(t,e){var i;return null!==t?(o.prototype=s(t),i=new o,o.prototype=null,i[a]=t):i=l(),void 0===e?i:n(i,e)}},function(t,e,i){var s=i(79),n=i(25),r=i(18),a=i(29),o=i(12),l=i(41),c=Object.getOwnPropertyDescriptor;e.f=i(4)?c:function(t,e){if(t=r(t),e=a(e,!0),l)try{return c(t,e)}catch(t){}if(o(t,e))return n(!s.f.call(t,e),t[e])}},function(t,e,i){var s=i(12),n=i(18),r=i(37)(!1),a=i(27)("IE_PROTO");t.exports=function(t,e){var i,o=n(t),l=0,c=[];for(i in o)i!=a&&s(o,i)&&c.push(i);for(;e.length>l;)s(o,i=e[l++])&&(~r(c,i)||c.push(i));return c}},function(t,e,i){var s=i(46),n=i(22);t.exports=Object.keys||function(t){return s(t,n)}},function(t,e,i){var s=i(2),n=i(5),r=i(43);t.exports=function(t,e){if(s(t),n(e)&&e.constructor===t)return e;var i=r.f(t);return(0,i.resolve)(e),i.promise}},function(t,e,i){var s=i(10),n=i(0),r=n["__core-js_shared__"]||(n["__core-js_shared__"]={});(t.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:s.version,mode:i(24)?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},function(t,e,i){var s=i(2),n=i(14),r=i(1)("species");t.exports=function(t,e){var i,a=s(t).constructor;return void 0===a||void 0==(i=s(a)[r])?e:n(i)}},function(t,e,i){var s=i(3),n=i(16),r=i(7),a=i(84),o="["+a+"]",l="​",c=RegExp("^"+o+o+"*"),u=RegExp(o+o+"*$"),h=function(t,e,i){var n={},o=r((function(){return!!a[t]()||l[t]()!=l})),c=n[t]=o?e(d):a[t];i&&(n[i]=c),s(s.P+s.F*o,"String",n)},d=h.trim=function(t,e){return t=String(n(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(u,"")),t};t.exports=h},function(t,e,i){var s,n,r,a=i(11),o=i(68),l=i(40),c=i(21),u=i(0),h=u.process,d=u.setImmediate,p=u.clearImmediate,f=u.MessageChannel,m=u.Dispatch,g=0,v={},b=function(){var t=+this;if(v.hasOwnProperty(t)){var e=v[t];delete v[t],e()}},y=function(t){b.call(t.data)};d&&p||(d=function(t){for(var e=[],i=1;arguments.length>i;)e.push(arguments[i++]);return v[++g]=function(){o("function"==typeof t?t:Function(t),e)},s(g),g},p=function(t){delete v[t]},"process"==i(9)(h)?s=function(t){h.nextTick(a(b,t,1))}:m&&m.now?s=function(t){m.now(a(b,t,1))}:f?(n=new f,r=n.port2,n.port1.onmessage=y,s=a(r.postMessage,r,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(s=function(t){u.postMessage(t+"","*")},u.addEventListener("message",y,!1)):s="onreadystatechange"in c("script")?function(t){l.appendChild(c("script")).onreadystatechange=function(){l.removeChild(this),b.call(t)}}:function(t){setTimeout(a(b,t,1),0)}),t.exports={set:d,clear:p}},function(t,e){var i=Math.ceil,s=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?s:i)(t)}},function(t,e,i){"use strict";var s=i(3),n=i(20)(5),r=!0;"find"in[]&&Array(1).find((function(){r=!1})),s(s.P+s.F*r,"Array",{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),i(36)("find")},function(t,e,i){"use strict";var s,n,r,a,o=i(24),l=i(0),c=i(11),u=i(38),h=i(3),d=i(5),p=i(14),f=i(61),m=i(66),g=i(50),v=i(52).set,b=i(75)(),y=i(43),w=i(80),x=i(86),S=i(48),_=l.TypeError,C=l.process,E=C&&C.versions,k=E&&E.v8||"",P=l.Promise,D="process"==u(C),T=function(){},O=n=y.f,M=!!function(){try{var t=P.resolve(1),e=(t.constructor={})[i(1)("species")]=function(t){t(T,T)};return(D||"function"==typeof PromiseRejectionEvent)&&t.then(T)instanceof e&&0!==k.indexOf("6.6")&&-1===x.indexOf("Chrome/66")}catch(t){}}(),I=function(t){var e;return!(!d(t)||"function"!=typeof(e=t.then))&&e},F=function(t,e){if(!t._n){t._n=!0;var i=t._c;b((function(){for(var s=t._v,n=1==t._s,r=0;i.length>r;)!function(e){var i,r,a,o=n?e.ok:e.fail,l=e.resolve,c=e.reject,u=e.domain;try{o?(n||(2==t._h&&L(t),t._h=1),!0===o?i=s:(u&&u.enter(),i=o(s),u&&(u.exit(),a=!0)),i===e.promise?c(_("Promise-chain cycle")):(r=I(i))?r.call(i,l,c):l(i)):c(s)}catch(t){u&&!a&&u.exit(),c(t)}}(i[r++]);t._c=[],t._n=!1,e&&!t._h&&j(t)}))}},j=function(t){v.call(l,(function(){var e,i,s,n=t._v,r=B(t);if(r&&(e=w((function(){D?C.emit("unhandledRejection",n,t):(i=l.onunhandledrejection)?i({promise:t,reason:n}):(s=l.console)&&s.error&&s.error("Unhandled promise rejection",n)})),t._h=D||B(t)?2:1),t._a=void 0,r&&e.e)throw e.v}))},B=function(t){return 1!==t._h&&0===(t._a||t._c).length},L=function(t){v.call(l,(function(){var e;D?C.emit("rejectionHandled",t):(e=l.onrejectionhandled)&&e({promise:t,reason:t._v})}))},$=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),F(e,!0))},A=function(t){var e,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===t)throw _("Promise can't be resolved itself");(e=I(t))?b((function(){var s={_w:i,_d:!1};try{e.call(t,c(A,s,1),c($,s,1))}catch(t){$.call(s,t)}})):(i._v=t,i._s=1,F(i,!1))}catch(t){$.call({_w:i,_d:!1},t)}}};M||(P=function(t){f(this,P,"Promise","_h"),p(t),s.call(this);try{t(c(A,this,1),c($,this,1))}catch(t){$.call(this,t)}},s=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},s.prototype=i(81)(P.prototype,{then:function(t,e){var i=O(g(this,P));return i.ok="function"!=typeof t||t,i.fail="function"==typeof e&&e,i.domain=D?C.domain:void 0,this._c.push(i),this._a&&this._a.push(i),this._s&&F(this,!1),i.promise},catch:function(t){return this.then(void 0,t)}}),r=function(){var t=new s;this.promise=t,this.resolve=c(A,t,1),this.reject=c($,t,1)},y.f=O=function(t){return t===P||t===a?new r(t):n(t)}),h(h.G+h.W+h.F*!M,{Promise:P}),i(26)(P,"Promise"),i(83)("Promise"),a=i(10).Promise,h(h.S+h.F*!M,"Promise",{reject:function(t){var e=O(this);return(0,e.reject)(t),e.promise}}),h(h.S+h.F*(o||!M),"Promise",{resolve:function(t){return S(o&&this===a?P:this,t)}}),h(h.S+h.F*!(M&&i(73)((function(t){P.all(t).catch(T)}))),"Promise",{all:function(t){var e=this,i=O(e),s=i.resolve,n=i.reject,r=w((function(){var i=[],r=0,a=1;m(t,!1,(function(t){var o=r++,l=!1;i.push(void 0),a++,e.resolve(t).then((function(t){l||(l=!0,i[o]=t,--a||s(i))}),n)})),--a||s(i)}));return r.e&&n(r.v),i.promise},race:function(t){var e=this,i=O(e),s=i.reject,n=w((function(){m(t,!1,(function(t){e.resolve(t).then(i.resolve,s)}))}));return n.e&&s(n.v),i.promise}})},function(t,e,i){"use strict";var s=i(3),n=i(10),r=i(0),a=i(50),o=i(48);s(s.P+s.R,"Promise",{finally:function(t){var e=a(this,n.Promise||r.Promise),i="function"==typeof t;return this.then(i?function(i){return o(e,t()).then((function(){return i}))}:t,i?function(i){return o(e,t()).then((function(){throw i}))}:t)}})},function(t,e,i){"use strict";function s(t){i(99)}var n=i(35),r=i(101),a=i(100),o=s,l=a(n.a,r.a,!1,o,null,null);e.a=l.exports},function(t,e,i){"use strict";function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}e.a=s},function(t,e,i){"use strict";function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t){return(n="function"==typeof Symbol&&"symbol"===s(Symbol.iterator)?function(t){return s(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":s(t)})(t)}e.a=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(34),n=(i.n(s),i(55)),r=(i.n(n),i(56)),a=(i.n(r),i(57)),o=i(32),l=i(33);i.d(e,"Multiselect",(function(){return a.a})),i.d(e,"multiselectMixin",(function(){return o.a})),i.d(e,"pointerMixin",(function(){return l.a})),e.default=a.a},function(t,e){t.exports=function(t,e,i,s){if(!(t instanceof e)||void 0!==s&&s in t)throw TypeError(i+": incorrect invocation!");return t}},function(t,e,i){var s=i(14),n=i(28),r=i(23),a=i(19);t.exports=function(t,e,i,o,l){s(e);var c=n(t),u=r(c),h=a(c.length),d=l?h-1:0,p=l?-1:1;if(i<2)for(;;){if(d in u){o=u[d],d+=p;break}if(d+=p,l?d<0:h<=d)throw TypeError("Reduce of empty array with no initial value")}for(;l?d>=0:h>d;d+=p)d in u&&(o=e(o,u[d],d,c));return o}},function(t,e,i){var s=i(5),n=i(42),r=i(1)("species");t.exports=function(t){var e;return n(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!n(e.prototype)||(e=void 0),s(e)&&null===(e=e[r])&&(e=void 0)),void 0===e?Array:e}},function(t,e,i){var s=i(63);t.exports=function(t,e){return new(s(t))(e)}},function(t,e,i){"use strict";var s=i(8),n=i(6),r=i(7),a=i(16),o=i(1);t.exports=function(t,e,i){var l=o(t),c=i(a,l,""[t]),u=c[0],h=c[1];r((function(){var e={};return e[l]=function(){return 7},7!=""[t](e)}))&&(n(String.prototype,t,u),s(RegExp.prototype,l,2==e?function(t,e){return h.call(t,this,e)}:function(t){return h.call(t,this)}))}},function(t,e,i){var s=i(11),n=i(70),r=i(69),a=i(2),o=i(19),l=i(87),c={},u={};e=t.exports=function(t,e,i,h,d){var p,f,m,g,v=d?function(){return t}:l(t),b=s(i,h,e?2:1),y=0;if("function"!=typeof v)throw TypeError(t+" is not iterable!");if(r(v)){for(p=o(t.length);p>y;y++)if((g=e?b(a(f=t[y])[0],f[1]):b(t[y]))===c||g===u)return g}else for(m=v.call(t);!(f=m.next()).done;)if((g=n(m,b,f.value,e))===c||g===u)return g};e.BREAK=c,e.RETURN=u},function(t,e,i){var s=i(5),n=i(82).set;t.exports=function(t,e,i){var r,a=e.constructor;return a!==i&&"function"==typeof a&&(r=a.prototype)!==i.prototype&&s(r)&&n&&n(t,r),t}},function(t,e){t.exports=function(t,e,i){var s=void 0===i;switch(e.length){case 0:return s?t():t.call(i);case 1:return s?t(e[0]):t.call(i,e[0]);case 2:return s?t(e[0],e[1]):t.call(i,e[0],e[1]);case 3:return s?t(e[0],e[1],e[2]):t.call(i,e[0],e[1],e[2]);case 4:return s?t(e[0],e[1],e[2],e[3]):t.call(i,e[0],e[1],e[2],e[3])}return t.apply(i,e)}},function(t,e,i){var s=i(15),n=i(1)("iterator"),r=Array.prototype;t.exports=function(t){return void 0!==t&&(s.Array===t||r[n]===t)}},function(t,e,i){var s=i(2);t.exports=function(t,e,i,n){try{return n?e(s(i)[0],i[1]):e(i)}catch(e){var r=t.return;throw void 0!==r&&s(r.call(t)),e}}},function(t,e,i){"use strict";var s=i(44),n=i(25),r=i(26),a={};i(8)(a,i(1)("iterator"),(function(){return this})),t.exports=function(t,e,i){t.prototype=s(a,{next:n(1,i)}),r(t,e+" Iterator")}},function(t,e,i){"use strict";var s=i(24),n=i(3),r=i(6),a=i(8),o=i(15),l=i(71),c=i(26),u=i(78),h=i(1)("iterator"),d=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,i,f,m,g,v){l(i,e,f);var b,y,w,x=function(t){if(!d&&t in E)return E[t];switch(t){case"keys":case"values":return function(){return new i(this,t)}}return function(){return new i(this,t)}},S=e+" Iterator",_="values"==m,C=!1,E=t.prototype,k=E[h]||E["@@iterator"]||m&&E[m],P=k||x(m),D=m?_?x("entries"):P:void 0,T="Array"==e&&E.entries||k;if(T&&(w=u(T.call(new t)))!==Object.prototype&&w.next&&(c(w,S,!0),s||"function"==typeof w[h]||a(w,h,p)),_&&k&&"values"!==k.name&&(C=!0,P=function(){return k.call(this)}),s&&!v||!d&&!C&&E[h]||a(E,h,P),o[e]=P,o[S]=p,m)if(b={values:_?P:x("values"),keys:g?P:x("keys"),entries:D},v)for(y in b)y in E||r(E,y,b[y]);else n(n.P+n.F*(d||C),e,b);return b}},function(t,e,i){var s=i(1)("iterator"),n=!1;try{var r=[7][s]();r.return=function(){n=!0},Array.from(r,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!n)return!1;var i=!1;try{var r=[7],a=r[s]();a.next=function(){return{done:i=!0}},r[s]=function(){return a},t(r)}catch(t){}return i}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,i){var s=i(0),n=i(52).set,r=s.MutationObserver||s.WebKitMutationObserver,a=s.process,o=s.Promise,l="process"==i(9)(a);t.exports=function(){var t,e,i,c=function(){var s,n;for(l&&(s=a.domain)&&s.exit();t;){n=t.fn,t=t.next;try{n()}catch(s){throw t?i():e=void 0,s}}e=void 0,s&&s.enter()};if(l)i=function(){a.nextTick(c)};else if(!r||s.navigator&&s.navigator.standalone)if(o&&o.resolve){var u=o.resolve(void 0);i=function(){u.then(c)}}else i=function(){n.call(s,c)};else{var h=!0,d=document.createTextNode("");new r(c).observe(d,{characterData:!0}),i=function(){d.data=h=!h}}return function(s){var n={fn:s,next:void 0};e&&(e.next=n),t||(t=n,i()),e=n}}},function(t,e,i){var s=i(13),n=i(2),r=i(47);t.exports=i(4)?Object.defineProperties:function(t,e){n(t);for(var i,a=r(e),o=a.length,l=0;o>l;)s.f(t,i=a[l++],e[i]);return t}},function(t,e,i){var s=i(46),n=i(22).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return s(t,n)}},function(t,e,i){var s=i(12),n=i(28),r=i(27)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=n(t),s(t,r)?t[r]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,i){var s=i(6);t.exports=function(t,e,i){for(var n in e)s(t,n,e[n],i);return t}},function(t,e,i){var s=i(5),n=i(2),r=function(t,e){if(n(t),!s(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,s){try{s=i(11)(Function.call,i(45).f(Object.prototype,"__proto__").set,2),s(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,i){return r(t,i),e?t.__proto__=i:s(t,i),t}}({},!1):void 0),check:r}},function(t,e,i){"use strict";var s=i(0),n=i(13),r=i(4),a=i(1)("species");t.exports=function(t){var e=s[t];r&&e&&!e[a]&&n.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,e,i){var s=i(53),n=Math.max,r=Math.min;t.exports=function(t,e){return t=s(t),t<0?n(t+e,0):r(t,e)}},function(t,e,i){var s=i(0),n=s.navigator;t.exports=n&&n.userAgent||""},function(t,e,i){var s=i(38),n=i(1)("iterator"),r=i(15);t.exports=i(10).getIteratorMethod=function(t){if(void 0!=t)return t[n]||t["@@iterator"]||r[s(t)]}},function(t,e,i){"use strict";var s=i(3),n=i(20)(2);s(s.P+s.F*!i(17)([].filter,!0),"Array",{filter:function(t){return n(this,t,arguments[1])}})},function(t,e,i){"use strict";var s=i(3),n=i(37)(!1),r=[].indexOf,a=!!r&&1/[1].indexOf(1,-0)<0;s(s.P+s.F*(a||!i(17)(r)),"Array",{indexOf:function(t){return a?r.apply(this,arguments)||0:n(this,t,arguments[1])}})},function(t,e,i){var s=i(3);s(s.S,"Array",{isArray:i(42)})},function(t,e,i){"use strict";var s=i(3),n=i(20)(1);s(s.P+s.F*!i(17)([].map,!0),"Array",{map:function(t){return n(this,t,arguments[1])}})},function(t,e,i){"use strict";var s=i(3),n=i(62);s(s.P+s.F*!i(17)([].reduce,!0),"Array",{reduce:function(t){return n(this,t,arguments.length,arguments[1],!1)}})},function(t,e,i){var s=Date.prototype,n=s.toString,r=s.getTime;new Date(NaN)+""!="Invalid Date"&&i(6)(s,"toString",(function(){var t=r.call(this);return t===t?n.call(this):"Invalid Date"}))},function(t,e,i){i(4)&&"g"!=/./g.flags&&i(13).f(RegExp.prototype,"flags",{configurable:!0,get:i(39)})},function(t,e,i){i(65)("search",1,(function(t,e,i){return[function(i){"use strict";var s=t(this),n=void 0==i?void 0:i[e];return void 0!==n?n.call(i,s):new RegExp(i)[e](String(s))},i]}))},function(t,e,i){"use strict";i(94);var s=i(2),n=i(39),r=i(4),a=/./.toString,o=function(t){i(6)(RegExp.prototype,"toString",t,!0)};i(7)((function(){return"/a/b"!=a.call({source:"a",flags:"b"})}))?o((function(){var t=s(this);return"/".concat(t.source,"/","flags"in t?t.flags:!r&&t instanceof RegExp?n.call(t):void 0)})):"toString"!=a.name&&o((function(){return a.call(this)}))},function(t,e,i){"use strict";i(51)("trim",(function(t){return function(){return t(this,3)}}))},function(t,e,i){for(var s=i(34),n=i(47),r=i(6),a=i(0),o=i(8),l=i(15),c=i(1),u=c("iterator"),h=c("toStringTag"),d=l.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=n(p),m=0;m<f.length;m++){var g,v=f[m],b=p[v],y=a[v],w=y&&y.prototype;if(w&&(w[u]||o(w,u,d),w[h]||o(w,h,v),l[v]=d,b))for(g in s)w[g]||r(w,g,s[g],!0)}},function(t,e){},function(t,e){t.exports=function(t,e,i,s,n,r){var a,o=t=t||{},l=typeof t.default;"object"!==l&&"function"!==l||(a=t,o=t.default);var c,u="function"==typeof o?o.options:o;if(e&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0),i&&(u.functional=!0),n&&(u._scopeId=n),r?(c=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},u._ssrRegister=c):s&&(c=s),c){var h=u.functional,d=h?u.render:u.beforeCreate;h?(u._injectStyles=c,u.render=function(t,e){return c.call(e),d(t,e)}):u.beforeCreate=d?[].concat(d,c):[c]}return{esModule:a,exports:o,options:u}}},function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"multiselect",class:{"multiselect--active":t.isOpen,"multiselect--disabled":t.disabled,"multiselect--above":t.isAbove},attrs:{tabindex:t.searchable?-1:t.tabindex},on:{focus:function(e){t.activate()},blur:function(e){!t.searchable&&t.deactivate()},keydown:[function(e){return"button"in e||!t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?e.target!==e.currentTarget?null:(e.preventDefault(),void t.pointerForward()):null},function(e){return"button"in e||!t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?e.target!==e.currentTarget?null:(e.preventDefault(),void t.pointerBackward()):null}],keypress:function(e){return!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter")&&t._k(e.keyCode,"tab",9,e.key,"Tab")?null:(e.stopPropagation(),e.target!==e.currentTarget?null:void t.addPointerElement(e))},keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"esc",27,e.key,"Escape"))return null;t.deactivate()}}},[t._t("caret",[i("div",{staticClass:"multiselect__select",on:{mousedown:function(e){e.preventDefault(),e.stopPropagation(),t.toggle()}}})],{toggle:t.toggle}),t._v(" "),t._t("clear",null,{search:t.search}),t._v(" "),i("div",{ref:"tags",staticClass:"multiselect__tags"},[t._t("selection",[i("div",{directives:[{name:"show",rawName:"v-show",value:t.visibleValues.length>0,expression:"visibleValues.length > 0"}],staticClass:"multiselect__tags-wrap"},[t._l(t.visibleValues,(function(e,s){return[t._t("tag",[i("span",{key:s,staticClass:"multiselect__tag"},[i("span",{domProps:{textContent:t._s(t.getOptionLabel(e))}}),t._v(" "),i("i",{staticClass:"multiselect__tag-icon",attrs:{"aria-hidden":"true",tabindex:"1"},on:{keypress:function(i){if(!("button"in i)&&t._k(i.keyCode,"enter",13,i.key,"Enter"))return null;i.preventDefault(),t.removeElement(e)},mousedown:function(i){i.preventDefault(),t.removeElement(e)}}})])],{option:e,search:t.search,remove:t.removeElement})]}))],2),t._v(" "),t.internalValue&&t.internalValue.length>t.limit?[t._t("limit",[i("strong",{staticClass:"multiselect__strong",domProps:{textContent:t._s(t.limitText(t.internalValue.length-t.limit))}})])]:t._e()],{search:t.search,remove:t.removeElement,values:t.visibleValues,isOpen:t.isOpen}),t._v(" "),i("transition",{attrs:{name:"multiselect__loading"}},[t._t("loading",[i("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"multiselect__spinner"})])],2),t._v(" "),t.searchable?i("input",{ref:"search",staticClass:"multiselect__input",style:t.inputStyle,attrs:{name:t.name,id:t.id,type:"text",autocomplete:"nope",placeholder:t.placeholder,disabled:t.disabled,tabindex:t.tabindex},domProps:{value:t.search},on:{input:function(e){t.updateSearch(e.target.value)},focus:function(e){e.preventDefault(),t.activate()},blur:function(e){e.preventDefault(),t.deactivate()},keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"esc",27,e.key,"Escape"))return null;t.deactivate()},keydown:[function(e){if(!("button"in e)&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"]))return null;e.preventDefault(),t.pointerForward()},function(e){if(!("button"in e)&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"]))return null;e.preventDefault(),t.pointerBackward()},function(e){if(!("button"in e)&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete"]))return null;e.stopPropagation(),t.removeLastElement()}],keypress:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?(e.preventDefault(),e.stopPropagation(),e.target!==e.currentTarget?null:void t.addPointerElement(e)):null}}}):t._e(),t._v(" "),t.isSingleLabelVisible?i("span",{staticClass:"multiselect__single",on:{mousedown:function(e){return e.preventDefault(),t.toggle(e)}}},[t._t("singleLabel",[[t._v(t._s(t.currentOptionLabel))]],{option:t.singleValue})],2):t._e(),t._v(" "),t.isPlaceholderVisible?i("span",{staticClass:"multiselect__placeholder",on:{mousedown:function(e){return e.preventDefault(),t.toggle(e)}}},[t._t("placeholder",[t._v("\n          "+t._s(t.placeholder)+"\n        ")])],2):t._e()],2),t._v(" "),i("transition",{attrs:{name:"multiselect"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isOpen,expression:"isOpen"}],ref:"list",staticClass:"multiselect__content-wrapper",style:{maxHeight:t.optimizedHeight+"px"},attrs:{tabindex:"-1"},on:{focus:t.activate,mousedown:function(t){t.preventDefault()}}},[i("ul",{staticClass:"multiselect__content",style:t.contentStyle},[t._t("beforeList"),t._v(" "),t.multiple&&t.max===t.internalValue.length?i("li",[i("span",{staticClass:"multiselect__option"},[t._t("maxElements",[t._v("Maximum of "+t._s(t.max)+" options selected. First remove a selected option to select another.")])],2)]):t._e(),t._v(" "),!t.max||t.internalValue.length<t.max?t._l(t.filteredOptions,(function(e,s){return i("li",{key:s,staticClass:"multiselect__element"},[e&&(e.$isLabel||e.$isDisabled)?t._e():i("span",{staticClass:"multiselect__option",class:t.optionHighlight(s,e),attrs:{"data-select":e&&e.isTag?t.tagPlaceholder:t.selectLabelText,"data-selected":t.selectedLabelText,"data-deselect":t.deselectLabelText},on:{click:function(i){i.stopPropagation(),t.select(e)},mouseenter:function(e){if(e.target!==e.currentTarget)return null;t.pointerSet(s)}}},[t._t("option",[i("span",[t._v(t._s(t.getOptionLabel(e)))])],{option:e,search:t.search})],2),t._v(" "),e&&(e.$isLabel||e.$isDisabled)?i("span",{staticClass:"multiselect__option",class:t.groupHighlight(s,e),attrs:{"data-select":t.groupSelect&&t.selectGroupLabelText,"data-deselect":t.groupSelect&&t.deselectGroupLabelText},on:{mouseenter:function(e){if(e.target!==e.currentTarget)return null;t.groupSelect&&t.pointerSet(s)},mousedown:function(i){i.preventDefault(),t.selectGroup(e)}}},[t._t("option",[i("span",[t._v(t._s(t.getOptionLabel(e)))])],{option:e,search:t.search})],2):t._e()])})):t._e(),t._v(" "),i("li",{directives:[{name:"show",rawName:"v-show",value:t.showNoResults&&0===t.filteredOptions.length&&t.search&&!t.loading,expression:"showNoResults && (filteredOptions.length === 0 && search && !loading)"}]},[i("span",{staticClass:"multiselect__option"},[t._t("noResult",[t._v("No elements found. Consider changing the search query.")],{search:t.search})],2)]),t._v(" "),i("li",{directives:[{name:"show",rawName:"v-show",value:t.showNoOptions&&0===t.options.length&&!t.search&&!t.loading,expression:"showNoOptions && (options.length === 0 && !search && !loading)"}]},[i("span",{staticClass:"multiselect__option"},[t._t("noOptions",[t._v("List is empty.")])],2)]),t._v(" "),t._t("afterList")],2)])])],2)},n=[],r={render:s,staticRenderFns:n};e.a=r}])}))},"90b4":function(t,e,i){},"90f4":function(t,e,i){"use strict";i("206d")},"916f":function(t,e,i){"use strict";i("ebe9")},"97e8":function(t,e,i){},"991b":function(t,e,i){"use strict";i("90b4")},9961:function(t,e,i){"use strict";i("76b6")},"9aa7":function(t,e,i){"use strict";i("b03f")},a5c1:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:t.id}})},n=[],r=(i("5319"),i("0921")),a=i("025e"),o=i("4cdf"),l=i("5bc3"),c=i("256f"),u=i("480c"),h=i("6cf3"),d=i("3e6b"),p=i("5831"),f=i("2ef1"),m=(i("7505"),i("cfd3")),g={name:"MapViewer",mixins:[r["a"]],props:{extents:{type:Array,default:()=>null},geoJson:{type:Object,default:()=>null}},data(){return{userLayers:{},swipe:{control:null,left:null,right:null}}},methods:{renderMap(){let t=Array.isArray(this.extents)&&this.extents.length>0;if(this.createMap(!t),t)for(let i of this.extents){var e=a["a"].extentToBBox(i);this.addRectangle(e.west,e.east,e.north,e.south)}a["a"].isObject(this.geoJson)&&(this.geoJsonLayer=this.addGeoJson(this.geoJson))},addRectangle(t,e,i,s){var n=[...Object(c["d"])([t,s]),...Object(c["d"])([e,i])];this.map.addLayer(new d["a"]({title:"Extent",displayInLayerSwitcher:!1,source:new p["a"]({features:[new o["a"](Object(l["c"])(n))],wrapX:!1})})),this.map.getView().fit(n)},getVisibleLayers(){var t=[];for(var e in this.userLayers)this.userLayers[e].getVisible()&&t.push(e);return t},showWebService(t){switch(t.type.toLowerCase()){case"xyz":this.updateXYZLayer(t);break;default:a["a"].error(this,"Sorry, the service type is not supported by the map.")}},toggleSwipeControl(){var t=this.getVisibleLayers();2===t.length?(null===this.swipe.control&&(this.swipe.control=new m["a"],this.map.addControl(this.swipe.control)),this.swipe.left!==t[0]&&(this.swipe.control.addLayer(this.userLayers[t[0]]),this.swipe.left=t[0]),this.swipe.right!==t[1]&&(this.swipe.control.addLayer(this.userLayers[t[1]],!0),this.swipe.right=t[1])):(this.map.removeControl(this.swipe.control),this.swipe.control=null,this.swipe.left=null,this.swipe.right=null)},addLayerToMap(t,e){this.userLayers[t]=e,this.map.addLayer(e),this.toggleSwipeControl(),e.on("change",()=>this.toggleSwipeControl()),e.on("change:visible",()=>this.toggleSwipeControl()),e.on("change:zIndex",()=>this.toggleSwipeControl())},removeLayerFromMap(t){this.userLayers[t]&&(this.map.removeLayer(this.userLayers[t]),delete this.userLayers[t],this.toggleSwipeControl())},updateGeoTiffLayer(t,e=null){var i=new u["a"]({source:new h["a"]({url:"http://tiles.rdnt.io/tiles?url="+encodeURIComponent(t),crossOrigin:"anonymous"})});this.addLayerToMap(e||"GeoTiff",i)},updateXYZLayer(t){var e=t.id,i=t.url,s=a["a"].getResourceTitle(t,"Service")+" (XYZ)";if("undefined"===typeof this.userLayers[e]){var n=new u["a"]({source:this.trackTileProgress(new f["a"]({url:i})),title:s});this.addLayerToMap(e,n)}else{var r=a["a"].replaceParam(i,"__editorSessionId",(new Date).getTime());r=r.replace(/%7B/g,"{").replace(/%7D/g,"}"),this.userLayers[e].getSource().setUrl(r)}}}},v=g,b=(i("991b"),i("2877")),y=Object(b["a"])(v,s,n,!1,null,null,null);e["a"]=y.exports},aa47:function(t,e,i){"use strict";
/**!
 * Sortable 1.10.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
function s(t){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function r(){return r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},r.apply(this,arguments)}function a(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},s=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(i).filter((function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable})))),s.forEach((function(e){n(t,e,i[e])}))}return t}function o(t,e){if(null==t)return{};var i,s,n={},r=Object.keys(t);for(s=0;s<r.length;s++)i=r[s],e.indexOf(i)>=0||(n[i]=t[i]);return n}function l(t,e){if(null==t)return{};var i,s,n=o(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(s=0;s<r.length;s++)i=r[s],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function c(t){return u(t)||h(t)||d()}function u(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}function h(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance")}i.r(e),i.d(e,"MultiDrag",(function(){return Ae})),i.d(e,"Sortable",(function(){return Zt})),i.d(e,"Swap",(function(){return ke}));var p="1.10.2";function f(t){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var m=f(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),g=f(/Edge/i),v=f(/firefox/i),b=f(/safari/i)&&!f(/chrome/i)&&!f(/android/i),y=f(/iP(ad|od|hone)/i),w=f(/chrome/i)&&f(/android/i),x={capture:!1,passive:!1};function S(t,e,i){t.addEventListener(e,i,!m&&x)}function _(t,e,i){t.removeEventListener(e,i,!m&&x)}function C(t,e){if(e){if(">"===e[0]&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(i){return!1}return!1}}function E(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function k(t,e,i,s){if(t){i=i||document;do{if(null!=e&&(">"===e[0]?t.parentNode===i&&C(t,e):C(t,e))||s&&t===i)return t;if(t===i)break}while(t=E(t))}return null}var P,D=/\s+/g;function T(t,e,i){if(t&&e)if(t.classList)t.classList[i?"add":"remove"](e);else{var s=(" "+t.className+" ").replace(D," ").replace(" "+e+" "," ");t.className=(s+(i?" "+e:"")).replace(D," ")}}function O(t,e,i){var s=t&&t.style;if(s){if(void 0===i)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(i=t.currentStyle),void 0===e?i:i[e];e in s||-1!==e.indexOf("webkit")||(e="-webkit-"+e),s[e]=i+("string"===typeof i?"":"px")}}function M(t,e){var i="";if("string"===typeof t)i=t;else do{var s=O(t,"transform");s&&"none"!==s&&(i=s+" "+i)}while(!e&&(t=t.parentNode));var n=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return n&&new n(i)}function I(t,e,i){if(t){var s=t.getElementsByTagName(e),n=0,r=s.length;if(i)for(;n<r;n++)i(s[n],n);return s}return[]}function F(){var t=document.scrollingElement;return t||document.documentElement}function j(t,e,i,s,n){if(t.getBoundingClientRect||t===window){var r,a,o,l,c,u,h;if(t!==window&&t!==F()?(r=t.getBoundingClientRect(),a=r.top,o=r.left,l=r.bottom,c=r.right,u=r.height,h=r.width):(a=0,o=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,h=window.innerWidth),(e||i)&&t!==window&&(n=n||t.parentNode,!m))do{if(n&&n.getBoundingClientRect&&("none"!==O(n,"transform")||i&&"static"!==O(n,"position"))){var d=n.getBoundingClientRect();a-=d.top+parseInt(O(n,"border-top-width")),o-=d.left+parseInt(O(n,"border-left-width")),l=a+r.height,c=o+r.width;break}}while(n=n.parentNode);if(s&&t!==window){var p=M(n||t),f=p&&p.a,g=p&&p.d;p&&(a/=g,o/=f,h/=f,u/=g,l=a+u,c=o+h)}return{top:a,left:o,bottom:l,right:c,width:h,height:u}}}function B(t,e,i){var s=V(t,!0),n=j(t)[e];while(s){var r=j(s)[i],a=void 0;if(a="top"===i||"left"===i?n>=r:n<=r,!a)return s;if(s===F())break;s=V(s,!1)}return!1}function L(t,e,i){var s=0,n=0,r=t.children;while(n<r.length){if("none"!==r[n].style.display&&r[n]!==Zt.ghost&&r[n]!==Zt.dragged&&k(r[n],i.draggable,t,!1)){if(s===e)return r[n];s++}n++}return null}function $(t,e){var i=t.lastElementChild;while(i&&(i===Zt.ghost||"none"===O(i,"display")||e&&!C(i,e)))i=i.previousElementSibling;return i||null}function A(t,e){var i=0;if(!t||!t.parentNode)return-1;while(t=t.previousElementSibling)"TEMPLATE"===t.nodeName.toUpperCase()||t===Zt.clone||e&&!C(t,e)||i++;return i}function N(t){var e=0,i=0,s=F();if(t)do{var n=M(t),r=n.a,a=n.d;e+=t.scrollLeft*r,i+=t.scrollTop*a}while(t!==s&&(t=t.parentNode));return[e,i]}function R(t,e){for(var i in t)if(t.hasOwnProperty(i))for(var s in e)if(e.hasOwnProperty(s)&&e[s]===t[i][s])return Number(i);return-1}function V(t,e){if(!t||!t.getBoundingClientRect)return F();var i=t,s=!1;do{if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var n=O(i);if(i.clientWidth<i.scrollWidth&&("auto"==n.overflowX||"scroll"==n.overflowX)||i.clientHeight<i.scrollHeight&&("auto"==n.overflowY||"scroll"==n.overflowY)){if(!i.getBoundingClientRect||i===document.body)return F();if(s||e)return i;s=!0}}}while(i=i.parentNode);return F()}function U(t,e){if(t&&e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function J(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function H(t,e){return function(){if(!P){var i=arguments,s=this;1===i.length?t.call(s,i[0]):t.apply(s,i),P=setTimeout((function(){P=void 0}),e)}}}function G(){clearTimeout(P),P=void 0}function z(t,e,i){t.scrollLeft+=e,t.scrollTop+=i}function X(t){var e=window.Polymer,i=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):i?i(t).clone(!0)[0]:t.cloneNode(!0)}function Y(t,e){O(t,"position","absolute"),O(t,"top",e.top),O(t,"left",e.left),O(t,"width",e.width),O(t,"height",e.height)}function W(t){O(t,"position",""),O(t,"top",""),O(t,"left",""),O(t,"width",""),O(t,"height","")}var q="Sortable"+(new Date).getTime();function K(){var t,e=[];return{captureAnimationState:function(){if(e=[],this.options.animation){var t=[].slice.call(this.el.children);t.forEach((function(t){if("none"!==O(t,"display")&&t!==Zt.ghost){e.push({target:t,rect:j(t)});var i=a({},e[e.length-1].rect);if(t.thisAnimationDuration){var s=M(t,!0);s&&(i.top-=s.f,i.left-=s.e)}t.fromRect=i}}))}},addAnimationState:function(t){e.push(t)},removeAnimationState:function(t){e.splice(R(e,{target:t}),1)},animateAll:function(i){var s=this;if(!this.options.animation)return clearTimeout(t),void("function"===typeof i&&i());var n=!1,r=0;e.forEach((function(t){var e=0,i=t.target,a=i.fromRect,o=j(i),l=i.prevFromRect,c=i.prevToRect,u=t.rect,h=M(i,!0);h&&(o.top-=h.f,o.left-=h.e),i.toRect=o,i.thisAnimationDuration&&J(l,o)&&!J(a,o)&&(u.top-o.top)/(u.left-o.left)===(a.top-o.top)/(a.left-o.left)&&(e=Q(u,l,c,s.options)),J(o,a)||(i.prevFromRect=a,i.prevToRect=o,e||(e=s.options.animation),s.animate(i,u,o,e)),e&&(n=!0,r=Math.max(r,e),clearTimeout(i.animationResetTimer),i.animationResetTimer=setTimeout((function(){i.animationTime=0,i.prevFromRect=null,i.fromRect=null,i.prevToRect=null,i.thisAnimationDuration=null}),e),i.thisAnimationDuration=e)})),clearTimeout(t),n?t=setTimeout((function(){"function"===typeof i&&i()}),r):"function"===typeof i&&i(),e=[]},animate:function(t,e,i,s){if(s){O(t,"transition",""),O(t,"transform","");var n=M(this.el),r=n&&n.a,a=n&&n.d,o=(e.left-i.left)/(r||1),l=(e.top-i.top)/(a||1);t.animatingX=!!o,t.animatingY=!!l,O(t,"transform","translate3d("+o+"px,"+l+"px,0)"),Z(t),O(t,"transition","transform "+s+"ms"+(this.options.easing?" "+this.options.easing:"")),O(t,"transform","translate3d(0,0,0)"),"number"===typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout((function(){O(t,"transition",""),O(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1}),s)}}}}function Z(t){return t.offsetWidth}function Q(t,e,i,s){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))*s.animation}var tt=[],et={initializeByDefault:!0},it={mount:function(t){for(var e in et)et.hasOwnProperty(e)&&!(e in t)&&(t[e]=et[e]);tt.push(t)},pluginEvent:function(t,e,i){var s=this;this.eventCanceled=!1,i.cancel=function(){s.eventCanceled=!0};var n=t+"Global";tt.forEach((function(s){e[s.pluginName]&&(e[s.pluginName][n]&&e[s.pluginName][n](a({sortable:e},i)),e.options[s.pluginName]&&e[s.pluginName][t]&&e[s.pluginName][t](a({sortable:e},i)))}))},initializePlugins:function(t,e,i,s){for(var n in tt.forEach((function(s){var n=s.pluginName;if(t.options[n]||s.initializeByDefault){var a=new s(t,e,t.options);a.sortable=t,a.options=t.options,t[n]=a,r(i,a.defaults)}})),t.options)if(t.options.hasOwnProperty(n)){var a=this.modifyOption(t,n,t.options[n]);"undefined"!==typeof a&&(t.options[n]=a)}},getEventProperties:function(t,e){var i={};return tt.forEach((function(s){"function"===typeof s.eventProperties&&r(i,s.eventProperties.call(e[s.pluginName],t))})),i},modifyOption:function(t,e,i){var s;return tt.forEach((function(n){t[n.pluginName]&&n.optionListeners&&"function"===typeof n.optionListeners[e]&&(s=n.optionListeners[e].call(t[n.pluginName],i))})),s}};function st(t){var e=t.sortable,i=t.rootEl,s=t.name,n=t.targetEl,r=t.cloneEl,o=t.toEl,l=t.fromEl,c=t.oldIndex,u=t.newIndex,h=t.oldDraggableIndex,d=t.newDraggableIndex,p=t.originalEvent,f=t.putSortable,v=t.extraEventProperties;if(e=e||i&&i[q],e){var b,y=e.options,w="on"+s.charAt(0).toUpperCase()+s.substr(1);!window.CustomEvent||m||g?(b=document.createEvent("Event"),b.initEvent(s,!0,!0)):b=new CustomEvent(s,{bubbles:!0,cancelable:!0}),b.to=o||i,b.from=l||i,b.item=n||i,b.clone=r,b.oldIndex=c,b.newIndex=u,b.oldDraggableIndex=h,b.newDraggableIndex=d,b.originalEvent=p,b.pullMode=f?f.lastPutMode:void 0;var x=a({},v,it.getEventProperties(s,e));for(var S in x)b[S]=x[S];i&&i.dispatchEvent(b),y[w]&&y[w].call(e,b)}}var nt=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=i.evt,n=l(i,["evt"]);it.pluginEvent.bind(Zt)(t,e,a({dragEl:at,parentEl:ot,ghostEl:lt,rootEl:ct,nextEl:ut,lastDownEl:ht,cloneEl:dt,cloneHidden:pt,dragStarted:kt,putSortable:yt,activeSortable:Zt.active,originalEvent:s,oldIndex:ft,oldDraggableIndex:gt,newIndex:mt,newDraggableIndex:vt,hideGhostForTarget:Yt,unhideGhostForTarget:Wt,cloneNowHidden:function(){pt=!0},cloneNowShown:function(){pt=!1},dispatchSortableEvent:function(t){rt({sortable:e,name:t,originalEvent:s})}},n))};function rt(t){st(a({putSortable:yt,cloneEl:dt,targetEl:at,rootEl:ct,oldIndex:ft,oldDraggableIndex:gt,newIndex:mt,newDraggableIndex:vt},t))}var at,ot,lt,ct,ut,ht,dt,pt,ft,mt,gt,vt,bt,yt,wt,xt,St,_t,Ct,Et,kt,Pt,Dt,Tt,Ot,Mt=!1,It=!1,Ft=[],jt=!1,Bt=!1,Lt=[],$t=!1,At=[],Nt="undefined"!==typeof document,Rt=y,Vt=g||m?"cssFloat":"float",Ut=Nt&&!w&&!y&&"draggable"in document.createElement("div"),Jt=function(){if(Nt){if(m)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),Ht=function(t,e){var i=O(t),s=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),n=L(t,0,e),r=L(t,1,e),a=n&&O(n),o=r&&O(r),l=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+j(n).width,c=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+j(r).width;if("flex"===i.display)return"column"===i.flexDirection||"column-reverse"===i.flexDirection?"vertical":"horizontal";if("grid"===i.display)return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(n&&a["float"]&&"none"!==a["float"]){var u="left"===a["float"]?"left":"right";return!r||"both"!==o.clear&&o.clear!==u?"horizontal":"vertical"}return n&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||l>=s&&"none"===i[Vt]||r&&"none"===i[Vt]&&l+c>s)?"vertical":"horizontal"},Gt=function(t,e,i){var s=i?t.left:t.top,n=i?t.right:t.bottom,r=i?t.width:t.height,a=i?e.left:e.top,o=i?e.right:e.bottom,l=i?e.width:e.height;return s===a||n===o||s+r/2===a+l/2},zt=function(t,e){var i;return Ft.some((function(s){if(!$(s)){var n=j(s),r=s[q].options.emptyInsertThreshold,a=t>=n.left-r&&t<=n.right+r,o=e>=n.top-r&&e<=n.bottom+r;return r&&a&&o?i=s:void 0}})),i},Xt=function(t){function e(t,i){return function(s,n,r,a){var o=s.options.group.name&&n.options.group.name&&s.options.group.name===n.options.group.name;if(null==t&&(i||o))return!0;if(null==t||!1===t)return!1;if(i&&"clone"===t)return t;if("function"===typeof t)return e(t(s,n,r,a),i)(s,n,r,a);var l=(i?s:n).options.group.name;return!0===t||"string"===typeof t&&t===l||t.join&&t.indexOf(l)>-1}}var i={},n=t.group;n&&"object"==s(n)||(n={name:n}),i.name=n.name,i.checkPull=e(n.pull,!0),i.checkPut=e(n.put),i.revertClone=n.revertClone,t.group=i},Yt=function(){!Jt&&lt&&O(lt,"display","none")},Wt=function(){!Jt&&lt&&O(lt,"display","")};Nt&&document.addEventListener("click",(function(t){if(It)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),It=!1,!1}),!0);var qt=function(t){if(at){t=t.touches?t.touches[0]:t;var e=zt(t.clientX,t.clientY);if(e){var i={};for(var s in t)t.hasOwnProperty(s)&&(i[s]=t[s]);i.target=i.rootEl=e,i.preventDefault=void 0,i.stopPropagation=void 0,e[q]._onDragOver(i)}}},Kt=function(t){at&&at.parentNode[q]._isOutsideThisEl(t.target)};function Zt(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=r({},e),t[q]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ht(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Zt.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(var s in it.initializePlugins(this,t,i),i)!(s in e)&&(e[s]=i[s]);for(var n in Xt(e),this)"_"===n.charAt(0)&&"function"===typeof this[n]&&(this[n]=this[n].bind(this));this.nativeDraggable=!e.forceFallback&&Ut,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?S(t,"pointerdown",this._onTapStart):(S(t,"mousedown",this._onTapStart),S(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(S(t,"dragover",this),S(t,"dragenter",this)),Ft.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),r(this,K())}function Qt(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function te(t,e,i,s,n,r,a,o){var l,c,u=t[q],h=u.options.onMove;return!window.CustomEvent||m||g?(l=document.createEvent("Event"),l.initEvent("move",!0,!0)):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=e,l.from=t,l.dragged=i,l.draggedRect=s,l.related=n||e,l.relatedRect=r||j(e),l.willInsertAfter=o,l.originalEvent=a,t.dispatchEvent(l),h&&(c=h.call(u,l,a)),c}function ee(t){t.draggable=!1}function ie(){$t=!1}function se(t,e,i){var s=j($(i.el,i.options.draggable)),n=10;return e?t.clientX>s.right+n||t.clientX<=s.right&&t.clientY>s.bottom&&t.clientX>=s.left:t.clientX>s.right&&t.clientY>s.top||t.clientX<=s.right&&t.clientY>s.bottom+n}function ne(t,e,i,s,n,r,a,o){var l=s?t.clientY:t.clientX,c=s?i.height:i.width,u=s?i.top:i.left,h=s?i.bottom:i.right,d=!1;if(!a)if(o&&Tt<c*n){if(!jt&&(1===Dt?l>u+c*r/2:l<h-c*r/2)&&(jt=!0),jt)d=!0;else if(1===Dt?l<u+Tt:l>h-Tt)return-Dt}else if(l>u+c*(1-n)/2&&l<h-c*(1-n)/2)return re(e);return d=d||a,d&&(l<u+c*r/2||l>h-c*r/2)?l>u+c/2?1:-1:0}function re(t){return A(at)<A(t)?1:-1}function ae(t){var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,s=0;while(i--)s+=e.charCodeAt(i);return s.toString(36)}function oe(t){At.length=0;var e=t.getElementsByTagName("input"),i=e.length;while(i--){var s=e[i];s.checked&&At.push(s)}}function le(t){return setTimeout(t,0)}function ce(t){return clearTimeout(t)}Zt.prototype={constructor:Zt,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(Pt=null)},_getDirection:function(t,e){return"function"===typeof this.options.direction?this.options.direction.call(this,t,e,at):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,i=this.el,s=this.options,n=s.preventOnFilter,r=t.type,a=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,o=(a||t).target,l=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||o,c=s.filter;if(oe(i),!at&&!(/mousedown|pointerdown/.test(r)&&0!==t.button||s.disabled)&&!l.isContentEditable&&(o=k(o,s.draggable,i,!1),(!o||!o.animated)&&ht!==o)){if(ft=A(o),gt=A(o,s.draggable),"function"===typeof c){if(c.call(this,t,o,this))return rt({sortable:e,rootEl:l,name:"filter",targetEl:o,toEl:i,fromEl:i}),nt("filter",e,{evt:t}),void(n&&t.cancelable&&t.preventDefault())}else if(c&&(c=c.split(",").some((function(s){if(s=k(l,s.trim(),i,!1),s)return rt({sortable:e,rootEl:s,name:"filter",targetEl:o,fromEl:i,toEl:i}),nt("filter",e,{evt:t}),!0})),c))return void(n&&t.cancelable&&t.preventDefault());s.handle&&!k(l,s.handle,i,!1)||this._prepareDragStart(t,a,o)}}},_prepareDragStart:function(t,e,i){var s,n=this,r=n.el,a=n.options,o=r.ownerDocument;if(i&&!at&&i.parentNode===r){var l=j(i);if(ct=r,at=i,ot=at.parentNode,ut=at.nextSibling,ht=i,bt=a.group,Zt.dragged=at,wt={target:at,clientX:(e||t).clientX,clientY:(e||t).clientY},Ct=wt.clientX-l.left,Et=wt.clientY-l.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,at.style["will-change"]="all",s=function(){nt("delayEnded",n,{evt:t}),Zt.eventCanceled?n._onDrop():(n._disableDelayedDragEvents(),!v&&n.nativeDraggable&&(at.draggable=!0),n._triggerDragStart(t,e),rt({sortable:n,name:"choose",originalEvent:t}),T(at,a.chosenClass,!0))},a.ignore.split(",").forEach((function(t){I(at,t.trim(),ee)})),S(o,"dragover",qt),S(o,"mousemove",qt),S(o,"touchmove",qt),S(o,"mouseup",n._onDrop),S(o,"touchend",n._onDrop),S(o,"touchcancel",n._onDrop),v&&this.nativeDraggable&&(this.options.touchStartThreshold=4,at.draggable=!0),nt("delayStart",this,{evt:t}),!a.delay||a.delayOnTouchOnly&&!e||this.nativeDraggable&&(g||m))s();else{if(Zt.eventCanceled)return void this._onDrop();S(o,"mouseup",n._disableDelayedDrag),S(o,"touchend",n._disableDelayedDrag),S(o,"touchcancel",n._disableDelayedDrag),S(o,"mousemove",n._delayedDragTouchMoveHandler),S(o,"touchmove",n._delayedDragTouchMoveHandler),a.supportPointer&&S(o,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(s,a.delay)}}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){at&&ee(at),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;_(t,"mouseup",this._disableDelayedDrag),_(t,"touchend",this._disableDelayedDrag),_(t,"touchcancel",this._disableDelayedDrag),_(t,"mousemove",this._delayedDragTouchMoveHandler),_(t,"touchmove",this._delayedDragTouchMoveHandler),_(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||"touch"==t.pointerType&&t,!this.nativeDraggable||e?this.options.supportPointer?S(document,"pointermove",this._onTouchMove):S(document,e?"touchmove":"mousemove",this._onTouchMove):(S(at,"dragend",this),S(ct,"dragstart",this._onDragStart));try{document.selection?le((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(i){}},_dragStarted:function(t,e){if(Mt=!1,ct&&at){nt("dragStarted",this,{evt:e}),this.nativeDraggable&&S(document,"dragover",Kt);var i=this.options;!t&&T(at,i.dragClass,!1),T(at,i.ghostClass,!0),Zt.active=this,t&&this._appendGhost(),rt({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(xt){this._lastX=xt.clientX,this._lastY=xt.clientY,Yt();var t=document.elementFromPoint(xt.clientX,xt.clientY),e=t;while(t&&t.shadowRoot){if(t=t.shadowRoot.elementFromPoint(xt.clientX,xt.clientY),t===e)break;e=t}if(at.parentNode[q]._isOutsideThisEl(t),e)do{if(e[q]){var i=void 0;if(i=e[q]._onDragOver({clientX:xt.clientX,clientY:xt.clientY,target:t,rootEl:e}),i&&!this.options.dragoverBubble)break}t=e}while(e=e.parentNode);Wt()}},_onTouchMove:function(t){if(wt){var e=this.options,i=e.fallbackTolerance,s=e.fallbackOffset,n=t.touches?t.touches[0]:t,r=lt&&M(lt,!0),a=lt&&r&&r.a,o=lt&&r&&r.d,l=Rt&&Ot&&N(Ot),c=(n.clientX-wt.clientX+s.x)/(a||1)+(l?l[0]-Lt[0]:0)/(a||1),u=(n.clientY-wt.clientY+s.y)/(o||1)+(l?l[1]-Lt[1]:0)/(o||1);if(!Zt.active&&!Mt){if(i&&Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))<i)return;this._onDragStart(t,!0)}if(lt){r?(r.e+=c-(St||0),r.f+=u-(_t||0)):r={a:1,b:0,c:0,d:1,e:c,f:u};var h="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");O(lt,"webkitTransform",h),O(lt,"mozTransform",h),O(lt,"msTransform",h),O(lt,"transform",h),St=c,_t=u,xt=n}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!lt){var t=this.options.fallbackOnBody?document.body:ct,e=j(at,!0,Rt,!0,t),i=this.options;if(Rt){Ot=t;while("static"===O(Ot,"position")&&"none"===O(Ot,"transform")&&Ot!==document)Ot=Ot.parentNode;Ot!==document.body&&Ot!==document.documentElement?(Ot===document&&(Ot=F()),e.top+=Ot.scrollTop,e.left+=Ot.scrollLeft):Ot=F(),Lt=N(Ot)}lt=at.cloneNode(!0),T(lt,i.ghostClass,!1),T(lt,i.fallbackClass,!0),T(lt,i.dragClass,!0),O(lt,"transition",""),O(lt,"transform",""),O(lt,"box-sizing","border-box"),O(lt,"margin",0),O(lt,"top",e.top),O(lt,"left",e.left),O(lt,"width",e.width),O(lt,"height",e.height),O(lt,"opacity","0.8"),O(lt,"position",Rt?"absolute":"fixed"),O(lt,"zIndex","100000"),O(lt,"pointerEvents","none"),Zt.ghost=lt,t.appendChild(lt),O(lt,"transform-origin",Ct/parseInt(lt.style.width)*100+"% "+Et/parseInt(lt.style.height)*100+"%")}},_onDragStart:function(t,e){var i=this,s=t.dataTransfer,n=i.options;nt("dragStart",this,{evt:t}),Zt.eventCanceled?this._onDrop():(nt("setupClone",this),Zt.eventCanceled||(dt=X(at),dt.draggable=!1,dt.style["will-change"]="",this._hideClone(),T(dt,this.options.chosenClass,!1),Zt.clone=dt),i.cloneId=le((function(){nt("clone",i),Zt.eventCanceled||(i.options.removeCloneOnHide||ct.insertBefore(dt,at),i._hideClone(),rt({sortable:i,name:"clone"}))})),!e&&T(at,n.dragClass,!0),e?(It=!0,i._loopId=setInterval(i._emulateDragOver,50)):(_(document,"mouseup",i._onDrop),_(document,"touchend",i._onDrop),_(document,"touchcancel",i._onDrop),s&&(s.effectAllowed="move",n.setData&&n.setData.call(i,s,at)),S(document,"drop",i),O(at,"transform","translateZ(0)")),Mt=!0,i._dragStartId=le(i._dragStarted.bind(i,e,t)),S(document,"selectstart",i),kt=!0,b&&O(document.body,"user-select","none"))},_onDragOver:function(t){var e,i,s,n,r=this.el,o=t.target,l=this.options,c=l.group,u=Zt.active,h=bt===c,d=l.sort,p=yt||u,f=this,m=!1;if(!$t){if(void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),o=k(o,l.draggable,r,!0),I("dragOver"),Zt.eventCanceled)return m;if(at.contains(t.target)||o.animated&&o.animatingX&&o.animatingY||f._ignoreWhileAnimating===o)return L(!1);if(It=!1,u&&!l.disabled&&(h?d||(s=!ct.contains(at)):yt===this||(this.lastPutMode=bt.checkPull(this,u,at,t))&&c.checkPut(this,u,at,t))){if(n="vertical"===this._getDirection(t,o),e=j(at),I("dragOverValid"),Zt.eventCanceled)return m;if(s)return ot=ct,F(),this._hideClone(),I("revert"),Zt.eventCanceled||(ut?ct.insertBefore(at,ut):ct.appendChild(at)),L(!0);var g=$(r,l.draggable);if(!g||se(t,n,this)&&!g.animated){if(g===at)return L(!1);if(g&&r===t.target&&(o=g),o&&(i=j(o)),!1!==te(ct,r,at,e,o,i,t,!!o))return F(),r.appendChild(at),ot=r,N(),L(!0)}else if(o.parentNode===r){i=j(o);var v,b,y=0,w=at.parentNode!==r,x=!Gt(at.animated&&at.toRect||e,o.animated&&o.toRect||i,n),S=n?"top":"left",_=B(o,"top","top")||B(at,"top","top"),C=_?_.scrollTop:void 0;if(Pt!==o&&(v=i[S],jt=!1,Bt=!x&&l.invertSwap||w),y=ne(t,o,i,n,x?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,Bt,Pt===o),0!==y){var E=A(at);do{E-=y,b=ot.children[E]}while(b&&("none"===O(b,"display")||b===lt))}if(0===y||b===o)return L(!1);Pt=o,Dt=y;var P=o.nextElementSibling,D=!1;D=1===y;var M=te(ct,r,at,e,o,i,t,D);if(!1!==M)return 1!==M&&-1!==M||(D=1===M),$t=!0,setTimeout(ie,30),F(),D&&!P?r.appendChild(at):o.parentNode.insertBefore(at,D?P:o),_&&z(_,0,C-_.scrollTop),ot=at.parentNode,void 0===v||Bt||(Tt=Math.abs(v-j(o)[S])),N(),L(!0)}if(r.contains(at))return L(!1)}return!1}function I(l,c){nt(l,f,a({evt:t,isOwner:h,axis:n?"vertical":"horizontal",revert:s,dragRect:e,targetRect:i,canSort:d,fromSortable:p,target:o,completed:L,onMove:function(i,s){return te(ct,r,at,e,i,j(i),t,s)},changed:N},c))}function F(){I("dragOverAnimationCapture"),f.captureAnimationState(),f!==p&&p.captureAnimationState()}function L(e){return I("dragOverCompleted",{insertion:e}),e&&(h?u._hideClone():u._showClone(f),f!==p&&(T(at,yt?yt.options.ghostClass:u.options.ghostClass,!1),T(at,l.ghostClass,!0)),yt!==f&&f!==Zt.active?yt=f:f===Zt.active&&yt&&(yt=null),p===f&&(f._ignoreWhileAnimating=o),f.animateAll((function(){I("dragOverAnimationComplete"),f._ignoreWhileAnimating=null})),f!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(o===at&&!at.animated||o===r&&!o.animated)&&(Pt=null),l.dragoverBubble||t.rootEl||o===document||(at.parentNode[q]._isOutsideThisEl(t.target),!e&&qt(t)),!l.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),m=!0}function N(){mt=A(at),vt=A(at,l.draggable),rt({sortable:f,name:"change",toEl:r,newIndex:mt,newDraggableIndex:vt,originalEvent:t})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){_(document,"mousemove",this._onTouchMove),_(document,"touchmove",this._onTouchMove),_(document,"pointermove",this._onTouchMove),_(document,"dragover",qt),_(document,"mousemove",qt),_(document,"touchmove",qt)},_offUpEvents:function(){var t=this.el.ownerDocument;_(t,"mouseup",this._onDrop),_(t,"touchend",this._onDrop),_(t,"pointerup",this._onDrop),_(t,"touchcancel",this._onDrop),_(document,"selectstart",this)},_onDrop:function(t){var e=this.el,i=this.options;mt=A(at),vt=A(at,i.draggable),nt("drop",this,{evt:t}),ot=at&&at.parentNode,mt=A(at),vt=A(at,i.draggable),Zt.eventCanceled||(Mt=!1,Bt=!1,jt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),ce(this.cloneId),ce(this._dragStartId),this.nativeDraggable&&(_(document,"drop",this),_(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),b&&O(document.body,"user-select",""),O(at,"transform",""),t&&(kt&&(t.cancelable&&t.preventDefault(),!i.dropBubble&&t.stopPropagation()),lt&&lt.parentNode&&lt.parentNode.removeChild(lt),(ct===ot||yt&&"clone"!==yt.lastPutMode)&&dt&&dt.parentNode&&dt.parentNode.removeChild(dt),at&&(this.nativeDraggable&&_(at,"dragend",this),ee(at),at.style["will-change"]="",kt&&!Mt&&T(at,yt?yt.options.ghostClass:this.options.ghostClass,!1),T(at,this.options.chosenClass,!1),rt({sortable:this,name:"unchoose",toEl:ot,newIndex:null,newDraggableIndex:null,originalEvent:t}),ct!==ot?(mt>=0&&(rt({rootEl:ot,name:"add",toEl:ot,fromEl:ct,originalEvent:t}),rt({sortable:this,name:"remove",toEl:ot,originalEvent:t}),rt({rootEl:ot,name:"sort",toEl:ot,fromEl:ct,originalEvent:t}),rt({sortable:this,name:"sort",toEl:ot,originalEvent:t})),yt&&yt.save()):mt!==ft&&mt>=0&&(rt({sortable:this,name:"update",toEl:ot,originalEvent:t}),rt({sortable:this,name:"sort",toEl:ot,originalEvent:t})),Zt.active&&(null!=mt&&-1!==mt||(mt=ft,vt=gt),rt({sortable:this,name:"end",toEl:ot,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){nt("nulling",this),ct=at=ot=lt=ut=dt=ht=pt=wt=xt=kt=mt=vt=ft=gt=Pt=Dt=yt=bt=Zt.dragged=Zt.ghost=Zt.clone=Zt.active=null,At.forEach((function(t){t.checked=!0})),At.length=St=_t=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":at&&(this._onDragOver(t),Qt(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t,e=[],i=this.el.children,s=0,n=i.length,r=this.options;s<n;s++)t=i[s],k(t,r.draggable,this.el,!1)&&e.push(t.getAttribute(r.dataIdAttr)||ae(t));return e},sort:function(t){var e={},i=this.el;this.toArray().forEach((function(t,s){var n=i.children[s];k(n,this.options.draggable,i,!1)&&(e[t]=n)}),this),t.forEach((function(t){e[t]&&(i.removeChild(e[t]),i.appendChild(e[t]))}))},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return k(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var i=this.options;if(void 0===e)return i[t];var s=it.modifyOption(this,t,e);i[t]="undefined"!==typeof s?s:e,"group"===t&&Xt(i)},destroy:function(){nt("destroy",this);var t=this.el;t[q]=null,_(t,"mousedown",this._onTapStart),_(t,"touchstart",this._onTapStart),_(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(_(t,"dragover",this),_(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),(function(t){t.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),Ft.splice(Ft.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!pt){if(nt("hideClone",this),Zt.eventCanceled)return;O(dt,"display","none"),this.options.removeCloneOnHide&&dt.parentNode&&dt.parentNode.removeChild(dt),pt=!0}},_showClone:function(t){if("clone"===t.lastPutMode){if(pt){if(nt("showClone",this),Zt.eventCanceled)return;ct.contains(at)&&!this.options.group.revertClone?ct.insertBefore(dt,at):ut?ct.insertBefore(dt,ut):ct.appendChild(dt),this.options.group.revertClone&&this.animate(at,dt),O(dt,"display",""),pt=!1}}else this._hideClone()}},Nt&&S(document,"touchmove",(function(t){(Zt.active||Mt)&&t.cancelable&&t.preventDefault()})),Zt.utils={on:S,off:_,css:O,find:I,is:function(t,e){return!!k(t,e,t,!1)},extend:U,throttle:H,closest:k,toggleClass:T,clone:X,index:A,nextTick:le,cancelNextTick:ce,detectDirection:Ht,getChild:L},Zt.get=function(t){return t[q]},Zt.mount=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e[0].constructor===Array&&(e=e[0]),e.forEach((function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(Zt.utils=a({},Zt.utils,t.utils)),it.mount(t)}))},Zt.create=function(t,e){return new Zt(t,e)},Zt.version=p;var ue,he,de,pe,fe,me,ge=[],ve=!1;function be(){function t(){for(var t in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"===typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){var e=t.originalEvent;this.sortable.nativeDraggable?S(document,"dragover",this._handleAutoScroll):this.options.supportPointer?S(document,"pointermove",this._handleFallbackAutoScroll):e.touches?S(document,"touchmove",this._handleFallbackAutoScroll):S(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var e=t.originalEvent;this.options.dragOverBubble||e.rootEl||this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?_(document,"dragover",this._handleAutoScroll):(_(document,"pointermove",this._handleFallbackAutoScroll),_(document,"touchmove",this._handleFallbackAutoScroll),_(document,"mousemove",this._handleFallbackAutoScroll)),we(),ye(),G()},nulling:function(){fe=he=ue=ve=me=de=pe=null,ge.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,e){var i=this,s=(t.touches?t.touches[0]:t).clientX,n=(t.touches?t.touches[0]:t).clientY,r=document.elementFromPoint(s,n);if(fe=t,e||g||m||b){Se(t,this.options,r,e);var a=V(r,!0);!ve||me&&s===de&&n===pe||(me&&we(),me=setInterval((function(){var r=V(document.elementFromPoint(s,n),!0);r!==a&&(a=r,ye()),Se(t,i.options,r,e)}),10),de=s,pe=n)}else{if(!this.options.bubbleScroll||V(r,!0)===F())return void ye();Se(t,this.options,V(r,!1),!1)}}},r(t,{pluginName:"scroll",initializeByDefault:!0})}function ye(){ge.forEach((function(t){clearInterval(t.pid)})),ge=[]}function we(){clearInterval(me)}var xe,Se=H((function(t,e,i,s){if(e.scroll){var n,r=(t.touches?t.touches[0]:t).clientX,a=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,l=e.scrollSpeed,c=F(),u=!1;he!==i&&(he=i,ye(),ue=e.scroll,n=e.scrollFn,!0===ue&&(ue=V(i,!0)));var h=0,d=ue;do{var p=d,f=j(p),m=f.top,g=f.bottom,v=f.left,b=f.right,y=f.width,w=f.height,x=void 0,S=void 0,_=p.scrollWidth,C=p.scrollHeight,E=O(p),k=p.scrollLeft,P=p.scrollTop;p===c?(x=y<_&&("auto"===E.overflowX||"scroll"===E.overflowX||"visible"===E.overflowX),S=w<C&&("auto"===E.overflowY||"scroll"===E.overflowY||"visible"===E.overflowY)):(x=y<_&&("auto"===E.overflowX||"scroll"===E.overflowX),S=w<C&&("auto"===E.overflowY||"scroll"===E.overflowY));var D=x&&(Math.abs(b-r)<=o&&k+y<_)-(Math.abs(v-r)<=o&&!!k),T=S&&(Math.abs(g-a)<=o&&P+w<C)-(Math.abs(m-a)<=o&&!!P);if(!ge[h])for(var M=0;M<=h;M++)ge[M]||(ge[M]={});ge[h].vx==D&&ge[h].vy==T&&ge[h].el===p||(ge[h].el=p,ge[h].vx=D,ge[h].vy=T,clearInterval(ge[h].pid),0==D&&0==T||(u=!0,ge[h].pid=setInterval(function(){s&&0===this.layer&&Zt.active._onTouchMove(fe);var e=ge[this.layer].vy?ge[this.layer].vy*l:0,i=ge[this.layer].vx?ge[this.layer].vx*l:0;"function"===typeof n&&"continue"!==n.call(Zt.dragged.parentNode[q],i,e,t,fe,ge[this.layer].el)||z(ge[this.layer].el,i,e)}.bind({layer:h}),24))),h++}while(e.bubbleScroll&&d!==c&&(d=V(d,!1)));ve=u}}),30),_e=function(t){var e=t.originalEvent,i=t.putSortable,s=t.dragEl,n=t.activeSortable,r=t.dispatchSortableEvent,a=t.hideGhostForTarget,o=t.unhideGhostForTarget;if(e){var l=i||n;a();var c=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,u=document.elementFromPoint(c.clientX,c.clientY);o(),l&&!l.el.contains(u)&&(r("spill"),this.onSpill({dragEl:s,putSortable:i}))}};function Ce(){}function Ee(){}function ke(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(t){var e=t.dragEl;xe=e},dragOverValid:function(t){var e=t.completed,i=t.target,s=t.onMove,n=t.activeSortable,r=t.changed,a=t.cancel;if(n.options.swap){var o=this.sortable.el,l=this.options;if(i&&i!==o){var c=xe;!1!==s(i)?(T(i,l.swapClass,!0),xe=i):xe=null,c&&c!==xe&&T(c,l.swapClass,!1)}r(),e(!0),a()}},drop:function(t){var e=t.activeSortable,i=t.putSortable,s=t.dragEl,n=i||this.sortable,r=this.options;xe&&T(xe,r.swapClass,!1),xe&&(r.swap||i&&i.options.swap)&&s!==xe&&(n.captureAnimationState(),n!==e&&e.captureAnimationState(),Pe(s,xe),n.animateAll(),n!==e&&e.animateAll())},nulling:function(){xe=null}},r(t,{pluginName:"swap",eventProperties:function(){return{swapItem:xe}}})}function Pe(t,e){var i,s,n=t.parentNode,r=e.parentNode;n&&r&&!n.isEqualNode(e)&&!r.isEqualNode(t)&&(i=A(t),s=A(e),n.isEqualNode(r)&&i<s&&s++,n.insertBefore(e,n.children[i]),r.insertBefore(t,r.children[s]))}Ce.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,i=t.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var s=L(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(e,s):this.sortable.el.appendChild(e),this.sortable.animateAll(),i&&i.animateAll()},drop:_e},r(Ce,{pluginName:"revertOnSpill"}),Ee.prototype={onSpill:function(t){var e=t.dragEl,i=t.putSortable,s=i||this.sortable;s.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),s.animateAll()},drop:_e},r(Ee,{pluginName:"removeOnSpill"});var De,Te,Oe,Me,Ie,Fe=[],je=[],Be=!1,Le=!1,$e=!1;function Ae(){function t(t){for(var e in this)"_"===e.charAt(0)&&"function"===typeof this[e]&&(this[e]=this[e].bind(this));t.options.supportPointer?S(document,"pointerup",this._deselectMultiDrag):(S(document,"mouseup",this._deselectMultiDrag),S(document,"touchend",this._deselectMultiDrag)),S(document,"keydown",this._checkKeyDown),S(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(e,i){var s="";Fe.length&&Te===t?Fe.forEach((function(t,e){s+=(e?", ":"")+t.textContent})):s=i.textContent,e.setData("Text",s)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(t){var e=t.dragEl;Oe=e},delayEnded:function(){this.isMultiDrag=~Fe.indexOf(Oe)},setupClone:function(t){var e=t.sortable,i=t.cancel;if(this.isMultiDrag){for(var s=0;s<Fe.length;s++)je.push(X(Fe[s])),je[s].sortableIndex=Fe[s].sortableIndex,je[s].draggable=!1,je[s].style["will-change"]="",T(je[s],this.options.selectedClass,!1),Fe[s]===Oe&&T(je[s],this.options.chosenClass,!1);e._hideClone(),i()}},clone:function(t){var e=t.sortable,i=t.rootEl,s=t.dispatchSortableEvent,n=t.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Fe.length&&Te===e&&(Re(!0,i),s("clone"),n()))},showClone:function(t){var e=t.cloneNowShown,i=t.rootEl,s=t.cancel;this.isMultiDrag&&(Re(!1,i),je.forEach((function(t){O(t,"display","")})),e(),Ie=!1,s())},hideClone:function(t){var e=this,i=(t.sortable,t.cloneNowHidden),s=t.cancel;this.isMultiDrag&&(je.forEach((function(t){O(t,"display","none"),e.options.removeCloneOnHide&&t.parentNode&&t.parentNode.removeChild(t)})),i(),Ie=!0,s())},dragStartGlobal:function(t){t.sortable;!this.isMultiDrag&&Te&&Te.multiDrag._deselectMultiDrag(),Fe.forEach((function(t){t.sortableIndex=A(t)})),Fe=Fe.sort((function(t,e){return t.sortableIndex-e.sortableIndex})),$e=!0},dragStarted:function(t){var e=this,i=t.sortable;if(this.isMultiDrag){if(this.options.sort&&(i.captureAnimationState(),this.options.animation)){Fe.forEach((function(t){t!==Oe&&O(t,"position","absolute")}));var s=j(Oe,!1,!0,!0);Fe.forEach((function(t){t!==Oe&&Y(t,s)})),Le=!0,Be=!0}i.animateAll((function(){Le=!1,Be=!1,e.options.animation&&Fe.forEach((function(t){W(t)})),e.options.sort&&Ve()}))}},dragOver:function(t){var e=t.target,i=t.completed,s=t.cancel;Le&&~Fe.indexOf(e)&&(i(!1),s())},revert:function(t){var e=t.fromSortable,i=t.rootEl,s=t.sortable,n=t.dragRect;Fe.length>1&&(Fe.forEach((function(t){s.addAnimationState({target:t,rect:Le?j(t):n}),W(t),t.fromRect=n,e.removeAnimationState(t)})),Le=!1,Ne(!this.options.removeCloneOnHide,i))},dragOverCompleted:function(t){var e=t.sortable,i=t.isOwner,s=t.insertion,n=t.activeSortable,r=t.parentEl,a=t.putSortable,o=this.options;if(s){if(i&&n._hideClone(),Be=!1,o.animation&&Fe.length>1&&(Le||!i&&!n.options.sort&&!a)){var l=j(Oe,!1,!0,!0);Fe.forEach((function(t){t!==Oe&&(Y(t,l),r.appendChild(t))})),Le=!0}if(!i)if(Le||Ve(),Fe.length>1){var c=Ie;n._showClone(e),n.options.animation&&!Ie&&c&&je.forEach((function(t){n.addAnimationState({target:t,rect:Me}),t.fromRect=Me,t.thisAnimationDuration=null}))}else n._showClone(e)}},dragOverAnimationCapture:function(t){var e=t.dragRect,i=t.isOwner,s=t.activeSortable;if(Fe.forEach((function(t){t.thisAnimationDuration=null})),s.options.animation&&!i&&s.multiDrag.isMultiDrag){Me=r({},e);var n=M(Oe,!0);Me.top-=n.f,Me.left-=n.e}},dragOverAnimationComplete:function(){Le&&(Le=!1,Ve())},drop:function(t){var e=t.originalEvent,i=t.rootEl,s=t.parentEl,n=t.sortable,r=t.dispatchSortableEvent,a=t.oldIndex,o=t.putSortable,l=o||this.sortable;if(e){var c=this.options,u=s.children;if(!$e)if(c.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),T(Oe,c.selectedClass,!~Fe.indexOf(Oe)),~Fe.indexOf(Oe))Fe.splice(Fe.indexOf(Oe),1),De=null,st({sortable:n,rootEl:i,name:"deselect",targetEl:Oe,originalEvt:e});else{if(Fe.push(Oe),st({sortable:n,rootEl:i,name:"select",targetEl:Oe,originalEvt:e}),e.shiftKey&&De&&n.el.contains(De)){var h,d,p=A(De),f=A(Oe);if(~p&&~f&&p!==f)for(f>p?(d=p,h=f):(d=f,h=p+1);d<h;d++)~Fe.indexOf(u[d])||(T(u[d],c.selectedClass,!0),Fe.push(u[d]),st({sortable:n,rootEl:i,name:"select",targetEl:u[d],originalEvt:e}))}else De=Oe;Te=l}if($e&&this.isMultiDrag){if((s[q].options.sort||s!==i)&&Fe.length>1){var m=j(Oe),g=A(Oe,":not(."+this.options.selectedClass+")");if(!Be&&c.animation&&(Oe.thisAnimationDuration=null),l.captureAnimationState(),!Be&&(c.animation&&(Oe.fromRect=m,Fe.forEach((function(t){if(t.thisAnimationDuration=null,t!==Oe){var e=Le?j(t):m;t.fromRect=e,l.addAnimationState({target:t,rect:e})}}))),Ve(),Fe.forEach((function(t){u[g]?s.insertBefore(t,u[g]):s.appendChild(t),g++})),a===A(Oe))){var v=!1;Fe.forEach((function(t){t.sortableIndex===A(t)||(v=!0)})),v&&r("update")}Fe.forEach((function(t){W(t)})),l.animateAll()}Te=l}(i===s||o&&"clone"!==o.lastPutMode)&&je.forEach((function(t){t.parentNode&&t.parentNode.removeChild(t)}))}},nullingGlobal:function(){this.isMultiDrag=$e=!1,je.length=0},destroyGlobal:function(){this._deselectMultiDrag(),_(document,"pointerup",this._deselectMultiDrag),_(document,"mouseup",this._deselectMultiDrag),_(document,"touchend",this._deselectMultiDrag),_(document,"keydown",this._checkKeyDown),_(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(t){if(("undefined"===typeof $e||!$e)&&Te===this.sortable&&(!t||!k(t.target,this.options.draggable,this.sortable.el,!1))&&(!t||0===t.button))while(Fe.length){var e=Fe[0];T(e,this.options.selectedClass,!1),Fe.shift(),st({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:e,originalEvt:t})}},_checkKeyDown:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},r(t,{pluginName:"multiDrag",utils:{select:function(t){var e=t.parentNode[q];e&&e.options.multiDrag&&!~Fe.indexOf(t)&&(Te&&Te!==e&&(Te.multiDrag._deselectMultiDrag(),Te=e),T(t,e.options.selectedClass,!0),Fe.push(t))},deselect:function(t){var e=t.parentNode[q],i=Fe.indexOf(t);e&&e.options.multiDrag&&~i&&(T(t,e.options.selectedClass,!1),Fe.splice(i,1))}},eventProperties:function(){var t=this,e=[],i=[];return Fe.forEach((function(s){var n;e.push({multiDragElement:s,index:s.sortableIndex}),n=Le&&s!==Oe?-1:Le?A(s,":not(."+t.options.selectedClass+")"):A(s),i.push({multiDragElement:s,index:n})})),{items:c(Fe),clones:[].concat(je),oldIndicies:e,newIndicies:i}},optionListeners:{multiDragKey:function(t){return t=t.toLowerCase(),"ctrl"===t?t="Control":t.length>1&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}}})}function Ne(t,e){Fe.forEach((function(i,s){var n=e.children[i.sortableIndex+(t?Number(s):0)];n?e.insertBefore(i,n):e.appendChild(i)}))}function Re(t,e){je.forEach((function(i,s){var n=e.children[i.sortableIndex+(t?Number(s):0)];n?e.insertBefore(i,n):e.appendChild(i)}))}function Ve(){Fe.forEach((function(t){t!==Oe&&t.parentNode&&t.parentNode.removeChild(t)}))}Zt.mount(new be),Zt.mount(Ee,Ce),e["default"]=Zt},aab4:function(t,e,i){"use strict";i("97e8")},ac8e:function(t,e,i){},b03f:function(t,e,i){},b16a:function(t,e,i){"use strict";i("25f7")},b5d7:function(t,e,i){"use strict";i("50e5")},b76a:function(t,e,i){(function(e,s){t.exports=s(i("aa47"))})("undefined"!==typeof self&&self,(function(t){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s="fb15")}({"01f9":function(t,e,i){"use strict";var s=i("2d00"),n=i("5ca1"),r=i("2aba"),a=i("32e9"),o=i("84f2"),l=i("41a0"),c=i("7f20"),u=i("38fd"),h=i("2b4c")("iterator"),d=!([].keys&&"next"in[].keys()),p="@@iterator",f="keys",m="values",g=function(){return this};t.exports=function(t,e,i,v,b,y,w){l(i,e,v);var x,S,_,C=function(t){if(!d&&t in D)return D[t];switch(t){case f:return function(){return new i(this,t)};case m:return function(){return new i(this,t)}}return function(){return new i(this,t)}},E=e+" Iterator",k=b==m,P=!1,D=t.prototype,T=D[h]||D[p]||b&&D[b],O=T||C(b),M=b?k?C("entries"):O:void 0,I="Array"==e&&D.entries||T;if(I&&(_=u(I.call(new t)),_!==Object.prototype&&_.next&&(c(_,E,!0),s||"function"==typeof _[h]||a(_,h,g))),k&&T&&T.name!==m&&(P=!0,O=function(){return T.call(this)}),s&&!w||!d&&!P&&D[h]||a(D,h,O),o[e]=O,o[E]=g,b)if(x={values:k?O:C(m),keys:y?O:C(f),entries:M},w)for(S in x)S in D||r(D,S,x[S]);else n(n.P+n.F*(d||P),e,x);return x}},"02f4":function(t,e,i){var s=i("4588"),n=i("be13");t.exports=function(t){return function(e,i){var r,a,o=String(n(e)),l=s(i),c=o.length;return l<0||l>=c?t?"":void 0:(r=o.charCodeAt(l),r<55296||r>56319||l+1===c||(a=o.charCodeAt(l+1))<56320||a>57343?t?o.charAt(l):r:t?o.slice(l,l+2):a-56320+(r-55296<<10)+65536)}}},"0390":function(t,e,i){"use strict";var s=i("02f4")(!0);t.exports=function(t,e,i){return e+(i?s(t,e).length:1)}},"0bfb":function(t,e,i){"use strict";var s=i("cb7c");t.exports=function(){var t=s(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"0d58":function(t,e,i){var s=i("ce10"),n=i("e11e");t.exports=Object.keys||function(t){return s(t,n)}},1495:function(t,e,i){var s=i("86cc"),n=i("cb7c"),r=i("0d58");t.exports=i("9e1e")?Object.defineProperties:function(t,e){n(t);var i,a=r(e),o=a.length,l=0;while(o>l)s.f(t,i=a[l++],e[i]);return t}},"214f":function(t,e,i){"use strict";i("b0c5");var s=i("2aba"),n=i("32e9"),r=i("79e5"),a=i("be13"),o=i("2b4c"),l=i("520a"),c=o("species"),u=!r((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),h=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var i="ab".split(t);return 2===i.length&&"a"===i[0]&&"b"===i[1]}();t.exports=function(t,e,i){var d=o(t),p=!r((function(){var e={};return e[d]=function(){return 7},7!=""[t](e)})),f=p?!r((function(){var e=!1,i=/a/;return i.exec=function(){return e=!0,null},"split"===t&&(i.constructor={},i.constructor[c]=function(){return i}),i[d](""),!e})):void 0;if(!p||!f||"replace"===t&&!u||"split"===t&&!h){var m=/./[d],g=i(a,d,""[t],(function(t,e,i,s,n){return e.exec===l?p&&!n?{done:!0,value:m.call(e,i,s)}:{done:!0,value:t.call(i,e,s)}:{done:!1}})),v=g[0],b=g[1];s(String.prototype,t,v),n(RegExp.prototype,d,2==e?function(t,e){return b.call(t,this,e)}:function(t){return b.call(t,this)})}}},"230e":function(t,e,i){var s=i("d3f4"),n=i("7726").document,r=s(n)&&s(n.createElement);t.exports=function(t){return r?n.createElement(t):{}}},"23c6":function(t,e,i){var s=i("2d95"),n=i("2b4c")("toStringTag"),r="Arguments"==s(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(i){}};t.exports=function(t){var e,i,o;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=a(e=Object(t),n))?i:r?s(e):"Object"==(o=s(e))&&"function"==typeof e.callee?"Arguments":o}},2621:function(t,e){e.f=Object.getOwnPropertySymbols},"2aba":function(t,e,i){var s=i("7726"),n=i("32e9"),r=i("69a8"),a=i("ca5a")("src"),o=i("fa5b"),l="toString",c=(""+o).split(l);i("8378").inspectSource=function(t){return o.call(t)},(t.exports=function(t,e,i,o){var l="function"==typeof i;l&&(r(i,"name")||n(i,"name",e)),t[e]!==i&&(l&&(r(i,a)||n(i,a,t[e]?""+t[e]:c.join(String(e)))),t===s?t[e]=i:o?t[e]?t[e]=i:n(t,e,i):(delete t[e],n(t,e,i)))})(Function.prototype,l,(function(){return"function"==typeof this&&this[a]||o.call(this)}))},"2aeb":function(t,e,i){var s=i("cb7c"),n=i("1495"),r=i("e11e"),a=i("613b")("IE_PROTO"),o=function(){},l="prototype",c=function(){var t,e=i("230e")("iframe"),s=r.length,n="<",a=">";e.style.display="none",i("fab2").appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(n+"script"+a+"document.F=Object"+n+"/script"+a),t.close(),c=t.F;while(s--)delete c[l][r[s]];return c()};t.exports=Object.create||function(t,e){var i;return null!==t?(o[l]=s(t),i=new o,o[l]=null,i[a]=t):i=c(),void 0===e?i:n(i,e)}},"2b4c":function(t,e,i){var s=i("5537")("wks"),n=i("ca5a"),r=i("7726").Symbol,a="function"==typeof r,o=t.exports=function(t){return s[t]||(s[t]=a&&r[t]||(a?r:n)("Symbol."+t))};o.store=s},"2d00":function(t,e){t.exports=!1},"2d95":function(t,e){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},"2fdb":function(t,e,i){"use strict";var s=i("5ca1"),n=i("d2c8"),r="includes";s(s.P+s.F*i("5147")(r),"String",{includes:function(t){return!!~n(this,t,r).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},"32e9":function(t,e,i){var s=i("86cc"),n=i("4630");t.exports=i("9e1e")?function(t,e,i){return s.f(t,e,n(1,i))}:function(t,e,i){return t[e]=i,t}},"38fd":function(t,e,i){var s=i("69a8"),n=i("4bf8"),r=i("613b")("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=n(t),s(t,r)?t[r]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},"41a0":function(t,e,i){"use strict";var s=i("2aeb"),n=i("4630"),r=i("7f20"),a={};i("32e9")(a,i("2b4c")("iterator"),(function(){return this})),t.exports=function(t,e,i){t.prototype=s(a,{next:n(1,i)}),r(t,e+" Iterator")}},"456d":function(t,e,i){var s=i("4bf8"),n=i("0d58");i("5eda")("keys",(function(){return function(t){return n(s(t))}}))},4588:function(t,e){var i=Math.ceil,s=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?s:i)(t)}},4630:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},"4bf8":function(t,e,i){var s=i("be13");t.exports=function(t){return Object(s(t))}},5147:function(t,e,i){var s=i("2b4c")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[s]=!1,!"/./"[t](e)}catch(n){}}return!0}},"520a":function(t,e,i){"use strict";var s=i("0bfb"),n=RegExp.prototype.exec,r=String.prototype.replace,a=n,o="lastIndex",l=function(){var t=/a/,e=/b*/g;return n.call(t,"a"),n.call(e,"a"),0!==t[o]||0!==e[o]}(),c=void 0!==/()??/.exec("")[1],u=l||c;u&&(a=function(t){var e,i,a,u,h=this;return c&&(i=new RegExp("^"+h.source+"$(?!\\s)",s.call(h))),l&&(e=h[o]),a=n.call(h,t),l&&a&&(h[o]=h.global?a.index+a[0].length:e),c&&a&&a.length>1&&r.call(a[0],i,(function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(a[u]=void 0)})),a}),t.exports=a},"52a7":function(t,e){e.f={}.propertyIsEnumerable},5537:function(t,e,i){var s=i("8378"),n=i("7726"),r="__core-js_shared__",a=n[r]||(n[r]={});(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:s.version,mode:i("2d00")?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},"5ca1":function(t,e,i){var s=i("7726"),n=i("8378"),r=i("32e9"),a=i("2aba"),o=i("9b43"),l="prototype",c=function(t,e,i){var u,h,d,p,f=t&c.F,m=t&c.G,g=t&c.S,v=t&c.P,b=t&c.B,y=m?s:g?s[e]||(s[e]={}):(s[e]||{})[l],w=m?n:n[e]||(n[e]={}),x=w[l]||(w[l]={});for(u in m&&(i=e),i)h=!f&&y&&void 0!==y[u],d=(h?y:i)[u],p=b&&h?o(d,s):v&&"function"==typeof d?o(Function.call,d):d,y&&a(y,u,d,t&c.U),w[u]!=d&&r(w,u,p),v&&x[u]!=d&&(x[u]=d)};s.core=n,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},"5eda":function(t,e,i){var s=i("5ca1"),n=i("8378"),r=i("79e5");t.exports=function(t,e){var i=(n.Object||{})[t]||Object[t],a={};a[t]=e(i),s(s.S+s.F*r((function(){i(1)})),"Object",a)}},"5f1b":function(t,e,i){"use strict";var s=i("23c6"),n=RegExp.prototype.exec;t.exports=function(t,e){var i=t.exec;if("function"===typeof i){var r=i.call(t,e);if("object"!==typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==s(t))throw new TypeError("RegExp#exec called on incompatible receiver");return n.call(t,e)}},"613b":function(t,e,i){var s=i("5537")("keys"),n=i("ca5a");t.exports=function(t){return s[t]||(s[t]=n(t))}},"626a":function(t,e,i){var s=i("2d95");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==s(t)?t.split(""):Object(t)}},6762:function(t,e,i){"use strict";var s=i("5ca1"),n=i("c366")(!0);s(s.P,"Array",{includes:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),i("9c6c")("includes")},6821:function(t,e,i){var s=i("626a"),n=i("be13");t.exports=function(t){return s(n(t))}},"69a8":function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},"6a99":function(t,e,i){var s=i("d3f4");t.exports=function(t,e){if(!s(t))return t;var i,n;if(e&&"function"==typeof(i=t.toString)&&!s(n=i.call(t)))return n;if("function"==typeof(i=t.valueOf)&&!s(n=i.call(t)))return n;if(!e&&"function"==typeof(i=t.toString)&&!s(n=i.call(t)))return n;throw TypeError("Can't convert object to primitive value")}},7333:function(t,e,i){"use strict";var s=i("0d58"),n=i("2621"),r=i("52a7"),a=i("4bf8"),o=i("626a"),l=Object.assign;t.exports=!l||i("79e5")((function(){var t={},e={},i=Symbol(),s="abcdefghijklmnopqrst";return t[i]=7,s.split("").forEach((function(t){e[t]=t})),7!=l({},t)[i]||Object.keys(l({},e)).join("")!=s}))?function(t,e){var i=a(t),l=arguments.length,c=1,u=n.f,h=r.f;while(l>c){var d,p=o(arguments[c++]),f=u?s(p).concat(u(p)):s(p),m=f.length,g=0;while(m>g)h.call(p,d=f[g++])&&(i[d]=p[d])}return i}:l},7726:function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},"77f1":function(t,e,i){var s=i("4588"),n=Math.max,r=Math.min;t.exports=function(t,e){return t=s(t),t<0?n(t+e,0):r(t,e)}},"79e5":function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},"7f20":function(t,e,i){var s=i("86cc").f,n=i("69a8"),r=i("2b4c")("toStringTag");t.exports=function(t,e,i){t&&!n(t=i?t:t.prototype,r)&&s(t,r,{configurable:!0,value:e})}},8378:function(t,e){var i=t.exports={version:"2.6.5"};"number"==typeof __e&&(__e=i)},"84f2":function(t,e){t.exports={}},"86cc":function(t,e,i){var s=i("cb7c"),n=i("c69a"),r=i("6a99"),a=Object.defineProperty;e.f=i("9e1e")?Object.defineProperty:function(t,e,i){if(s(t),e=r(e,!0),s(i),n)try{return a(t,e,i)}catch(o){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},"9b43":function(t,e,i){var s=i("d8e8");t.exports=function(t,e,i){if(s(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,s){return t.call(e,i,s)};case 3:return function(i,s,n){return t.call(e,i,s,n)}}return function(){return t.apply(e,arguments)}}},"9c6c":function(t,e,i){var s=i("2b4c")("unscopables"),n=Array.prototype;void 0==n[s]&&i("32e9")(n,s,{}),t.exports=function(t){n[s][t]=!0}},"9def":function(t,e,i){var s=i("4588"),n=Math.min;t.exports=function(t){return t>0?n(s(t),9007199254740991):0}},"9e1e":function(t,e,i){t.exports=!i("79e5")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},a352:function(e,i){e.exports=t},a481:function(t,e,i){"use strict";var s=i("cb7c"),n=i("4bf8"),r=i("9def"),a=i("4588"),o=i("0390"),l=i("5f1b"),c=Math.max,u=Math.min,h=Math.floor,d=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g,f=function(t){return void 0===t?t:String(t)};i("214f")("replace",2,(function(t,e,i,m){return[function(s,n){var r=t(this),a=void 0==s?void 0:s[e];return void 0!==a?a.call(s,r,n):i.call(String(r),s,n)},function(t,e){var n=m(i,t,this,e);if(n.done)return n.value;var h=s(t),d=String(this),p="function"===typeof e;p||(e=String(e));var v=h.global;if(v){var b=h.unicode;h.lastIndex=0}var y=[];while(1){var w=l(h,d);if(null===w)break;if(y.push(w),!v)break;var x=String(w[0]);""===x&&(h.lastIndex=o(d,r(h.lastIndex),b))}for(var S="",_=0,C=0;C<y.length;C++){w=y[C];for(var E=String(w[0]),k=c(u(a(w.index),d.length),0),P=[],D=1;D<w.length;D++)P.push(f(w[D]));var T=w.groups;if(p){var O=[E].concat(P,k,d);void 0!==T&&O.push(T);var M=String(e.apply(void 0,O))}else M=g(E,d,k,P,T,e);k>=_&&(S+=d.slice(_,k)+M,_=k+E.length)}return S+d.slice(_)}];function g(t,e,s,r,a,o){var l=s+t.length,c=r.length,u=p;return void 0!==a&&(a=n(a),u=d),i.call(o,u,(function(i,n){var o;switch(n.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,s);case"'":return e.slice(l);case"<":o=a[n.slice(1,-1)];break;default:var u=+n;if(0===u)return i;if(u>c){var d=h(u/10);return 0===d?i:d<=c?void 0===r[d-1]?n.charAt(1):r[d-1]+n.charAt(1):i}o=r[u-1]}return void 0===o?"":o}))}}))},aae3:function(t,e,i){var s=i("d3f4"),n=i("2d95"),r=i("2b4c")("match");t.exports=function(t){var e;return s(t)&&(void 0!==(e=t[r])?!!e:"RegExp"==n(t))}},ac6a:function(t,e,i){for(var s=i("cadf"),n=i("0d58"),r=i("2aba"),a=i("7726"),o=i("32e9"),l=i("84f2"),c=i("2b4c"),u=c("iterator"),h=c("toStringTag"),d=l.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=n(p),m=0;m<f.length;m++){var g,v=f[m],b=p[v],y=a[v],w=y&&y.prototype;if(w&&(w[u]||o(w,u,d),w[h]||o(w,h,v),l[v]=d,b))for(g in s)w[g]||r(w,g,s[g],!0)}},b0c5:function(t,e,i){"use strict";var s=i("520a");i("5ca1")({target:"RegExp",proto:!0,forced:s!==/./.exec},{exec:s})},be13:function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},c366:function(t,e,i){var s=i("6821"),n=i("9def"),r=i("77f1");t.exports=function(t){return function(e,i,a){var o,l=s(e),c=n(l.length),u=r(a,c);if(t&&i!=i){while(c>u)if(o=l[u++],o!=o)return!0}else for(;c>u;u++)if((t||u in l)&&l[u]===i)return t||u||0;return!t&&-1}}},c649:function(t,e,i){"use strict";(function(t){i.d(e,"c",(function(){return c})),i.d(e,"a",(function(){return o})),i.d(e,"b",(function(){return n})),i.d(e,"d",(function(){return l}));i("a481");function s(){return"undefined"!==typeof window?window.console:t.console}var n=s();function r(t){var e=Object.create(null);return function(i){var s=e[i];return s||(e[i]=t(i))}}var a=/-(\w)/g,o=r((function(t){return t.replace(a,(function(t,e){return e?e.toUpperCase():""}))}));function l(t){null!==t.parentElement&&t.parentElement.removeChild(t)}function c(t,e,i){var s=0===i?t.children[0]:t.children[i-1].nextSibling;t.insertBefore(e,s)}}).call(this,i("c8ba"))},c69a:function(t,e,i){t.exports=!i("9e1e")&&!i("79e5")((function(){return 7!=Object.defineProperty(i("230e")("div"),"a",{get:function(){return 7}}).a}))},c8ba:function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(s){"object"===typeof window&&(i=window)}t.exports=i},ca5a:function(t,e){var i=0,s=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+s).toString(36))}},cadf:function(t,e,i){"use strict";var s=i("9c6c"),n=i("d53b"),r=i("84f2"),a=i("6821");t.exports=i("01f9")(Array,"Array",(function(t,e){this._t=a(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,n(1)):n(0,"keys"==e?i:"values"==e?t[i]:[i,t[i]])}),"values"),r.Arguments=r.Array,s("keys"),s("values"),s("entries")},cb7c:function(t,e,i){var s=i("d3f4");t.exports=function(t){if(!s(t))throw TypeError(t+" is not an object!");return t}},ce10:function(t,e,i){var s=i("69a8"),n=i("6821"),r=i("c366")(!1),a=i("613b")("IE_PROTO");t.exports=function(t,e){var i,o=n(t),l=0,c=[];for(i in o)i!=a&&s(o,i)&&c.push(i);while(e.length>l)s(o,i=e[l++])&&(~r(c,i)||c.push(i));return c}},d2c8:function(t,e,i){var s=i("aae3"),n=i("be13");t.exports=function(t,e,i){if(s(e))throw TypeError("String#"+i+" doesn't accept regex!");return String(n(t))}},d3f4:function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},d53b:function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},d8e8:function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},e11e:function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},f559:function(t,e,i){"use strict";var s=i("5ca1"),n=i("9def"),r=i("d2c8"),a="startsWith",o=""[a];s(s.P+s.F*i("5147")(a),"String",{startsWith:function(t){var e=r(this,t,a),i=n(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),s=String(t);return o?o.call(e,s,i):e.slice(i,i+s.length)===s}})},f6fd:function(t,e){(function(t){var e="currentScript",i=t.getElementsByTagName("script");e in t||Object.defineProperty(t,e,{get:function(){try{throw new Error}catch(s){var t,e=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(s.stack)||[!1])[1];for(t in i)if(i[t].src==e||"interactive"==i[t].readyState)return i[t];return null}}})})(document)},f751:function(t,e,i){var s=i("5ca1");s(s.S+s.F,"Object",{assign:i("7333")})},fa5b:function(t,e,i){t.exports=i("5537")("native-function-to-string",Function.toString)},fab2:function(t,e,i){var s=i("7726").document;t.exports=s&&s.documentElement},fb15:function(t,e,i){"use strict";var s;(i.r(e),"undefined"!==typeof window)&&(i("f6fd"),(s=window.document.currentScript)&&(s=s.src.match(/(.+\/)[^/]+\.js(\?.*)?$/))&&(i.p=s[1]));i("f751"),i("f559"),i("ac6a"),i("cadf"),i("456d");function n(t){if(Array.isArray(t))return t}function r(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var i=[],s=!0,n=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(s=(a=o.next()).done);s=!0)if(i.push(a.value),e&&i.length===e)break}catch(l){n=!0,r=l}finally{try{s||null==o["return"]||o["return"]()}finally{if(n)throw r}}return i}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}function o(t,e){if(t){if("string"===typeof t)return a(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(t,e):void 0}}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t,e){return n(t)||r(t,e)||o(t,e)||l()}i("6762"),i("2fdb");function u(t){if(Array.isArray(t))return a(t)}function h(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(t){return u(t)||h(t)||o(t)||d()}var f=i("a352"),m=i.n(f),g=i("c649");function v(t,e,i){return void 0===i||(t=t||{},t[e]=i),t}function b(t,e){return t.map((function(t){return t.elm})).indexOf(e)}function y(t,e,i,s){if(!t)return[];var n=t.map((function(t){return t.elm})),r=e.length-s,a=p(e).map((function(t,e){return e>=r?n.length:n.indexOf(t)}));return i?a.filter((function(t){return-1!==t})):a}function w(t,e){var i=this;this.$nextTick((function(){return i.$emit(t.toLowerCase(),e)}))}function x(t){var e=this;return function(i){null!==e.realList&&e["onDrag"+t](i),w.call(e,t,i)}}function S(t){return["transition-group","TransitionGroup"].includes(t)}function _(t){if(!t||1!==t.length)return!1;var e=c(t,1),i=e[0].componentOptions;return!!i&&S(i.tag)}function C(t,e,i){return t[i]||(e[i]?e[i]():void 0)}function E(t,e,i){var s=0,n=0,r=C(e,i,"header");r&&(s=r.length,t=t?[].concat(p(r),p(t)):p(r));var a=C(e,i,"footer");return a&&(n=a.length,t=t?[].concat(p(t),p(a)):p(a)),{children:t,headerOffset:s,footerOffset:n}}function k(t,e){var i=null,s=function(t,e){i=v(i,t,e)},n=Object.keys(t).filter((function(t){return"id"===t||t.startsWith("data-")})).reduce((function(e,i){return e[i]=t[i],e}),{});if(s("attrs",n),!e)return i;var r=e.on,a=e.props,o=e.attrs;return s("on",r),s("props",a),Object.assign(i.attrs,o),i}var P=["Start","Add","Remove","Update","End"],D=["Choose","Unchoose","Sort","Filter","Clone"],T=["Move"].concat(P,D).map((function(t){return"on"+t})),O=null,M={options:Object,list:{type:Array,required:!1,default:null},value:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:function(t){return t}},element:{type:String,default:"div"},tag:{type:String,default:null},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},I={name:"draggable",inheritAttrs:!1,props:M,data:function(){return{transitionMode:!1,noneFunctionalComponentMode:!1}},render:function(t){var e=this.$slots.default;this.transitionMode=_(e);var i=E(e,this.$slots,this.$scopedSlots),s=i.children,n=i.headerOffset,r=i.footerOffset;this.headerOffset=n,this.footerOffset=r;var a=k(this.$attrs,this.componentData);return t(this.getTag(),a,s)},created:function(){null!==this.list&&null!==this.value&&g["b"].error("Value and list props are mutually exclusive! Please set one or another."),"div"!==this.element&&g["b"].warn("Element props is deprecated please use tag props instead. See https://github.com/SortableJS/Vue.Draggable/blob/master/documentation/migrate.md#element-props"),void 0!==this.options&&g["b"].warn("Options props is deprecated, add sortable options directly as vue.draggable item, or use v-bind. See https://github.com/SortableJS/Vue.Draggable/blob/master/documentation/migrate.md#options-props")},mounted:function(){var t=this;if(this.noneFunctionalComponentMode=this.getTag().toLowerCase()!==this.$el.nodeName.toLowerCase()&&!this.getIsFunctional(),this.noneFunctionalComponentMode&&this.transitionMode)throw new Error("Transition-group inside component is not supported. Please alter tag value or remove transition-group. Current tag value: ".concat(this.getTag()));var e={};P.forEach((function(i){e["on"+i]=x.call(t,i)})),D.forEach((function(i){e["on"+i]=w.bind(t,i)}));var i=Object.keys(this.$attrs).reduce((function(e,i){return e[Object(g["a"])(i)]=t.$attrs[i],e}),{}),s=Object.assign({},this.options,i,e,{onMove:function(e,i){return t.onDragMove(e,i)}});!("draggable"in s)&&(s.draggable=">*"),this._sortable=new m.a(this.rootContainer,s),this.computeIndexes()},beforeDestroy:function(){void 0!==this._sortable&&this._sortable.destroy()},computed:{rootContainer:function(){return this.transitionMode?this.$el.children[0]:this.$el},realList:function(){return this.list?this.list:this.value}},watch:{options:{handler:function(t){this.updateOptions(t)},deep:!0},$attrs:{handler:function(t){this.updateOptions(t)},deep:!0},realList:function(){this.computeIndexes()}},methods:{getIsFunctional:function(){var t=this._vnode.fnOptions;return t&&t.functional},getTag:function(){return this.tag||this.element},updateOptions:function(t){for(var e in t){var i=Object(g["a"])(e);-1===T.indexOf(i)&&this._sortable.option(i,t[e])}},getChildrenNodes:function(){if(this.noneFunctionalComponentMode)return this.$children[0].$slots.default;var t=this.$slots.default;return this.transitionMode?t[0].child.$slots.default:t},computeIndexes:function(){var t=this;this.$nextTick((function(){t.visibleIndexes=y(t.getChildrenNodes(),t.rootContainer.children,t.transitionMode,t.footerOffset)}))},getUnderlyingVm:function(t){var e=b(this.getChildrenNodes()||[],t);if(-1===e)return null;var i=this.realList[e];return{index:e,element:i}},getUnderlyingPotencialDraggableComponent:function(t){var e=t.__vue__;return e&&e.$options&&S(e.$options._componentTag)?e.$parent:!("realList"in e)&&1===e.$children.length&&"realList"in e.$children[0]?e.$children[0]:e},emitChanges:function(t){var e=this;this.$nextTick((function(){e.$emit("change",t)}))},alterList:function(t){if(this.list)t(this.list);else{var e=p(this.value);t(e),this.$emit("input",e)}},spliceList:function(){var t=arguments,e=function(e){return e.splice.apply(e,p(t))};this.alterList(e)},updatePosition:function(t,e){var i=function(i){return i.splice(e,0,i.splice(t,1)[0])};this.alterList(i)},getRelatedContextFromMoveEvent:function(t){var e=t.to,i=t.related,s=this.getUnderlyingPotencialDraggableComponent(e);if(!s)return{component:s};var n=s.realList,r={list:n,component:s};if(e!==i&&n&&s.getUnderlyingVm){var a=s.getUnderlyingVm(i);if(a)return Object.assign(a,r)}return r},getVmIndex:function(t){var e=this.visibleIndexes,i=e.length;return t>i-1?i:e[t]},getComponent:function(){return this.$slots.default[0].componentInstance},resetTransitionData:function(t){if(this.noTransitionOnDrag&&this.transitionMode){var e=this.getChildrenNodes();e[t].data=null;var i=this.getComponent();i.children=[],i.kept=void 0}},onDragStart:function(t){this.context=this.getUnderlyingVm(t.item),t.item._underlying_vm_=this.clone(this.context.element),O=t.item},onDragAdd:function(t){var e=t.item._underlying_vm_;if(void 0!==e){Object(g["d"])(t.item);var i=this.getVmIndex(t.newIndex);this.spliceList(i,0,e),this.computeIndexes();var s={element:e,newIndex:i};this.emitChanges({added:s})}},onDragRemove:function(t){if(Object(g["c"])(this.rootContainer,t.item,t.oldIndex),"clone"!==t.pullMode){var e=this.context.index;this.spliceList(e,1);var i={element:this.context.element,oldIndex:e};this.resetTransitionData(e),this.emitChanges({removed:i})}else Object(g["d"])(t.clone)},onDragUpdate:function(t){Object(g["d"])(t.item),Object(g["c"])(t.from,t.item,t.oldIndex);var e=this.context.index,i=this.getVmIndex(t.newIndex);this.updatePosition(e,i);var s={element:this.context.element,oldIndex:e,newIndex:i};this.emitChanges({moved:s})},updateProperty:function(t,e){t.hasOwnProperty(e)&&(t[e]+=this.headerOffset)},computeFutureIndex:function(t,e){if(!t.element)return 0;var i=p(e.to.children).filter((function(t){return"none"!==t.style["display"]})),s=i.indexOf(e.related),n=t.component.getVmIndex(s),r=-1!==i.indexOf(O);return r||!e.willInsertAfter?n:n+1},onDragMove:function(t,e){var i=this.move;if(!i||!this.realList)return!0;var s=this.getRelatedContextFromMoveEvent(t),n=this.context,r=this.computeFutureIndex(s,t);Object.assign(n,{futureIndex:r});var a=Object.assign({},t,{relatedContext:s,draggedContext:n});return i(a,e)},onDragEnd:function(){this.computeIndexes(),O=null}}};"undefined"!==typeof window&&"Vue"in window&&window.Vue.component("draggable",I);var F=I;e["default"]=F}})["default"]}))},bb43:function(t,e,i){},bdf7:function(t,e,i){},c240:function(t,e,i){},c2dc:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Modal",{ref:"__modal",attrs:{minWidth:"60%",maxWidth:"90%",minHeight:"75%"},scopedSlots:t._u([{key:"main",fn:function(){return[0===t.editableFields.length?i("p",[t._v("No editable parameters available.")]):i("form",{attrs:{id:"parameterModal"},on:{submit:function(e){return e.preventDefault(),t.save(e)}}},[t._l(t.editableFields,(function(e,s){return i("div",{key:s,staticClass:"fieldRow"},[i("label",{class:{fieldLabel:!0,highlight:e.name===t.selectParameter}},[t._v(" "+t._s(t.displayLabel(e))),e.optional?t._e():i("strong",{staticClass:"required",attrs:{title:"required"}},[t._v("*")]),e.description?i("div",{staticClass:"description"},[i("Description",{attrs:{description:e.description}})],1):t._e()]),i("ParameterDataTypes",{ref:e.name,refInFor:!0,attrs:{editable:t.editable,parameter:e,processId:t.processId,context:t.context},on:{schemaSelected:function(i){return t.updateType(e,i)}},model:{value:t.values[e.name],callback:function(i){t.$set(t.values,e.name,i)},expression:"values[param.name]"}}),e.unspecified?i("button",{staticClass:"deleteBtn",attrs:{title:"Delete unspecified parameter",type:"button"},on:{click:function(e){return t.deleteParam(s)}}},[i("i",{staticClass:"fas fa-trash"})]):t._e()],1)})),i("button",{staticStyle:{display:"none"},attrs:{type:"submit"}})],2)]},proxy:!0},"function"===typeof t.saveCallback?{key:"footer",fn:function(){return[i("div",{staticClass:"footer"},[i("button",{staticClass:"save",on:{click:t.save}},[t._v("Save")])])]},proxy:!0}:null],null,!0)})},n=[],r=i("025e"),a=i("2930"),o=i("8088"),l=i("3916"),c={name:"ParameterModal",components:{Modal:a["a"],Description:o["default"],ParameterDataTypes:l["default"]},data(){return{editableFields:[],values:{},schemas:{},editable:!0,selectParameter:null,saveCallback:null,processId:null}},computed:{context(){return{values:this.values,schemas:this.schemas,parameters:this.editableFields}}},methods:{deleteParam(t){let e=this.editableFields[t].name;this.$delete(this.editableFields,t),this.$delete(this.schemas,e),this.$delete(this.values,e)},updateType(t,e){this.$set(this.schemas,t.name,e)},displayLabel(t){return"string"===typeof t.label&&t.label.length>0?t.label:r["a"].prettifyString(t.name)},save(){try{"function"===typeof this.saveCallback&&this.saveCallback(this.values),this.$refs.__modal.close()}catch(t){r["a"].exception(this,t)}},show(t,e,i,s=!0,n=null,a=null,o=null,l=null){this.editableFields=e,this.values=r["a"].deepClone(i),this.schemas={},this.editable=s,this.saveCallback=n,this.processId=o,this.selectParameter=l,this.$refs.__modal.show(t,a),setTimeout(()=>{let t;this.selectParameter?t=this.componentforParameter(this.selectParameter):this.editableFields.length>0&&(t=this.componentforParameter(this.editableFields[0].name)),t&&(this.selectParameter&&t.$el.scrollIntoView(),this.focusInput(t))},100)},componentforParameter(t){return t&&Array.isArray(this.$refs[t])&&this.$refs[t][0]?this.$refs[t][0]:null},focusInput(t){let e=t.$el.querySelector('input:not([type="hidden"]):not([disabled]):not([class~="multiselect__input"]), button:not([disabled]), textarea:not([disabled]), select:not([disabled]), datalist:not([disabled])');e&&e.focus()}}},u=c,h=(i("c3ab"),i("6e6b"),i("2877")),d=Object(h["a"])(u,s,n,!1,null,"0ac3dcec",null);e["default"]=d.exports},c3ab:function(t,e,i){"use strict";i("69b4")},c98e:function(t,e,i){},cbd9:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"discovery-toolbar"},[i("SearchBox",{model:{value:t.searchTerm,callback:function(e){t.searchTerm=e},expression:"searchTerm"}}),i("div",{staticClass:"search-results"},[i("Collections",{staticClass:"category",attrs:{collections:t.collections,searchTerm:t.searchTerm,offerDetails:!1,collapsed:!0},scopedSlots:t._u([{key:"summary",fn:function(e){var s=e.item;return[i("div",{staticClass:"discovery-entity",attrs:{draggable:t.supportsLoadCollection},on:{dragstart:function(e){return t.onDrag(e,"collection",s)}}},[i("div",{staticClass:"discovery-info",on:{click:function(e){return t.showCollectionInfo(s.id)}}},[i("strong",{attrs:{title:s.id}},[t._v(t._s(s.id))]),s.title?i("small",{attrs:{title:s.title}},[t._v(t._s(s.title))]):t._e()]),t.supportsLoadCollection?i("button",{staticClass:"discovery-button",attrs:{type:"button",title:"Insert"},on:{click:function(e){return t.insertCollection(s)}}},[i("i",{staticClass:"fas fa-plus"})]):t._e()])]}}])}),i("Processes",{staticClass:"category",attrs:{processes:t.processes,searchTerm:t.searchTerm,offerDetails:!1,collapsed:!0},scopedSlots:t._u([{key:"summary",fn:function(e){var s=e.item;return[i("div",{staticClass:"discovery-entity",attrs:{draggable:"true"},on:{dragstart:function(e){return t.onDrag(e,"process",s)}}},[i("div",{staticClass:"discovery-info",on:{click:function(e){return t.showProcessInfo(s)}}},[s.native?t._e():i("i",{staticClass:"custom-process fas fa-xs fa-sitemap",attrs:{title:"Custom Process"}}),i("strong",{attrs:{title:s.id}},[t._v(t._s(s.id))]),s.summary?i("small",{attrs:{title:s.summary}},[t._v(t._s(s.summary))]):t._e()]),i("button",{staticClass:"discovery-button",attrs:{type:"button",title:"Insert"},on:{click:function(e){return t.insertProcess(t.e)}}},[i("i",{staticClass:"fas fa-plus"})])])]}}])}),i("UdfRuntimes",{staticClass:"category",attrs:{runtimes:t.udfRuntimes,searchTerm:t.searchTerm,offerDetails:!1,collapsed:!0},scopedSlots:t._u([{key:"summary",fn:function(e){var s=e.item;return[i("div",{staticClass:"discovery-entity",attrs:{draggable:t.supportsRunUdf},on:{dragstart:function(e){return t.onDrag(e,"udf",s)}}},[i("div",{staticClass:"discovery-info",on:{click:function(e){return t.showUdfInfo(s)}}},[i("strong",{attrs:{title:s.id}},[t._v(t._s(s.id)+" "+t._s(s.version))])]),t.supportsRunUdf?i("button",{staticClass:"discovery-button",attrs:{type:"button",title:"Insert"},on:{click:function(e){return t.insertUdf(s)}}},[i("i",{staticClass:"fas fa-plus"})]):t._e()])]}}])})],1)],1)},n=[],r=(i("a1bc"),i("3115")),a=i("025e"),o=(i("2b70"),i("69d2")),l=i("9b5d"),c=i("2979"),u=i("d235"),h={name:"DiscoveryToolbar",mixins:[r["a"]],components:{Collections:o["a"],Processes:l["a"],SearchBox:c["default"],UdfRuntimes:u["a"]},props:{onAddProcess:{type:Function,required:!0}},data(){return{searchTerm:""}},computed:{...a["a"].mapState(["predefinedProcesses","collections","udfRuntimes"]),...a["a"].mapState("userProcesses",["userProcesses"]),...a["a"].mapGetters(["supports","collectionDefaults"]),...a["a"].mapGetters("userProcesses",{getProcessById:"getAllById"}),supportsLoadCollection(){return!!this.getProcessById("load_collection")},supportsRunUdf(){return!!this.getProcessById("run_udf")},processes(){return this.predefinedProcesses.concat(this.userProcesses)}},methods:{onDrag(t,e,i){let s=this.getNode(e,i);t.dataTransfer.setData("application/openeo-node",JSON.stringify(s)),t.dataTransfer.setData("text/plain",JSON.stringify(s,null,2))},showCollectionInfo(t){this.supports("listCollections")&&this.emit("showCollection",t)},showProcessInfo(t){this.emit("showProcessInfo",t)},showUdfInfo(t){this.emit("showUdfRuntimeInfo",t.id,this.udfRuntimes[t.id],t.version)},getNode(t,e){switch(t){case"collection":return{process_id:"load_collection",arguments:this.collectionDefaults(e.id)};case"process":return{process_id:e.id,arguments:{}};case"udf":return{process_id:"run_udf",arguments:{runtime:e.id,version:e.version}}}},insertCollection(t){let e=this.getNode("collection",t);this.onAddProcess(e)},insertProcess(t){let e=this.getNode("process",t);this.onAddProcess(e)},insertUdf(t){let e=this.getNode("udf",t);this.onAddProcess(e)}}},d=h,p=(i("7b86"),i("f42e"),i("2877")),f=Object(p["a"])(d,s,n,!1,null,"0d8b64d9",null);e["a"]=f.exports},ccbe:function(t,e,i){"use strict";i("4525")},ceb0:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Tabs",{ref:"tabs",staticClass:"editor",attrs:{id:"customProcessContent",position:"bottom"}},[i("Tab",{attrs:{id:"visual",name:"Visual Model",icon:"fa-project-diagram",selected:!0,allowShow:t.canSwitchView},on:{show:t.showModel}},[i("VisualEditor",{ref:"graphBuilder",staticClass:"visualEditorTab",attrs:{editable:t.editable,pgParameters:t.pgParameters,value:t.modelValue,title:t.title,id:t.id+"_visual",showDiscoveryToolbar:t.showDiscoveryToolbar,defaultValue:t.defaultValue},on:{input:t.commit,error:t.onError},scopedSlots:t._u([{key:"file-toolbar",fn:function(){return[t._t("file-toolbar")]},proxy:!0},{key:"toolbar",fn:function(){return[t._t("toolbar")]},proxy:!0}],null,!0)})],1),i("Tab",{attrs:{id:"source",name:"Code",icon:"fa-code",allowShow:t.canSwitchView},on:{show:t.showCode}},[i("TextEditor",{ref:"sourceEditor",staticClass:"textEditorTab",attrs:{editable:t.editable,value:t.codeValue,title:t.title,id:t.id+"_text",language:"processgraph"},on:{input:t.commit,error:t.onError},scopedSlots:t._u([{key:"file-toolbar",fn:function(){return[t._t("file-toolbar")]},proxy:!0},{key:"toolbar",fn:function(){return[t._t("toolbar")]},proxy:!0}],null,!0)})],1)],1)},n=[],r=i("025e"),a=i("e7ea"),o=i("bdb2"),l=function(){var t=this,e=this,i=e.$createElement,s=e._self._c||i;return s("div",{ref:"visualEditor",staticClass:"visualEditor"},[s("div",{staticClass:"sourceHeader"},[e.title?s("h3",[e._v(e._s(e.title))]):e._e(),s("div",{staticClass:"sourceToolbar"},[e.editable?s("span",{staticClass:"sepr"},[s("button",{attrs:{type:"button",title:"New script / Clear current script"},on:{click:e.confirmClear}},[s("i",{staticClass:"fas fa-file"})]),e._t("file-toolbar")],2):e._e(),e.editable?s("span",{staticClass:"sepr"},[s("button",{attrs:{type:"button",disabled:!e.canUndo,title:"Revert last change"},on:{click:function(t){return e.$refs.blocks.undo()}}},[s("i",{staticClass:"fas fa-undo-alt"})]),s("button",{attrs:{type:"button",disabled:!e.canRedo,title:"Redo last reverted change"},on:{click:function(t){return e.$refs.blocks.redo()}}},[s("i",{staticClass:"fas fa-redo-alt"})]),s("button",{attrs:{type:"button",disabled:!e.hasSelection,title:"Delete selected elements"},on:{click:function(t){return e.$refs.blocks.deleteSelected()}}},[s("i",{staticClass:"fas fa-trash"})])]):e._e(),e.editable?s("span",{staticClass:"sepr"},[s("button",{attrs:{type:"button",title:"Add Parameter"},on:{click:e.addParameter}},[s("i",{staticClass:"fas fa-parking"})]),e.supportsMath?s("button",{class:{highlightFormula:e.isMath},attrs:{type:"button",title:"Insert/Edit formula"},on:{click:e.showExpressionModal}},[s("i",{staticClass:"fas fa-square-root-alt"})]):e._e()]):e._e(),s("button",{class:{compactMode:e.compactMode},attrs:{type:"button",title:"Compact Mode"},on:{click:function(t){return e.$refs.blocks.toggleCompact()}}},[s("i",{staticClass:"fas fa-compress-arrows-alt"})]),s("button",{attrs:{type:"button",title:"Scale to perfect size"},on:{click:function(t){return e.$refs.blocks.perfectScale()}}},[s("i",{staticClass:"fas fa-arrows-alt"})]),s("FullscreenButton",{attrs:{element:function(){return t.$refs.visualEditor}},on:{changed:function(i){t.$refs.blocks.perfectScale(),e.isFullScreen=i}}}),e._t("toolbar")],2)]),s("div",{staticClass:"editorSplitter"},[(e.showDiscoveryToolbar||e.isFullScreen)&&e.editable?s("DiscoveryToolbar",{staticClass:"discoveryToolbar",attrs:{onAddProcess:e.insertProcess}}):e._e(),s("div",{staticClass:"graphBuilder",on:{drop:function(t){return e.onDrop(t)},dragover:function(t){return e.allowDrop(t)}}},[s("Blocks",{ref:"blocks",attrs:{editable:e.editable,id:e.id,processes:e.processRegistry,collections:e.collections,pgParameters:e.pgParameters,value:e.value},on:{input:e.commit,error:e.errorHandler,showProcess:function(t){return e.emit("showProcess",t)},showCollection:function(t){return e.emit("showCollection",t)},showSchema:e.showSchemaModal,editParameters:e.openParameterEditor,compactMode:function(e){return t.compactMode=e},selectionChanged:e.selectionChanged,historyChanged:e.historyChanged}})],1)],1),s("ParameterModal",{ref:"parameterModal"}),e.editable&&e.supportsMath?s("ExpressionModal",{ref:"expressionModal",on:{save:e.insertNodes}}):e._e()],1)},c=[],u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"div",staticClass:"blocks_js_editor",attrs:{id:t.id,tabindex:"0"},on:{mousemove:function(e){return t.onMouseMove(e)},mousedown:function(e){return t.onMouseDown(e)},mousewheel:function(e){return e.preventDefault(),t.onMouseWheel(e)},keydown:function(e){return t.onKeyDown(e)},focus:function(e){return t.highlight(!0)},blur:function(e){return t.highlight(!1)},DOMMouseScroll:function(e){return e.preventDefault(),t.onMouseWheel(e)}}},[i("svg",{staticClass:"canvas",attrs:{xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[t._l(t.edges,(function(e){return i("Edge",t._b({key:e.id,ref:"edges",refInFor:!0,attrs:{state:t.state,parameter1:e.parameter1,parameter2:e.parameter2},on:{position:function(t){e.position1=arguments[0],e.position2=arguments[1]}}},"Edge",e,!1))})),t.linkingLine?i("line",t._b({},"line",t.linkingLine,!1)):t._e(),t.selectRect?i("rect",t._b({},"rect",t.selectRect,!1)):t._e()],2),i("div",{staticClass:"blocks"},t._l(t.blocks,(function(e){return i("Block",{key:e.type+e.id,attrs:{id:e.id,type:e.type,value:e.value,spec:e.spec,state:t.state,selected:e.selected},on:{"update:selected":function(i){return t.$set(e,"selected",i)},input:function(e){return t.commit()},parameterRemoved:t.parameterRemoved,mounted:t.mountBlock,unmounted:t.unmountBlock,move:t.startDragBlock,moved:t.refreshEdges}})})),1)])},h=[],d=(i("bf19"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"div",class:t.containerClasses,style:t.styles,attrs:{id:"block"+this.id},on:{mousedown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?null:(e.preventDefault(),e.stopPropagation(),"button"in e&&0!==e.button?null:t.onMouseDown(e))}}},[i("div",{staticClass:"blockTitle",on:{mousedown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?null:(e.preventDefault(),e.stopPropagation(),"button"in e&&0!==e.button?null:t.emitDrag(e))}}},[i("span",{staticClass:"titleText",attrs:{title:t.plainTitle}},[i("span",{directives:[{name:"show",rawName:"v-show",value:t.invalid,expression:"invalid"}],staticClass:"invalid",attrs:{title:"Process or Collection not supported!"}},[i("i",{staticClass:"fas fa-exclamation-triangle"})]),t._v(" "+t._s(t.name)+" "),t.showId?i("span",{staticClass:"blockId"},[t._v("#"+t._s(t.id))]):t._e()]),i("div",{staticClass:"blockicon",on:{mousedown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?null:(e.preventDefault(),e.stopPropagation(),"button"in e&&0!==e.button?null:t.focus())}}},[i("span",{directives:[{name:"show",rawName:"v-show",value:t.allowsComment&&!t.hasComment,expression:"allowsComment && !hasComment"}],staticClass:"addComment",attrs:{title:"Add comment"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addComment()}}},[i("i",{staticClass:"fas fa-comment-medical"})]),i("span",{directives:[{name:"show",rawName:"v-show",value:t.allowsDelete,expression:"allowsDelete"}],staticClass:"delete",attrs:{title:"Remove (DEL)"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.remove()}}},[i("i",{staticClass:"fas fa-trash"})]),i("span",{directives:[{name:"show",rawName:"v-show",value:t.allowsInfo,expression:"allowsInfo"}],staticClass:"info",attrs:{title:"Details"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.showInfo()}}},[i("i",{staticClass:"fas fa-info"})]),i("span",{directives:[{name:"show",rawName:"v-show",value:t.allowsParameterChange,expression:"allowsParameterChange"}],staticClass:"settings",attrs:{title:"Change parameter values"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.showParameters()}}},[i("i",{staticClass:"fas fa-sliders-h"})])])]),i("div",{staticClass:"inout"},[i("div",{staticClass:"inputs"},t._l(t.parameters,(function(e,s){return i("BlockParameter",t._b({key:s,ref:"parameters",refInFor:!0,attrs:{state:t.state},on:{edgesChanged:function(i){return t.edgesChanged(e,i)}},model:{value:t.args[e.name],callback:function(i){t.$set(t.args,e.name,i)},expression:"args[param.name]"}},"BlockParameter",e,!1))})),1),i("div",{staticClass:"outputs"},[i("BlockParameter",t._b({ref:"output",attrs:{state:t.state,label:t.outputLabel}},"BlockParameter",t.output,!1))],1)]),t.hasComment?i("textarea",{directives:[{name:"model",rawName:"v-model.lazy",value:t.comment,expression:"comment",modifiers:{lazy:!0}}],ref:"commentField",staticClass:"editComment",attrs:{placeholder:"Type comment here..."},domProps:{value:t.comment},on:{blur:function(e){return t.updateComment(e)},mousedown:function(t){t.stopPropagation()},change:function(e){t.comment=e.target.value}}}):t._e()])}),p=[],f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",t._g({class:t.classes},t.listeners),[t.output?t._e():i("div",t._g({ref:"circle",class:t.circleClasses},t.circleListeners)),i("span",{staticClass:"text"},[i("span",{directives:[{name:"show",rawName:"v-show",value:t.unspecified,expression:"unspecified"}],staticClass:"unspecified",attrs:{title:"Parameter is likely unsupported!"}},[i("i",{staticClass:"fas fa-exclamation-triangle"})]),t._v(" "+t._s(t.displayLabel)),t.displayValue.length?[t._v(": ")]:t._e(),i("span",{domProps:{innerHTML:t._s(t.displayValue)}})],2),t.output?i("div",t._g({ref:"circle",class:t.circleClasses},t.circleListeners)):t._e()])},m=[],g=i("79e5"),v=i("a76e"),b={name:"BlockParameter",props:{name:{type:String,default:"output"},description:{type:String,default:""},optional:{type:Boolean,default:!1},deprecated:{type:Boolean,default:!1},experimental:{type:Boolean,default:!1},default:{},value:{},schema:{type:[Object,Array],default:null},label:{type:String},output:{type:Boolean,default:!1},state:{type:Object,required:!0}},data(){return{edges:[]}},computed:{schemas(){return this.schema instanceof g["d"]?this.schema:new g["d"](this.schema)},hasValue(){return void 0!==this.value},listeners(){return this.allowsParameterChange?{dblclick:this.openEditorForParameter}:{}},circleListeners(){var t={};return this.state.editable&&(t.mousedown=t=>{1==t.which&&(this.state.root.link(this),t.preventDefault(),t.stopPropagation())},this.output&&(t.click=t=>{if(1==t.which){if(this.getEdgeCount()>0)return void this.state.root.$emit("error","A result node can't have outgoing edges.");this.state.root.setResultNode(this.$parent)}}),t.mouseover=()=>this.state.linkFrom&&this.state.root.link(this),t.mouseout=()=>this.state.linkTo&&this.state.root.unlink(this)),t},classes(){return[this.output?"output":"input","connector","field_"+this.name,this.hasValue||this.optional||this.output||this.getEdgeCount()>0?"hasValue":"noValue"]},unspecified(){return!this.$parent.invalid&&this.state.root.hasProcesses&&this.schemas.unspecified},circleClasses(){var t=["circle"];this.getEdgeCount()>0&&t.push("io_active");var e=this.edges;for(var i in e)e[i].selected&&t.push("io_selected");return this.state.linkFrom!=this&&this.state.linkTo!=this||t.push("io_selected"),t},displayValue(){var t=25-this.displayLabel.length,e=null;return!this.isEditable||this.state.compactMode||r["a"].isRef(this.value)||(e=this.formatValue(this.value,t,!0)),"string"===typeof e?0===e.length&&(e="<em>Empty</em>"):e="",e},displayLabel(){return this.output&&this.state.compactMode?"":"string"===typeof this.label&&this.label.length>0?this.label:this.name},isDefaultValue(){return!this.hasValue||"undefined"!==typeof this.default&&this.default==this.value},isArrayType(){return"array"===this.schemas.nativeDataType()},isObjectType(){return"object"===this.schemas.nativeDataType()},isEditable(){return!this.output&&this.schemas.isEditable()},allowsParameterChange(){return!this.output&&this.state.root.supports("editParameters")&&this.schemas.isEditable()},allowsMultipleInputs(){return this.isArrayType||this.isObjectType||"any"===this.schemas.nativeDataType()}},watch:{edges(){this.updateEdgeStatus(),this.$emit("edgesChanged",this.edges,this)},value:{immediate:!0,handler(){this.updateEdgeStatus()}}},methods:{updateEdgeStatus(){if(!this.output)for(var t of this.edges)t.inactive=!this.isEdgeUsed(t)},getCirclePosition(){var t=r["a"].domBoundingBox(this.$refs.circle),e=this.state.root.getDimensions(),i=t.offsetLeft-e.offsetLeft+t.width/2,s=t.offsetTop-e.offsetTop+t.height/2;return[i,s]},openEditorForParameter(){this.allowsParameterChange&&this.$parent.showParameters(this.name)},jsonSchema(){return this.schemas.toJSON()},setValue(t){"boolean0"!=this.schemas.nativeDataType()||r["a"].isRef(t)||(t=!!t),this.$emit("input",t)},resetValue(){if("undefined"===typeof this.default){var t;if(this.schemas.nullable())t=null;else{var e=this.schemas.nativeDataType();switch(e){case"object":t={};break;case"array":t=[];break;case"string":t="";break;case"integer":case"number":t=0;break;case"boolean":t=!1;break;default:t=void 0}}this.setValue(t)}else this.setValue(this.default)},getEdgeRef(t){return this.output?this.value:t.parameter1.value},addRefToValue(t){var e=this.getEdgeRef(t);if(e)if(this.allowsMultipleInputs)if(this.isArrayType)if(r["a"].isRef(this.value))this.setValue([this.value,e]);else if(Array.isArray(this.value)&&this.value.length>0){var i=this.value;i.push(e),this.setValue(i)}else this.setValue(e);else if(this.isObjectType){var s=r["a"].size(this.value);1!==this.getEdgeCount()||this.hasValue&&s?s||this.resetValue():this.setValue(e)}else this.setValue(e);else this.setValue(e)},removeRefFromValue(t){var e=this.getEdgeRef(t);r["a"].isRefEqual(e,this.value)?this.resetValue():(this.isArrayType||this.isObjectType)&&this.setValue(this.removeRefFromValueDeep(this.value,e))},removeRefFromValueDeep(t,e){if(Array.isArray(t)){var i=t.length;while(--i>=0)null!==t[i]&&"object"===typeof t[i]&&(r["a"].isRefEqual(e,t[i])?t.splice(i,1):t[i]=this.removeRefFromValueDeep(t[i],e))}else if(r["a"].isObject(t))for(var s in t)t.hasOwnProperty(s)&&null!==t[s]&&"object"===typeof t[s]&&(r["a"].isRefEqual(e,t[s])?delete t[s]:t[i]=this.removeRefFromValueDeep(t[s],e));return t},addEdge(t){this.edges.push(t),this.isEdgeUsed(t)||this.output||this.addRefToValue(t)},eraseEdge(t){for(var e in this.edges)if(this.edges[e]==t)return this.removeRefFromValue(t),this.$delete(this.edges,e),!0;return!1},isEdgeUsed(t){var e=this.getEdgeRef(t);return!!r["a"].isRefEqual(e,this.value)||this.hasRefInValue(e,this.value)},hasRefInValue(t,e){if(!e||"object"!==typeof e)return!1;if(r["a"].isRefEqual(t,e))return!0;for(let i in e)if(this.hasRefInValue(t,e[i]))return!0;return!1},getEdgeCount(){return this.edges.length},formatProcess(t){if(t instanceof v["ProcessGraph"]&&1===t.getNodeCount())return r["a"].htmlentities(t.getResultNode().process_id);var e=Object.values(t.process_graph);return 1===e.length?r["a"].htmlentities(e[0].process_id):"Process"},formatValue(t,e,i=!0){var s=null;if("object"===typeof t)s=null===t?"N/A":Array.isArray(t)?this.formatArray(t,e,i):this.formatObject(t,i);else if("string"===typeof t)if(t.length>e){var n=r["a"].htmlentities(t.substr(0,e))+"…";s=i?'<span title="'+r["a"].htmlentities(t)+'">'+n+"…</span>":n}else s=r["a"].htmlentities(t);else s="boolean"===typeof t?t?"✔️":"❌":"number"===typeof t?t.toString():r["a"].htmlentities(JSON.stringify(t));return s},formatArray(t,e,i=!0){var s=t.map(t=>this.formatValue(t,25,!1)).join(", "),n=r["a"].htmlentities_decode(s);if(n.length>0&&n.length<=e)return"["+s+"]";var a="List("+t.length+")";return i?'<span title="'+s+'">'+a+"</span>":a},formatObject(t,e=!0){return 0===Object.keys(t).length?"None":t instanceof v["ProcessGraph"]||r["a"].isObject(t.process_graph)?this.formatProcess(t):r["a"].isRef(t)?r["a"].formatRef(t):"undefined"!==typeof t.west&&"undefined"!==typeof t.east&&"undefined"!==typeof t.south&&"undefined"!==typeof t.north?"Bounding Box":r["a"].detectGeoJson(t)?t.type:e?'<span title="'+r["a"].htmlentities(JSON.stringify(t))+'">Object</span>':"Object"}}},y=b,w=(i("ec8b"),i("2877")),x=Object(w["a"])(y,f,m,!1,null,"2027d980",null),S=x.exports,_=i("2b0e");const C=10;var E={name:"Block",components:{BlockParameter:S},props:{id:{type:String,required:!0},type:{type:String,required:!0},value:{type:Object,required:!0},selected:{type:Boolean,default:!1},spec:{type:Object,default:()=>null},state:{type:Object,required:!0}},data(){return{data:{},drag:null}},watch:{"state.compactMode"(){this.$emit("moved",this.position)},value:{immediate:!0,handler(t){this.data=_["a"].observable(t)}}},computed:{position:{set(t){t=r["a"].ensurePoint(t),this.$set(this.data,"position",t),this.$emit("moved",t)},get(){return r["a"].ensurePoint(this.data.position)}},args:{set(t){r["a"].isObject(this.data.arguments)||(this.data.arguments={});for(let e in this.data.arguments)"undefined"!==typeof t[e]||this.hasParametersDefined&&-1!==this.spec.parameters.findIndex(t=>t.name===e)||this.$emit("parameterRemoved",this,e);this.$set(this.data,"arguments",t),this.commit()},get(){return r["a"].isObject(this.data.arguments)?this.data.arguments:{}}},comment:{set(t){this.$set(this.data,"description",t),this.commit()},get(){return this.data.description}},result:{set(t){this.$set(this.data,"result",t),this.commit()},get(){return this.data.result||!1}},width(){return this.parameters.length>0?this.state.compactMode?110:200:this.state.compactMode?60:110},styles(){return{marginLeft:Math.round(this.state.center[0]+this.position[0]*this.state.scale)+"px",marginTop:Math.round(this.state.center[1]+this.position[1]*this.state.scale)+"px",fontSize:Math.round(this.state.scale*C)+"px",width:Math.round(this.state.scale*this.width)+"px"}},plainTitle(){return this.name+(this.showId?" #"+this.id:"")},name(){switch(this.type){case"process":return this.collectionId?this.collectionId:this.processId;case"parameter":return this.spec.name;default:return this.id}return name},outputLabel(){return this.result?"Result":"parameter"===this.type?"Process Parameter":"Output"},containerClasses(){var t=["block"];return this.collectionId?t.push("block_collection"):"parameter"===this.type&&t.push("block_argument"),this.result&&t.push("block_result"),this.selected&&t.push("block_selected"),this.invalid&&t.push("block_invalid"),this.state.compactMode&&t.push("compact"),this.state.scale<.5?t.push("scale_xs"):this.state.scale<.7?t.push("scale_s"):this.state.scale<.9?t.push("scale_m"):this.state.scale<1.1&&t.push("scale_l"),t},invalid(){if("process"!==this.type||!this.$parent.hasProcesses)return!1;if(!this.processId)return!0;if(!this.spec)return!0;if("load_collection"===this.processId&&!r["a"].isRef(this.args.id)){for(let t of this.$parent.collections)if(this.args.id===t.id)return!1;return!0}return!1},processId(){if("process"===this.type){if(this.value.process_id)return this.value.process_id;if(r["a"].isObject(this.spec)&&this.spec.id)return this.spec.id}return null},collectionId(){return"process"!==this.type||"load_collection"!==this.processId||r["a"].isRef(this.args.id)?null:this.args.id},allowsParameterChange(){return this.$parent.supports("editParameters")&&this.parameters.filter(t=>t.isEditable()).length>0&&"parameter"!==this.type},allowsDelete(){return this.state.editable&&(!this.spec||r["a"].isObject(this.spec)&&"prop"!==this.spec.origin)},allowsInfo(){return this.collectionId?this.$parent.supports("showCollection"):"parameter"===this.type?r["a"].isObject(this.spec)&&this.$parent.supports("showSchema"):this.$parent.supports("showProcess")},allowsComment(){return this.state.editable&&"process"===this.type},hasComment(){return"string"===typeof this.comment},showId(){return"parameter"!==this.type},hasParametersDefined(){return Boolean(r["a"].isObject(this.spec)&&Array.isArray(this.spec.parameters)&&this.spec.parameters.length>0)},parameters(){let t=[],e=[];if(this.hasParametersDefined&&(e=this.spec.parameters.map(t=>new g["c"](t)),t=e.map(t=>t.name)),r["a"].size(this.args)>0)for(var i in this.args)t.includes(i)||e.push(new g["c"]({name:i,description:""}));return e},fields(){var t={};for(var e of this.parameters)t[e.name]=e;return t.output=this.output,t},output(){var t={};r["a"].isObject(this.spec)&&("parameter"===this.type?t=this.spec:r["a"].isObject(this.spec.returns)&&(t=this.spec.returns));var e={name:"output",schema:t.schema||{},description:t.description||"",optional:!0,output:!0,value:{}};return"parameter"===this.type?e.value.from_parameter=this.id:e.value.from_node=this.id,e}},mounted(){this.draggingFn=this.dragging.bind(this),document.addEventListener("mousemove",this.draggingFn),this.stopDragFn=this.stopDrag.bind(this),document.addEventListener("mouseup",this.stopDragFn),this.$emit("mounted",this)},beforeDestroy(){document.removeEventListener("mousemove",this.draggingFn),document.removeEventListener("mouseup",this.stopDragFn),this.$emit("unmounted",this)},methods:{commit(){this.$emit("input",this.data)},focus(){this.$parent.focus()},async onMouseDown(t){return this.$parent.unselectAll(t),await this.select(!this.selected,!1)},async select(t=!0,e=!0){return this.unselectOthers&&this.$parent.unselectAll(),this.$emit("update:selected",t),this.focus(),await this.$nextTick(),t},getDimensions(){let t=r["a"].domBoundingBox(this.$refs.div);var e=this.$parent.getDimensions();return t.x=t.offsetLeft-e.offsetLeft,t.y=t.offsetTop-e.offsetTop,t},edgesChanged(t,e,i){t.setRefs(e.map(t=>t.parameter1.value))},showParameters(t=null){this.$parent.$emit("editParameters",this.parameters.filter(t=>t.isEditable()),this.args,this.plainTitle,this.state.editable,t,t=>this.args=t,this.processId)},showInfo(){this.collectionId?this.$parent.$emit("showCollection",this.collectionId):"parameter"===this.type?this.$parent.$emit("showSchema",this.name,this.spec.schema):this.$parent.$emit("showProcess",this.processId)},async addComment(){await this.select(),this.comment="",await this.$nextTick(),this.$refs.commentField.focus()},updateComment(t){"string"===typeof t.target.value&&t.target.value.length>0?this.comment=t.target.value:this.comment=null},async emitDrag(t){this.focus();let e=await this.onMouseDown(t);e&&this.$emit("move")},getDragPos(t){return[this.state.mouse[0]/this.state.scale-t[0],this.state.mouse[1]/this.state.scale-t[1]]},startDrag(){this.selected&&(this.drag={origin:this.position,mouse:this.getDragPos(this.position)})},stopDrag(){if(this.drag){var t=5/this.state.scale;(Math.abs(this.drag.origin[0]-this.position[0])>t||Math.abs(this.drag.origin[1]-this.position[1])>t)&&this.commit(),this.drag=null}},dragging(){this.drag&&(this.position=this.getDragPos(this.drag.mouse))},hasOutputEdges(){return this.$refs.output&&this.$refs.output.getEdgeCount()>0},async remove(){await this.$parent.removeBlock(this)},getBlockParameter(t){if("output"===t&&this.$refs.output)return this.$refs.output;if(Array.isArray(this.$refs.parameters)){var e=this.$refs.parameters.filter(e=>e.name===t);if(e.length>0)return e[0]}return null}}},k=E,P=(i("282a"),Object(w["a"])(k,d,p,!1,null,"56dac923",null)),D=P.exports,T=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("g",t._l(t.lines,(function(e,s){return i("line",t._b({key:s},"line",e,!1))})),0)},O=[];class M{constructor(t,e,i,s){this.x=t,this.y=e,this.dx=i,this.dy=s}distance(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}distanceP(t){var e=this.normal();e.x=t.x,e.y=t.y;var i=this.intersection(e);return[i[0],this.distance(e.alpha(i[1]),t)]}normal(){return new M(this.x,this.y,this.dy,-this.dx)}intersection(t){var e=this.dx,i=-t.dx,s=this.dy,n=-t.dy,r=t.x-this.x,a=t.y-this.y,o=e*n-i*s;if(0==o)return null;var l=(n*r-i*a)/o,c=(-s*r+e*a)/o;return[l,c]}alpha(t){var e={};return e.x=this.x+this.dx*t,e.y=this.y+this.dy*t,e}}var I={name:"Edge",props:{id:{type:Number,required:!0},parameter1:{type:Object,required:!0},parameter2:{type:Object,required:!0},selected:{type:Boolean,default:!1},inactive:{type:Boolean,default:!1},lineWidth:{type:Number,default:3},state:{type:Object,required:!0}},data(){return{position1:null,position2:null}},computed:{segment(){return new M(this.position1[0],this.position1[1],this.position2[0]-this.position1[0],this.position2[1]-this.position1[1])},scaledLineWidth(){return this.lineWidth*this.state.scale},lines(){var t=(this.position1[0]+this.position2[0])/2,e=(this.position1[1]+this.position2[1])/2,i=35*Math.PI/180,s=Math.cos(i),n=Math.sin(i),r=Math.cos(-i),a=Math.sin(-i),o=Math.sqrt(Math.pow(this.position1[0]-this.position2[0],2)+Math.pow(this.position1[1]-this.position2[1],2)),l=10*this.state.scale/(o/1.5),c=(this.position1[0]-t)*l,u=(this.position1[1]-e)*l,h=this.getLineStyle(this.scaledLineWidth,this.selected,this.inactive),d=this.getLineStyle(this.scaledLineWidth/1.5,this.selected),p=this.getLine(this.position1[0],this.position1[1],this.position2[0],this.position2[1],h);return this.inactive||o/this.state.scale<25?[p]:[p,this.getLine(t,e,t+(c*s-u*n),e+(u*s+c*n),d),this.getLine(t,e,t+(c*r-u*a),e+(u*r+c*a),d)]}},watch:{"state.center"(){this.updatePositions()},"state.scale"(){this.updatePositions()},"state.moving"(){this.updatePositions()}},created(){this.updatePositions()},methods:{updatePositions(){let t=this.parameter1.getCirclePosition(),e=this.parameter2.getCirclePosition();this.position1&&this.position2&&t[0]===this.position1[0]&&t[1]===this.position1[1]&&e[0]===this.position2[0]&&e[1]===this.position2[1]||(this.position1=t,this.position2=e,this.$emit("position",this.position1,this.position2))},getLineStyle(t,e=!1,i=!1){let s=2*this.state.scale;return{stroke:e?"rgba(0, 200, 0, 1)":"rgba(255, 200, 0, 1)","stroke-width":t,"stroke-dasharray":i?3*s+" "+2*s:"none"}},getLine(t,e,i,s,n={}){return Object.assign({x1:t,y1:e,x2:i,y2:s},n)},collide(t,e){if(!this.segment)return!1;var i=this.segment.distanceP({x:t,y:e});return i[0]>=0&&i[0]<=1&&i[1]<this.lineWidth*this.state.scale*2&&i[0]},equals(t){return this.parameter1==t.parameter1&&this.parameter2==t.parameter2||this.parameter1==t.parameter2&&this.parameter2==t.parameter1}}},F=I,j=Object(w["a"])(F,T,O,!1,null,null,null),B=j.exports,L=i("0dd6"),$=i.n(L),A=i("a13e"),N=i.n(A);const R=function(t){return _["a"].observable({root:t,editable:!1,compactMode:!1,moving:null,selecting:null,center:[0,0],mouse:[0,0],scale:1.3,linkFrom:null,linkTo:null})},V=20,U=function(t,e){Array.isArray(t)&&Array.isArray(e)&&t.length===e.length&&t.every((t,i)=>t.id===e[i].id)||this.$emit("selectionChanged",this.selectedBlocks,this.selectedEdges)};var J={name:"Blocks",components:{Block:D,Edge:B},props:{id:{type:String,required:!0},editable:{type:Boolean,default:!1},value:{type:Object,default:()=>({})},collections:{type:Array,default:()=>[]},processes:{type:[Array,Object],default:()=>[]},pgParameters:{type:Array,default:()=>[]}},data(){return{isMounted:!1,newBlockOffset:0,history:[],historyPointer:null,process:this.value,blocks:[],edges:[],processGraph:null,nextBlockId:1,nextEdgeId:1,activeTransactions:0,state:R(this)}},computed:{selectRect(){return this.state.selecting?{x:Math.min(this.state.mouse[0],this.state.selecting[0]),y:Math.min(this.state.mouse[1],this.state.selecting[1]),width:Math.abs(this.state.mouse[0]-this.state.selecting[0]),height:Math.abs(this.state.mouse[1]-this.state.selecting[1]),stroke:"rgba(0,0,0,0.8)","stroke-width":1,fill:"rgba(0,0,0,0.05)"}:null},linkingLine(){if(this.state.linkFrom){var t=this.state.linkFrom.getCirclePosition();return{x1:t[0],y1:t[1],x2:this.state.mouse[0],y2:this.state.mouse[1],stroke:"rgba(0,0,0,0.4)","stroke-width":3*this.state.scale}}return null},processRegistry(){return this.processes instanceof v["ProcessRegistry"]?this.processes:new v["ProcessRegistry"](this.processes)},hasProcesses(){return this.processRegistry.count()>0},processBlocks(){return this.blocks.filter(t=>"process"===t.type)},selectedBlocks(){return this.blocks.filter(t=>t.selected)},selectedEdges(){return this.edges.filter(t=>t.selected)},selectedSideEdge(){return 1===this.selectedEdges.length&&this.selectedEdges[0].selectedParameter?this.selectedEdges[0]:null}},watch:{pgParameters(t){this.importPgParameters(t,"prop")},async value(t){this.isMounted&&(t instanceof H||(this.process=t,await this.import(t,{propagate:!1,undoOnError:!1})))},editable:{immediate:!0,handler(t){this.state.editable=t}},selectedEdges:U,selectedBlocks:U},async mounted(){this.supports("error")||this.$on("error",(t,e=null)=>console.error(t,e)),this.moveCenter(0,0,!0),this.onDocumentMouseUpFn=this.onDocumentMouseUp.bind(this),document.addEventListener("mouseup",this.onDocumentMouseUpFn),await this.importPgParameters(this.pgParameters,"prop"),await this.import(this.value,{propagate:!1,undoOnError:!1})||this.perfectScale(),U.bind(this)(),this.isMounted=!0},beforeDestroy(){document.removeEventListener("mouseup",this.onDocumentMouseUpFn)},methods:{mountBlock(t){this.setBlockElement(t,t)},unmountBlock(t){this.setBlockElement(t,null)},parameterRemoved(t,e){for(let i of this.edges)i.parameter2.$parent===t&&i.parameter2.name===e&&this.removeEdge(i)},setBlockElement(t,e){for(var i of this.blocks)if(i.id===t.id)return void(i.$el=e)},startDragBlock(){for(let t in this.blocks)this.blocks[t].$el&&this.blocks[t].$el.startDrag()},refreshEdges(){for(let t in this.$refs.edges)this.$refs.edges[t].updatePositions()},supports(t){return this.$listeners&&this.$listeners[t]},focus(){this.$refs.div.focus()},highlight(t){t?this.$refs.div.classList.add("focus"):this.$refs.div.classList.remove("focus")},link(t){this.state.linkFrom?this.state.linkTo=t:this.state.linkFrom=t},unlink(t=null){t?this.state.linkTo==t?this.state.linkTo=null:this.state.linkFrom==t&&(this.state.linkFrom=null):(this.state.linkTo=null,this.state.linkFrom=null)},multiSelect(){let t=this.selectRect;this.blocks.filter(e=>{if(Array.isArray(e.value.position)&&e.$el){let i=e.$el.getDimensions();return $()(t.x,t.y,t.width,t.height,i.x,i.y,i.width,i.height)}return!1}).map(t=>t.selected=!0),this.edges.filter(e=>Array.isArray(e.position1)&&Array.isArray(e.position2)&&N()(t.x,t.y,t.width,t.height,e.position1[0],e.position1[1],e.position2[0],e.position2[1])).map(t=>t.selected=!0)},async onDocumentMouseUp(t){if(this.selectedSideEdge&&this.selectEdge(this.selectedSideEdge,null,null,null),this.state.selecting&&(this.multiSelect(),this.state.selecting=null),this.state.moving&&(this.state.moving=null),this.state.editable&&this.state.linkFrom){if(1==t.which&&this.state.linkTo)try{await this.addEdge(this.state.linkFrom,this.state.linkTo)}catch(e){this.$emit("error",e)}this.unlink()}},onKeyDown(t){var e=document.querySelectorAll("input, textarea, button, select, datalist");for(let i of e)if(i===document.activeElement)return;this.state.editable&&46==t.keyCode&&this.deleteSelected()},onMouseWheel(t){var e=this.state.mouse[0]-this.state.center[0],i=this.state.mouse[1]-this.state.center[1],s=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail)),n=Math.pow(1.1,s);this.moveCenter(-e*(n-1),-i*(n-1)),this.state.scale*=n},onMouseMove(t){var e=this.getDimensions(),i=t.pageX-e.offsetLeft,s=t.pageY-e.offsetTop;if(this.state.mouse=[i,s],this.state.editable&&this.selectedSideEdge){var n=this.selectedSideEdge.selectedPosition,r=Math.sqrt(Math.pow(i-n[0],2)+Math.pow(s-n[1],2));r>10&&(this.link(this.selectedSideEdge.selectedParameter),this.removeEdge(this.selectedSideEdge),this.commit())}this.state.moving&&(this.moveCenter(i-this.state.moving[0],s-this.state.moving[1]),this.state.moving=this.state.mouse)},onMouseDown(t){let e=null;if(1==t.which&&t.shiftKey)this.state.selecting=this.state.mouse;else if(1==t.which)for(var i in this.unselectAll(t),this.$refs.edges){var s=this.$refs.edges[i],n=s.collide(this.state.mouse[0],this.state.mouse[1]);if(0!=n){0===this.selectedEdges.length&&(n<.3?e=s.parameter2:n>.7&&(e=s.parameter1)),this.selectEdge(i,!0,t,e),t.preventDefault();break}}2!=t.which&&(1!=t.which||e||t.shiftKey)||(this.state.moving=this.state.mouse),this.focus()},getDimensions(){return r["a"].domBoundingBox(this.$refs.div)},async clear(){return await this.startTransaction(async()=>(this.edges=[],this.blocks=this.blocks.filter(t=>"parameter"===t.type&&r["a"].isObject(t.spec)&&"prop"===t.spec.origin),this.nextBlockId=1,this.nextEdgeId=1,this.process={},!0))},commit(t=null,e=!0,i=!0){this.activeTransactions>0||(!1!==e&&this.saveHistory(),!1!==i&&this.$emit("input",null===t?this.export():t))},saveHistory(){var t=this.export(!0);this.history.splice(this.historyPointer+1,this.historySize,t),this.history.length>this.historySize&&this.history.shift(),this.historyPointer=this.history.length-1,this.$emit("historyChanged",this.history,this.historyPointer)},async undo(){await this.historyStep(-1)},async redo(){await this.historyStep(1)},async historyStep(t){var e=this.historyPointer+t,i=this.history[e];i&&(this.historyPointer=e,this.import(i,{saveHistory:!1,undoOnError:!1,perfectScale:!1}),this.$emit("historyChanged",this.history,this.historyPointer))},setResultNode(t,e=!0){if(t=this.getBlockById(t.id),t&&t.value.result!==e){var i=(t,e)=>{this.$set(t.value,"result",e),this.commit()};i(t,e);var s=!1,n=!1;for(var r of this.processBlocks)if(!t||r.id!==t.id)if(n=!0,e)i(r,!1);else if(r.$el&&!r.$el.hasOutputEdges()){i(r,!0),s=!0;break}!n||e||s||this.$emit("error","No result node available, please specify one.")}},getPositionForPageXY(t,e){var i=this.getDimensions();return null!==t&&(t=(t-i.offsetLeft-this.state.center[0])/this.state.scale),null!==e&&(e=(e-i.offsetTop-this.state.center[1])/this.state.scale),[t,e]},addProcess(t,e={},i=[],s={}){return this.addBlock(Object.assign({process_id:t,arguments:e,position:i},s))},addBlock(t,e=null){var i={id:String(this.incrementId(e)),type:"process",selected:!1,value:"function"===typeof t.toJSON?t.toJSON():t};this.processRegistry&&(i.spec=this.processRegistry.get(t.process_id));var s=this.getBlockSize(i);return i.value.position=r["a"].ensurePoint(i.value.position,()=>this.getNewBlockDefaultPosition(s)),i.value.result&&this.blocks.filter(t=>!0===t.value.result).length?delete i.value.result:0===this.processBlocks.length&&(i.value.result=!0),this.blocks.push(_["a"].observable(i)),this.commit(),i},getNewBlockDefaultPosition(t){var e=this.getDimensions(),i=[(-this.state.center[0]+e.width/2)/this.state.scale-t[0]/2+this.newBlockOffset,(-this.state.center[1]+e.height/2)/this.state.scale-t[1]/2+this.newBlockOffset];return this.newBlockOffset<150&&(this.newBlockOffset+=10),i},getBlockSize(t){if(t.$el){let e=t.$el.getDimensions();return[e.width/this.state.scale,e.height/this.state.scale]}var e,i=Math.max(r["a"].isObject(t.value)?r["a"].size(t.value.arguments):0,r["a"].isObject(t.spec)?r["a"].size(t.spec.parameters):0);e=i>0?this.state.compactMode?110:200:this.state.compactMode?60:110;var s=r["a"].isObject(t.value)&&"string"===typeof t.value.description?40:0,n=V+15*i+s;return[e,n]},moveCenter(t,e,i=!1){var s=this.getDimensions();this.state.center=[(i?s.width/2:this.state.center[0])+t,(i?s.height/2:this.state.center[1])+e],this.newBlockOffset=0},unselectAll(t=null){if(!t||!t.shiftKey){for(var e in this.blocks)this.$set(this.blocks[e],"selected",!1);for(var e in this.edges)this.selectEdge(e,!1)}},selectEdge(t,e=!0,i=null,s=null){i&&this.unselectAll(i),r["a"].isObject(t)||(t=this.edges[t]),null!==e&&this.$set(t,"selected",e),this.$set(t,"selectedParameter",s),this.$set(t,"selectedPosition",s?this.state.mouse:null)},removeEdge(t){t.parameter1.eraseEdge(t),t.parameter2.eraseEdge(t),this.$delete(this.edges,this.edges.indexOf(t))},async removeBlock(t){return await this.startTransaction(async()=>{var e=this.blocks.findIndex(e=>e.id==t.id);if(e<0)return!1;for(var i of this.edges.slice(0))i.parameter1.$parent.id!==t.id&&i.parameter2.$parent.id!==t.id||this.removeEdge(i);return t.value.result&&this.setResultNode(t,!1),this.$delete(this.blocks,e),!0})},getBlockById(t){var e=this.blocks.filter(e=>e.id===t);return e.length>0?e[0]:null},async deleteSelected(){return(0!==this.selectedBlocks.length||0!==this.selectedEdges.length)&&await this.startTransaction(async()=>{for(var t of this.selectedBlocks.slice(0))t.$el.allowsDelete&&this.removeBlock(t);for(var e of this.selectedEdges.slice(0))this.removeEdge(e);return!0})},async addEdgeByNames(t,e,i,s){var n=[];for(var r of[t,i]){var a=this.getBlockById(r);if(!a)throw"Can't find block: "+r;if(!a.$el)throw"Block not mounted yet: "+r;n.push(a.$el)}await this.addEdge(n[0].getBlockParameter(e),n[1].getBlockParameter(s))},async addEdge(t,e){if(!t||!e)throw"One of the parameters is invalid.";if(t!=e){if(t.$parent==e.$parent)throw"You can't link a block to itself";var i=this.nextEdgeId++,s={id:i,selected:!1,inactive:!1};if(t.output?(s.parameter1=t,s.parameter2=e):(s.parameter1=e,s.parameter2=t),!s.parameter1.output)throw"You have to link an input with an output";if(-1!==this.allSuccessors(s.parameter1).indexOf(s.parameter2.id))throw"You can not create a loop";if(!v["JsonSchemaValidator"].isSchemaCompatible(s.parameter2.schema||{},s.parameter1.schema||{},!1,!0))throw'Incoming data type is not compatible for parameter "'+s.parameter2.name+'"';if(s.parameter2.getEdgeCount()>0&&!s.parameter2.allowsMultipleInputs)throw"Parameter accepts only one input";for(var n in this.$refs.edges)if(this.$refs.edges[n].equals(s))throw"This connection exists already";return await this.startTransaction(async()=>(this.unlink(),this.edges.push(_["a"].observable(s)),s.parameter1.addEdge(s),s.parameter2.addEdge(s),this.setResultNode(s.parameter1.$parent,!1),!0))}},allSuccessors(t){var e=t.$parent,i={},s=[e];i[e.id]=!0;while(s.length>0){var n=s.pop();for(var r in n.edges)for(var a in n.edges[r]){var o=n.edges[r][a];if(o.block1==n){var l=o.block2;l.id in i||(i[l.id]=!0,s.push(l))}}}return Object.values(i)},async toggleCompact(){this.state.compactMode=!this.state.compactMode,this.$emit("compactMode",this.state.compactMode),await this.$nextTick(),this.refreshEdges()},export(t=!1){var e={};for(var i of this.processBlocks){let s=r["a"].deepClone(i.value);t||delete s.position,null===s.description&&delete s.description,!0!==s.result&&delete s.result,e[i.id]=s}return new H(Object.assign({},this.process,{process_graph:e}))},async startTransaction(t,e={},...i){let s;this.activeTransactions++;try{s=await t(i)}catch(n){if(this.$emit("error",n,"Model is invalid"),console.log(n),!1!==e.undoOnError)try{await this.undo()}catch(r){this.$emit("error",n,"Revert failed"),console.log(n)}s=!1}return this.activeTransactions--,this.commit(null,e.saveHistory,e.propagate),s},async import(t,e={}){return await this.startTransaction(async()=>(!1!==e.clear&&(await this.clear(),this.process=t instanceof v["ProcessGraph"]?t.toJSON():t),!!r["a"].isObject(t)&&(t instanceof v["ProcessGraph"]?(this.processGraph=new v["ProcessGraph"](t.toJSON(),this.processRegistry),this.processGraph.setParent(t.parentProcessId,t.parentParameterName)):this.processGraph=new v["ProcessGraph"](t,this.processRegistry),this.processGraph.allowEmpty(),this.processGraph.parse(),await this.importPgParameters(this.processGraph.getProcessParameters(),"pg",!1!==e.clear),await this.importNodes(this.processGraph.getStartNodes()),await this.importEdges(this.processGraph),!1!==e.perfectScale&&this.perfectScale(),!0)),e)},async importPgParameters(t,e,i=!0){if(!Array.isArray(t))return;i&&(this.blocks=this.blocks.filter(t=>"parameter"!==t.type||t.spec.origin!==e));let s=this.getBlockSize({}),n=[0,0];for(var r in t){t[r];n=[-s[0]-V,r*(s[1]+V)],this.addPgParameter(t[r],e,n)}await this.$nextTick()},addPgParameter(t,e="user",i=null){this.blocks.findIndex(e=>"parameter"===e.type&&e.id==t.name)>=0||(t=r["a"].deepClone(t),"undefined"===typeof t.schema&&(t.schema={}),t.origin=e,this.blocks.push(_["a"].observable({id:t.name,type:"parameter",value:{from_parameter:t.name,position:r["a"].ensurePoint(i,()=>this.getNewBlockDefaultPosition(this.getBlockSize({})))},spec:t})))},getPgParameters(){return this.blocks.filter(t=>"parameter"===t.type)},async importEdges(t){var e=t.getNodes();for(var i of Object.values(e)){var s=i.getArgumentNames();for(let e in s){var n=i.getRawArgument(s[e]);switch(i.getArgumentType(s[e])){case"result":await this.addEdgeByNames(t.getNode(n.from_node).id,"output",i.id,s[e],!1);break;case"parameter":await this.addEdgeByNames(n.from_parameter,"output",i.id,s[e],!1);break;case"object":case"array":await this.importEdgeDeep(n,t,i,s,e);break}}}},async importEdgeDeep(t,e,i,s,n){for(let a in t)if(t[a]&&"object"===typeof t[a]&&"process_graph"!==a)await this.importEdgeDeep(t[a],e,i,s,n);else{if(!r["a"].isRef(t))continue;t.from_node?await this.addEdgeByNames(e.getNode(t.from_node).id,"output",i.id,s[n],!1):t.from_parameter&&await this.addEdgeByNames(t.from_parameter,"output",i.id,s[n],!1)}},async importNodes(t,e=0,i=0,s=[]){let n=0===s.length,a=[],o=0;for(let l of t){if(s.includes(l.id)||void 0!==l.getPreviousNodes().find(t=>!s.includes(t.id))){i+=V/2;continue}let t="function"===typeof l.toJSON?l.toJSON():l;t.position=r["a"].ensurePoint(t.position,()=>[e,i]);let n=this.addBlock(t,l.id);s.push(l.id);let c=this.getBlockSize(n);o=Math.max(o,t.position[0]+c[0]),i=t.position[1]+c[1]+V,a=a.concat(l.getNextNodes())}a.length&&await this.importNodes(a,o+V,0,s),n&&await this.$nextTick()},incrementId(t=null){return"number"===typeof t||"string"===typeof t&&0!==t.length?isNaN(parseInt(t))||(this.nextBlockId=Math.max(this.nextBlockId,parseInt(t)+1)):(t=this.nextBlockId,this.nextBlockId++),t},perfectScale(){if(this.$refs.div&&0!==this.blocks.length){var t=null,e=null,i=null,s=null;for(let n in this.blocks){let a=this.blocks[n],o=this.getBlockSize(a),l=r["a"].ensurePoint(a.value.position);null==t?(t=l[0]-15,e=l[0]+o[0]+15,i=l[1]-15,s=l[1]+o[1]+15):(t=Math.min(t,l[0]-15),e=Math.max(e,l[0]+o[0]+15),i=Math.min(i,l[1]-15),s=Math.max(s,l[1]+o[1]+15))}var n=this.$refs.div.getBoundingClientRect(),a=n.width/(e-t),o=n.height/(s-i);this.state.scale=Math.min(a,o,1.5),this.state.center=[n.width/2-this.state.scale*(t+e)/2,n.height/2-this.state.scale*(i+s)/2],this.newBlockOffset=0}}}};class H{constructor(t){Object.assign(this,t)}}var G=J,z=(i("2fc0"),Object(w["a"])(G,u,h,!1,null,"1940abd6",null)),X=z.exports,Y=i("cbd9"),W=i("c2dc"),q=i("3115"),K=i("5472"),Z={name:"VisualEditor",mixins:[q["a"]],components:{Blocks:X,DiscoveryToolbar:Y["a"],ParameterModal:W["default"],FullscreenButton:K["a"],ExpressionModal:()=>i.e("chunk-2fdad1d2").then(i.bind(null,"3d5e"))},props:{id:String,editable:{type:Boolean,default:!0},value:{type:Object,default:()=>null},pgParameters:{type:Array,default:()=>[]},showDiscoveryToolbar:{type:Boolean,default:!1},title:{type:String},defaultValue:{}},computed:{...r["a"].mapState(["collections"]),...r["a"].mapGetters(["processRegistry"]),...r["a"].mapGetters("userProcesses",["supportsMath","isMathProcess"])},data(){return{canUndo:!1,canRedo:!1,compactMode:!1,hasSelection:!1,isMath:!1,isFullScreen:!1}},watch:{value(t){this.isMath=this.isMathProcess(t)}},methods:{...r["a"].mapActions("userProcesses",{readUserProcess:"read"}),commit(t){"undefined"!==typeof this.defaultValue&&r["a"].isObject(t)&&0===r["a"].size(t.process_graph)&&(t=this.defaultValue),this.$emit("input",t)},errorHandler(t,e=null){r["a"].exception(this,t,e)},selectionChanged(t,e){this.hasSelection=Boolean(t.filter(t=>t.$el.allowsDelete).length||e.length)},historyChanged(t,e){this.canUndo=!!t[e-1],this.canRedo=!!t[e+1]},allowDrop(t){t.preventDefault()},onDrop(t){var e=t.dataTransfer.getData("application/openeo-node");if(e){t.preventDefault();let i=JSON.parse(e);this.insertProcess(i,t.pageX,t.pageY)}},addParameter(){var t=[{name:"name",label:"Parameter name",schema:{type:"string"},default:null}];this.emit("showDataForm","Add Parameter",t,t=>{"string"===typeof t.name&&t.name.length>0&&this.$refs.blocks.addPgParameter(t)})},showSchemaModal(t,e){this.emit("showSchema",t,e)},showExpressionModal(){this.$refs.expressionModal.show(this.value,this.$refs.blocks.getPgParameters())},openParameterEditor(t,e,i="Edit",s=!0,n=null,r=null,a=null){this.$refs.parameterModal.show(i,t,e,s,r,null,a,n)},confirmClear(){var t=confirm("Do you really want to clear the existing model?");t&&this.clear()},clear(){this.$refs.blocks&&this.$refs.blocks.clear(),this.commit(null)},insertProcess(t,e=null,i=null){try{var s=this.$refs.blocks.getPositionForPageXY(e,i);this.$refs.blocks.addProcess(t.process_id,t.arguments,s)}catch(n){r["a"].exception(this,n)}},async insertNodes(t,e=!1){return await this.$refs.blocks.import({process_graph:t},{clear:e})}}},Q=Z,tt=(i("4d982"),Object(w["a"])(Q,l,c,!1,null,null,null)),et=tt.exports,it=i("0f29"),st={name:"Editor",components:{VisualEditor:et,TextEditor:it["a"],Tabs:a["default"],Tab:o["default"]},props:{id:String,editable:{type:Boolean,default:!0},value:{type:Object,default:()=>null},title:{type:String},pgParameters:{type:Array,default:()=>[]},showDiscoveryToolbar:{type:Boolean,default:!1},defaultValue:{}},watch:{value(){this.updateTab()}},data(){return{modelValue:null,codeValue:null,error:null}},mounted(){this.updateTab()},computed:{...r["a"].mapGetters("userProcesses",{getProcessById:"getAllById"})},methods:{showModel(){this.error=null,this.modelValue=this.value},showCode(){this.error=null,this.codeValue=this.value,this.$refs.sourceEditor.updateState()},updateTab(){"source"===this.$refs.tabs.getActiveTabId()?this.showCode():this.showModel()},commit(t){this.error=null,this.$emit("input",t)},onError(t){this.error=t},activeEditor(){return"source"===this.$refs.tabs.getActiveTabId()?this.$refs.sourceEditor:this.$refs.graphBuilder},async insertProcess(t){try{let e=this.getProcessById(t.process_id);null==e||e.native||await this.readUserProcess({data:e}),this.activeEditor().insertProcess(t)}catch(e){r["a"].exception(this,e)}},canSwitchView(){return!this.editable||null===this.error||(r["a"].exception(this,this.error,"Process Invalid Error"),!1)}}},nt=st,rt=(i("b16a"),Object(w["a"])(nt,s,n,!1,null,null,null));e["default"]=rt.exports},d00a:function(t,e,i){},da12:function(t,e,i){},dc31:function(t,e,i){},de39:function(t,e,i){},ded2:function(t,e,i){},e7a4:function(t,e,i){},ebe9:function(t,e,i){},ec8b:function(t,e,i){"use strict";i("8aff")},ed22:function(t,e){
/*! http://mths.be/repeat v0.2.0 by @mathias */
String.prototype.repeat||function(){"use strict";var t=function(){try{var t={},e=Object.defineProperty,i=e(t,t,t)&&e}catch(s){}return i}(),e=function(t){if(null==this)throw TypeError();var e=String(this),i=t?Number(t):0;if(i!=i&&(i=0),i<0||i==1/0)throw RangeError();var s="";while(i)i%2==1&&(s+=e),i>1&&(e+=e),i>>=1;return s};t?t(String.prototype,"repeat",{value:e,configurable:!0,writable:!0}):String.prototype.repeat=e}()},f3db:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"wrapper"}},[s("div",{attrs:{id:"ide"},on:{mouseup:function(e){return t.stopMovingSeparator(e)},mousemove:function(e){return t.moveSeparator(e)}}},[s("header",{staticClass:"navbar"},[s("div",{staticClass:"logo"},[s("img",{attrs:{src:i("cf05"),alt:"openEO"}}),s("h2",[t._v("Web Editor "),s("span",{staticClass:"version",on:{click:t.showWebEditorInfo}},[t._v(t._s(t.version))])])]),s("ul",{attrs:{id:"menu"}},[s("li",[s("div",{staticClass:"menuItem",attrs:{title:"Get server information"},on:{click:t.showServerInfo}},[s("i",{staticClass:"fas fa-info fa-fw"}),t._v(" Server")])]),s("li",[s("UserMenu")],1)])]),s("main",{staticClass:"page"},[s("div",{ref:"discovery",attrs:{id:"discovery"}},[s("DiscoveryToolbar",{staticClass:"toolbar",attrs:{onAddProcess:t.insertProcess}})],1),s("hr",{ref:"separator0",staticClass:"separator",on:{dblclick:function(e){return t.centerSeparator(e,0)},mousedown:function(e){return t.startMovingSeparator(e,0)}}}),s("div",{ref:"workspace",attrs:{id:"workspace"}},[s("Editor",{ref:"editor",staticClass:"mainEditor",attrs:{id:"main",value:t.process,title:t.contextTitle},on:{input:t.updateEditor},scopedSlots:t._u([{key:"file-toolbar",fn:function(){return[s("button",{directives:[{name:"show",rawName:"v-show",value:t.saveSupported,expression:"saveSupported"}],attrs:{type:"button",title:"Save to "+t.contextTitle},on:{click:t.saveProcess}},[s("i",{staticClass:"fas fa-save"})])]},proxy:!0}])}),t.isAuthenticated?s("UserWorkspace",{staticClass:"userContent"}):t._e()],1),s("hr",{ref:"separator1",staticClass:"separator",on:{dblclick:function(e){return t.centerSeparator(e,1)},mousedown:function(e){return t.startMovingSeparator(e,1)}}}),s("div",{ref:"viewer",attrs:{id:"viewer"}},[s("Viewer")],1)])]),s("CollectionModal",{ref:"collectionModal"}),s("ProcessModal",{ref:"processModal"}),s("ServerInfoModal",{ref:"serverInfoModal"}),s("ServiceInfoModal",{ref:"serviceModal"}),s("JobInfoModal",{ref:"jobModal"}),s("ParameterModal",{ref:"parameterModal"}),s("SchemaModal",{ref:"schemaModal"}),s("UdfRuntimeModal",{ref:"udfRuntimeModal"}),s("JobEstimateModal",{ref:"jobEstimateModal"})],1)},n=[],r=(i("bf19"),i("9224")),a=i("3115"),o=i("025e"),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"UserMenu"}},[i("div",{staticClass:"menuItem"},[t._m(0),i("div",{staticClass:"data"},[i("span",{staticClass:"name nowrap"},[i("i",{staticClass:"fas fa-user"}),t._v(" "+t._s(t.userName))]),t.hasBudget?i("span",{staticClass:"credits nowrap"},[i("i",{staticClass:"fas fa-dollar-sign fa-fw"}),t._v(" "+t._s(t.budget))]):t._e(),t.hasStorage?i("span",{staticClass:"storage nowrap"},[i("i",{staticClass:"fas fa-database fa-fw"}),t._v(" "+t._s(t.storageUsedPercent)+"% used")]):t._e()])]),i("div",{staticClass:"dropdown"},[i("div",{staticClass:"item"},[t._v(" Welcome, "+t._s(t.userName)+"! ")]),t.hasStorage?i("div",{staticClass:"item"},[i("h4",[t._v("Storage")]),i("div",{staticClass:"storagePercent"},[i("div",{staticClass:"used",style:"width: "+t.storageUsedPercent+"%"})]),i("div",{staticClass:"nowrap"},[t._v("Used "+t._s(t.formatMegabyte(t.storageUsed))+" of "+t._s(t.formatMegabyte(t.userInfo.storage.quota))+".")])]):t._e(),t._l(t.links,(function(e,s){return i("div",{key:s,staticClass:"item"},[i("a",{attrs:{href:e.href,target:"_blank",rel:e.rel}},[t._v(t._s(e.title))])])})),i("div",{staticClass:"item"},[i("button",{staticClass:"navButton",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.logout(e)}}},[i("i",{staticClass:"fas fa-sign-out-alt"}),t._v(" Logout")])])],2)])},c=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"down"},[i("i",{staticClass:"fas fa-chevron-down"})])}],u={name:"UserMenu",computed:{...o["a"].mapState(["userInfo"]),...o["a"].mapGetters(["formatCurrency"]),links(){return o["a"].friendlyLinks(this.userInfo.links)},hasBudget(){return null===this.userInfo.budget||"number"===typeof this.userInfo.budget&&this.userInfo.budget>=0},hasStorage(){return o["a"].isObject(this.userInfo.storage)&&"number"===typeof this.userInfo.storage.quota&&"number"===typeof this.userInfo.storage.free},budget(){return this.hasBudget?null===this.userInfo.budget?"Unlimited":this.formatCurrency(this.userInfo.budget):"N/A"},userName(){return"string"===typeof this.userInfo.name?this.userInfo.name:"string"===typeof this.userInfo.user_id?this.userInfo.user_id:"Guest"},storageUsed(){return this.hasStorage?this.userInfo.storage.quota-this.userInfo.storage.free:null},storageUsedPercent(){return this.hasStorage?Math.round(this.storageUsed/this.userInfo.storage.quota*100):null}},methods:{...o["a"].mapActions({logoutServer:"logout"}),...o["a"].mapMutations("editor",{resetEditor:"reset"}),async logout(){await this.logoutServer(),this.resetEditor()},formatMegabyte(t){var e=1073741824;return t>e?Math.round(t/e)+" GB":Math.round(t/1048576)+" MB"}}},h=u,d=(i("42c6"),i("2877")),p=Object(d["a"])(h,l,c,!1,null,"0d4f43cb",null),f=p.exports,m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Tabs",{ref:"tabs",attrs:{id:"userContent"}},[t.showJobs?i("Tab",{attrs:{id:"jobs",name:"Batch Jobs",icon:"fa-tasks"},on:{show:t.onShow,hide:t.onHide}},[i("JobPanel")],1):t._e(),t.showServices?i("Tab",{attrs:{id:"services",name:"Web Services",icon:"fa-cloud"},on:{show:t.onShow,hide:t.onHide}},[i("ServicePanel")],1):t._e(),t.showCustomProcesses?i("Tab",{attrs:{id:"customProcesses",name:"Custom Processes",icon:"fa-sitemap"},on:{show:t.onShow,hide:t.onHide}},[i("CustomProcessPanel")],1):t._e(),t.showFiles?i("Tab",{attrs:{id:"files",name:"Files",icon:"fa-file"},on:{show:t.onShow,hide:t.onHide}},[i("FilePanel")],1):t._e()],1)},g=[],v=i("e7ea"),b=i("bdb2"),y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"FilePanel"},on:{dragenter:function(e){return t.dropZoneInfo(!0)},dragleave:function(e){return t.dropZoneInfo(!1)},drop:function(e){return t.uploadFiles(e)},dragover:function(e){return t.allowDrop(e)}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showUploadDropHint,expression:"showUploadDropHint"}],staticClass:"dropZone"},[t._v("To upload files, drop them here.")]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.supportsCreate,expression:"supportsCreate"}],staticClass:"addFile"},[i("input",{ref:"uploadUserFile",staticClass:"uploadUserFile",attrs:{type:"file",name:"uploadUserFile",multiple:""},on:{change:t.uploadFiles}})]),i("div",{staticClass:"percent"},[i("div",{staticClass:"used",class:{error:t.uploadErrored},style:"width: "+this.uploadProgress+"%; opacity: "+this.uploadFadeOut})]),i("DataTable",{ref:"table",attrs:{data:t.data,columns:t.columns},scopedSlots:t._u([{key:"actions",fn:function(e){return[i("button",{directives:[{name:"show",rawName:"v-show",value:t.supportsRead,expression:"supportsRead"}],attrs:{title:"Download"},on:{click:function(i){return t.downloadFile(e.row)}}},[i("i",{staticClass:"fas fa-download"})]),i("button",{directives:[{name:"show",rawName:"v-show",value:t.supportsDelete,expression:"supportsDelete"}],attrs:{title:"Delete"},on:{click:function(i){return t.deleteFile(e.row)}}},[i("i",{staticClass:"fas fa-trash"})])]}}])})],1)},w=[],x=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"data-table",attrs:{id:t.id}},[i("div",{staticClass:"menu"},[i("div",{staticClass:"toolbar"},[t._t("toolbar")],2),t.hasData?i("div",{staticClass:"filter"},[i("SearchBox",{attrs:{compact:!0},model:{value:t.filterValue,callback:function(e){t.filterValue=e},expression:"filterValue"}})],1):t._e()]),t.hasData?i("table",[i("tr",t._l(t.columns,(function(e,s){return i("th",{directives:[{name:"show",rawName:"v-show",value:!e.hide,expression:"!col.hide"}],key:s,class:t.thClasses(s),attrs:{title:t.thTitle(s)},on:{click:function(e){return t.enableSort(s)}}},[t._v(t._s(e.name))])})),0),t._l(t.view,(function(e,s){return i("tr",{key:s},t._l(t.columns,(function(s,n){return i("td",{directives:[{name:"show",rawName:"v-show",value:!s.hide,expression:"!col.hide"}],key:n,class:[n,{edit:t.canEdit(s)}],attrs:{title:!!t.canEdit(s)&&"Double-click to change the value","data-value":!!s.stylable&&t.value(e,s,n)},on:{dblclick:function(i){return t.onDblClick(i,e,s,n)}}},[t._t(n,[t.showEditField(e,s,n)?[i("form",{on:{submit:function(i){return i.preventDefault(),i.stopPropagation(),t.saveEditField(i,e,s,n)}}},[i("input",{ref:"editField",refInFor:!0,attrs:{type:"text"},domProps:{value:t.value(e,s,n)},on:{blur:function(i){return t.saveEditField(i,e,s,n)},keyup:function(i){return t.resetEditFieldEsc(i,e,s,n)}}})])]:[t._v(" "+t._s(t.formattedValue(e,s,n))+" ")]],{row:e,col:s,id:n})],2)})),0)})),t.hasData&&0==t.view.length?i("tr",{staticClass:"no-results"},[i("td",{attrs:{colspan:t.columnCount}},[t._v("Sorry, no element matches your search criteria.")])]):t._e()],2):i("div",{staticClass:"no-data"},[t._v(t._s(t.noDataMessage))]),i("div",{staticClass:"footer"},[t._t("footer")],2)])},S=[],_=i("2979"),C={name:"DataTable",components:{SearchBox:_["default"]},props:{id:String,columns:Object,data:Array},data(){return{view:[],filterValue:null,primaryKey:null,noDataMessage:"Sorry, no data available.",editField:null,sortState:{id:null,direction:null}}},watch:{data(){this.updateView()},filterValue(){this.updateView()},sortState(){this.updateView()},columns:{immediate:!0,handler(){for(let t in this.columns){let e=this.columns[t].sort;if(["asc","desc"].includes(e)){this.enableSort(t,e);break}}}}},computed:{columnCount(){return Object.keys(this.columns).length},hasData(){return this.data.length>0},hasFilter(){return"string"===typeof this.filterValue&&this.filterValue.length>0}},created(){this.determinePrimaryKey()},methods:{canEdit(t){return"function"===typeof t.edit},showEditField(t,e,i){return this.canEdit(e)&&null!=this.editField&&this.editField[0]==t&&this.editField[1]==i},onDblClick(t,e,i,s){if(this.canEdit(i)){var n=this.value(e,i,s);if("boolean"===typeof n){var r=this.columns[s].edit;r(e)}else this.editField=[e,s],this.$nextTick(()=>this.$refs.editField[0].focus());t.preventDefault(),t.stopPropagation()}},saveEditField(t,e,i,s){if(null!==this.editField&&this.canEdit(i)){var n=this.columns[s].edit;n(e,this.$refs.editField[0].value),this.editField=null,t.preventDefault(),t.stopPropagation()}},resetEditFieldEsc(t,e,i,s){"Escape"==t.key&&(this.editField=null)},determinePrimaryKey(){for(var t in this.columns)if(this.columns[t].primaryKey){this.primaryKey=t;break}},setNoData(t){"string"!=typeof t?o["a"].isObject(t)&&("object"===typeof t.data&&"object"===typeof t.config&&"object"===typeof t.headers&&(t=t.data),o["a"].isObject(t)&&"string"===typeof t.message)?this.noDataMessage=t.message:(console.warn(t),this.noDataMessage="Sorry, an unknown error has occured."):this.noDataMessage=t},value(t,e,i){var s;return s="object"===typeof t?t[i]:t,o["a"].isObject(e)&&"function"===typeof e.computedValue&&(s=e.computedValue(t,s)),s},formattedValue(t,e,i){return this.format(this.value(t,e,i),e)},thClasses(t){let e=this.columns[t],i=[t];return!1!==e.sort&&(i.push("sortable"),this.sortState.id===t&&i.push("sort-"+this.sortState.direction)),i},thTitle(t){let e=this.columns[t];return!1!==e.sort?this.sortState.id===t&&"asc"===this.sortState.direction?"Click to sort column in descending order":"Click to sort column in ascending order":null},enableSort(t,e=null){!1!==this.columns[t].sort&&(null===e&&(e=this.sortState.id===t&&"asc"===this.sortState.direction?"desc":"asc"),this.sortState={id:t,direction:e})},sort(t){let e=this.sortState.id;if(null===e||!this.columns[e])return t;let i=this.columns[e];return!1===i.sort?t:t.slice(0).sort((t,s)=>{let n="function"===typeof i.sortFn?i.sortFn:o["a"].compareStringCaseInsensitive,r=n(t[e],s[e]);return"desc"===this.sortState.direction?-1*r:r})},filter(t){if(!this.hasFilter)return t;var e=this.filterValue.toLowerCase();return t.filter(t=>{for(var i in t){var s=this.columns[i];if(!("undefined"===typeof s||s.hasOwnProperty("filterable")&&!1===s.filterable)){var n=this.value(t,s,i);if(("number"===typeof n||"string"===typeof n||"boolean"===typeof n)&&(n=n.toString(),-1!==n.toLowerCase().indexOf(e)))return!0}}return!1})},clearFilter(){this.filterValue="",this.updateView()},updateView(){Array.isArray(this.data)?this.view=this.sort(this.filter(this.data)):this.view=[]},format(t,e){return"string"===typeof e.format?"function"===typeof this["format"+e.format]?t=this["format"+e.format](t,e):console.warn(e.format+" is an invalid formatter."):"function"===typeof e.format&&(t=e.format.call(this,t,e)),t},formatFileSize(t,e){return o["a"].formatFileSize(t)},formatDateTime(t,e){return o["a"].formatDateTime(t)},formatUpperCase(t,e){return"string"===typeof t?t.toUpperCase():t}}},E=C,k=(i("6224"),Object(d["a"])(E,x,S,!1,null,null,null)),P=k.exports,D=(t,e,i)=>({components:{DataTable:P},data(){return{columns:{},syncTimer:null,lastSyncTime:null}},mounted(){this.updateData()},beforeDestroy(){this.stopSyncTimer()},computed:{...o["a"].mapState(t,{data:t}),...o["a"].mapGetters(t,["supportsList","supportsCreate","supportsRead","supportsUpdate","supportsDelete"])},methods:{...o["a"].mapActions(t,["list","create","read","update","delete"]),getTable(){return this.$refs&&this.$refs.table?this.$refs.table:null},onShow(){this.updateData(),this.startSyncTimer()},onHide(){this.stopSyncTimer()},startSyncTimer(){this.supportsList&&null===this.syncTimer&&(this.syncTimer=setInterval(this.updateData,1e3*this.getSyncInterval()))},stopSyncTimer(){null!==this.syncTimer&&(clearInterval(this.syncTimer),this.syncTimer=null)},getSyncInterval(){return 120},refreshElement(t,i=null){var s=Object.assign({},t);this.read({data:t}).then(t=>{"function"===typeof i&&i(t,s)}).catch(t=>o["a"].exception(this,t,"Load "+e+" error"))},updateData(){var t=this.getTable(),s=Date.now()-1e3*this.getSyncInterval();if(t&&!(this.lastSyncTime>s))if(this.supportsList)if(this.supportsCreate){var n=this.data.length>0;n||t.setNoData("Loading "+i+"..."),this.lastSyncTime=Date.now(),this.list().then(i=>{0==i.length&&t.setNoData("Add your first "+e+" here...")}).catch(e=>{n?console.log(e):t.setNoData(e)})}else t.setNoData("Sorry, this feature is not supported by the server.");else t.setNoData("Sorry, listing stored "+i+" is not supported by the server.")}}}),T={name:"FilePanel",mixins:[D("files","file","files")],data(){return{columns:{path:{name:"Path",primaryKey:!0,sortFn:o["a"].sortByPath,sort:"asc"},size:{name:"Size",format:"FileSize",filterable:!1},modified:{name:"Last modified",format:"DateTime"},actions:{name:"Actions",filterable:!1,sort:!1}},uploadProgress:0,uploadProgressPerFile:[],uploadErrored:!1,uploadFadeOut:1,showUploadDropHint:0}},watch:{uploadProgressPerFile:{deep:!0,handler(){this.uploadProgress=this.uploadProgressPerFile.reduce((t,e)=>t+e,0)/this.uploadProgressPerFile.length,this.uploadProgress>99.9999&&this.finishAllUploads()}}},methods:{allowDrop(t){this.supportsCreate&&(t.preventDefault(),t.stopPropagation())},dropZoneInfo(t){this.showUploadDropHint+=t?1:-1},uploadFiles(t){this.showUploadDropHint=0;var e=[];if(t.dataTransfer&&t.dataTransfer.files&&t.dataTransfer.files.length?(e=t.dataTransfer.files,t.preventDefault(),t.stopPropagation()):t.target&&t.target.files&&t.target.files.length&&(e=t.target.files),this.supportsCreate)if(0!==e.length){this.uploadProgressPerFile=[],this.uploadProgress=0,this.uploadErrored=!1;for(let t=0;t<e.length;t++)this.uploadFile(e[t],t)}else o["a"].info(this,"Please select files to upload.");else o["a"].error(this,"Uploading files is not supported.")},uploadFile(t,e){this.uploadProgressPerFile.push(0),"string"===typeof t.name&&this.create({parameters:[t,null,t=>this.$set(this.uploadProgressPerFile,e,t)]}).then(i=>{this.$set(this.uploadProgressPerFile,e,100),o["a"].ok(this,"File upload completed.",t.name)}).catch(e=>{console.error(e),o["a"].exception(this,e,"Upload File Error: "+t.name)})},finishAllUploads(){this.$refs.uploadUserFile.value="";var t=setInterval(()=>{this.uploadFadeOut-=.05,this.uploadFadeOut<0&&(this.uploadProgress=0,this.uploadFadeOut=1,clearInterval(t))},100)},downloadFile(t){o["a"].info(this,"File requested. Please wait..."),t.downloadFile(t.path)},deleteFile(t){this.delete({data:t}).catch(e=>o["a"].exception(this,e,"Delete File Error: "+t.path))}}},O=T,M=(i("9961"),Object(d["a"])(O,y,w,!1,null,null,null)),I=M.exports,F=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("DataTable",{ref:"table",attrs:{data:t.data,columns:t.columns,id:"JobPanel"},scopedSlots:t._u([{key:"actions",fn:function(e){return[i("button",{directives:[{name:"show",rawName:"v-show",value:t.supportsRead,expression:"supportsRead"}],attrs:{title:"Details"},on:{click:function(i){return t.showJobInfo(e.row)}}},[i("i",{staticClass:"fas fa-info"})]),i("button",{directives:[{name:"show",rawName:"v-show",value:t.supports("estimateJob"),expression:"supports('estimateJob')"}],attrs:{title:"Estimate"},on:{click:function(i){return t.estimateJob(e.row)}}},[i("i",{staticClass:"fas fa-file-invoice-dollar"})]),i("button",{directives:[{name:"show",rawName:"v-show",value:t.supportsUpdate&&t.isJobInactive(e.row),expression:"supportsUpdate && isJobInactive(p.row)"}],attrs:{title:"Edit metadata"},on:{click:function(i){return t.editMetadata(e.row)}}},[i("i",{staticClass:"fas fa-edit"})]),i("button",{directives:[{name:"show",rawName:"v-show",value:t.supportsRead&&t.isJobInactive(e.row),expression:"supportsRead && isJobInactive(p.row)"}],attrs:{title:"Edit process"},on:{click:function(i){return t.showInEditor(e.row)}}},[i("i",{staticClass:"fas fa-project-diagram"})]),i("button",{directives:[{name:"show",rawName:"v-show",value:t.supportsDelete,expression:"supportsDelete"}],attrs:{title:"Delete"},on:{click:function(i){return t.deleteJob(e.row)}}},[i("i",{staticClass:"fas fa-trash"})]),i("button",{directives:[{name:"show",rawName:"v-show",value:t.supports("startJob")&&t.isJobInactive(e.row),expression:"supports('startJob') && isJobInactive(p.row)"}],attrs:{title:"Start processing"},on:{click:function(i){return t.queueJob(e.row)}}},[i("i",{staticClass:"fas fa-play-circle"})]),i("button",{directives:[{name:"show",rawName:"v-show",value:t.supports("stopJob")&&t.isJobActive(e.row),expression:"supports('stopJob') && isJobActive(p.row)"}],attrs:{title:"Cancel processing"},on:{click:function(i){return t.cancelJob(e.row)}}},[i("i",{staticClass:"fas fa-stop-circle"})]),i("button",{directives:[{name:"show",rawName:"v-show",value:t.supports("downloadResults")&&t.hasResults(e.row),expression:"supports('downloadResults') && hasResults(p.row)"}],attrs:{title:"Download"},on:{click:function(i){return t.downloadResults(e.row)}}},[i("i",{staticClass:"fas fa-download"})]),i("button",{directives:[{name:"show",rawName:"v-show",value:t.supports("downloadResults")&&t.hasResults(e.row),expression:"supports('downloadResults') && hasResults(p.row)"}],attrs:{title:"View results"},on:{click:function(i){return t.viewResults(e.row,!0)}}},[i("i",{staticClass:"fas fa-eye"})]),i("button",{directives:[{name:"show",rawName:"v-show",value:t.supports("debugJob"),expression:"supports('debugJob')"}],attrs:{title:"View logs"},on:{click:function(i){return t.showLogs(e.row)}}},[i("i",{staticClass:"fas fa-bug"})])]}}])},[i("template",{slot:"toolbar"},[i("button",{directives:[{name:"show",rawName:"v-show",value:t.supportsCreate,expression:"supportsCreate"}],attrs:{title:"Add new job for batch processing"},on:{click:function(e){return t.createJobFromScript()}}},[i("i",{staticClass:"fas fa-plus"}),t._v(" Create")]),i("button",{directives:[{name:"show",rawName:"v-show",value:t.supports("computeResult"),expression:"supports('computeResult')"}],attrs:{title:"Run process and view results synchronously"},on:{click:t.executeProcess}},[i("i",{staticClass:"fas fa-play"}),t._v(" Run now")])])],2)},j=[],B=i("2b70");const L=D("jobs","batch job","batch jobs");var $={name:"JobPanel",mixins:[L,a["a"]],data(){return{columns:{id:{name:"ID",primaryKey:!0,hide:!0},title:{name:"Title",computedValue:t=>o["a"].getResourceTitle(t),edit:this.updateTitle},status:{name:"Status",stylable:!0},created:{name:"Submitted",format:"DateTime",sort:"desc"},updated:{name:"Last update",format:"DateTime"},actions:{name:"Actions",filterable:!1,sort:!1}},watchers:{},jobUpdater:null}},mounted(){this.listen("replaceProcess",this.replaceProcess)},computed:{...o["a"].mapGetters(["supports","supportsBilling","supportsBillingPlans"]),...o["a"].mapState("editor",["process"])},watch:{data:{handler:function(t){this.watchers={};for(let e of t)switch(e.status.toLowerCase()){case"running":case"queued":this.watchers[e.id]=e;break}},deep:!0}},methods:{...o["a"].mapActions("jobs",["queue","cancel"]),startSyncTimer(){L.methods.startSyncTimer.call(this),this.jobUpdater=setInterval(this.executeWatchers,1e4)},stopSyncTimer(){L.methods.stopSyncTimer.call(this),null!==this.jobUpdater&&clearInterval(this.jobUpdater)},showInEditor(t){this.refreshElement(t,t=>this.emit("editProcess",t))},executeProcess(){o["a"].info(this,"Data requested. Please wait..."),this.emit("viewSyncResult",this.process)},jobCreated(t){var e=[];this.supports("estimateJob")&&e.push({text:"Estimate",action:()=>this.estimateJob(t)}),this.supports("startJob")&&e.push({text:"Start processing",action:()=>this.queueJob(t)}),this.supports("deleteJob")&&e.push({text:"Delete",action:()=>this.deleteJob(t)}),o["a"].confirm(this,'Job "'+o["a"].getResourceTitle(t)+'" created!',e)},getTitleField(t=null){return{name:"title",label:"Title",schema:{type:"string"},default:null,value:t,optional:!0}},getDescriptionField(t=null){return{name:"description",label:"Description",schema:{type:"string",subtype:"commonmark"},default:null,value:t,description:"CommonMark (Markdown) is allowed.",optional:!0}},getBillingPlanField(t){return{name:"plan",label:"Billing plan",schema:{type:"string",subtype:"billing-plan"},value:t,optional:!0}},getBudgetField(t=null){return{name:"budget",label:"Budget",schema:{type:"number",subtype:"budget"},default:null,value:t,optional:!0}},normalizeToDefaultData(t){return"undefined"===typeof t.title||"string"===typeof t.title&&0!==t.title.length||(t.title=null),"undefined"===typeof t.description||"string"===typeof t.description&&0!==t.description.length||(t.description=null),"undefined"===typeof t.plan||"string"===typeof t.plan&&0!==t.plan.length||(t.plan=null),"undefined"!==typeof t.budget&&("number"!==typeof t.budget||t.budget<0)&&(t.budget=null),t},createJob(t,e){e=this.normalizeToDefaultData(e),this.create({parameters:[t,e.title,e.description,e.plan,e.budget]}).then(t=>this.jobCreated(t)).catch(t=>o["a"].exception(this,t,"Create Job Error: "+(e.title||"")))},createJobFromScript(){var t=[this.getTitleField(),this.getDescriptionField(),this.supportsBillingPlans?this.getBillingPlanField():null,this.supportsBilling?this.getBudgetField():null];this.emit("showDataForm","Create new batch job",t,t=>this.createJob(this.process,t))},deleteJob(t){this.delete({data:t}).catch(e=>o["a"].exception(this,e,"Delete Job Error: "+o["a"].getResourceTitle(t)))},executeWatchers(){for(var t in this.watchers)this.refreshElement(this.watchers[t],(t,e)=>{if("finished"!==e.status&&"finished"===t.status){var i=[];this.supports("downloadResults")&&(i.push({text:"Download",action:()=>this.downloadResults(t)}),i.push({text:"View",action:()=>this.viewResults(t)})),o["a"].confirm(this,'Job "'+o["a"].getResourceTitle(t)+'" has finished!',i)}else"error"!==e.status&&"error"===t.status&&o["a"].error(this,'Job "'+o["a"].getResourceTitle(t)+'" has stopped due to an error or timeout.');e.status!==t.status&&this.emit("jobStatusUpdated",t,e)})},showJobInfo(t){this.refreshElement(t,async t=>{let e=null;if("finished"===t.status)try{e=await t.getResultsAsStac()}catch(i){o["a"].exception(this,i,"Load Results Error: "+o["a"].getResourceTitle(t))}this.emit("showJobInfo",t.getAll(),e)})},estimateJob(t){t.estimateJob().then(e=>this.emit("showJobEstimate",t.getAll(),e)).catch(e=>o["a"].exception(this,e,"Job Estimate Error: "+o["a"].getResourceTitle(t)))},showLogs(t){this.emit("viewLogs",t)},replaceProcess(t,e){t instanceof B["Job"]&&(this.isJobActive(t)?o["a"].error(this,"Can't change process while batch job is running."):this.updateJob(t,{process:e}))},editMetadata(t){this.refreshElement(t,t=>{var e=[this.getTitleField(t.title),this.getDescriptionField(t.description),this.supportsBillingPlans?this.getBillingPlanField(t.plan):null,this.supportsBilling?this.getBudgetField(t.budget):null];this.emit("showDataForm","Edit batch job",e,e=>this.updateJob(t,e))})},updateTitle(t,e){this.updateJob(t,{title:e})},updateJob(t,e){this.update({data:t,parameters:this.normalizeToDefaultData(e)}).catch(e=>o["a"].exception(this,e,"Update Job Error: "+o["a"].getResourceTitle(t)))},queueJob(t){this.queue({data:t}).then(t=>o["a"].ok(this,'Job "'+o["a"].getResourceTitle(t)+'" successfully queued.')).catch(e=>o["a"].exception(this,e,"Queue Job Error: "+o["a"].getResourceTitle(t)))},cancelJob(t){this.cancel({data:t}).then(t=>o["a"].ok(this,'Job "'+o["a"].getResourceTitle(t)+'" successfully canceled.')).catch(e=>o["a"].exception(this,e,"Cancel Job Error: "+o["a"].getResourceTitle(t)))},viewResults(t){o["a"].info(this,"Data requested. Please wait..."),t.getResultsAsStac().then(e=>{0!=o["a"].size(e.assets)?this.emit("viewJobResults",e,t):o["a"].error(this,'No results available for job "'+o["a"].getResourceTitle(t)+'".')})},downloadResults(t){t.getResultsAsStac().then(e=>{0!=o["a"].size(e.assets)?this.emit("showListModal","Download results",Object.values(e.assets).map(t=>t.href),[{callback:t=>(window.open(t,"_blank"),!1)}]):o["a"].error(this,'No results available for job "'+o["a"].getResourceTitle(t)+'".')})},hasResults(t){return"string"!==typeof t.status||"finished"==t.status.toLowerCase()},isJobInactive(t){return"string"!==typeof t.status||!this.isActiveStatusCode(t.status)},isJobActive(t){return"string"!==typeof t.status||this.isActiveStatusCode(t.status)},isActiveStatusCode(t){switch(t.toLowerCase()){case"running":case"queued":return!0;default:return!1}}}},A=$,N=(i("0791"),Object(d["a"])(A,F,j,!1,null,null,null)),R=N.exports,V=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("DataTable",{ref:"table",attrs:{data:t.data,columns:t.columns,id:"CustomProcessPanel"},scopedSlots:t._u([{key:"actions",fn:function(e){return[i("button",{directives:[{name:"show",rawName:"v-show",value:t.supportsRead,expression:"supportsRead"}],attrs:{title:"Details"},on:{click:function(i){return t.processInfo(e.row)}}},[i("i",{staticClass:"fas fa-info"})]),i("button",{directives:[{name:"show",rawName:"v-show",value:t.supportsUpdate,expression:"supportsUpdate"}],attrs:{title:"Edit metadata"},on:{click:function(i){return t.editMetadata(e.row)}}},[i("i",{staticClass:"fas fa-edit"})]),i("button",{directives:[{name:"show",rawName:"v-show",value:t.supportsRead,expression:"supportsRead"}],attrs:{title:"Edit process"},on:{click:function(i){return t.showInEditor(e.row)}}},[i("i",{staticClass:"fas fa-project-diagram"})]),i("button",{directives:[{name:"show",rawName:"v-show",value:t.supportsDelete,expression:"supportsDelete"}],attrs:{title:"Delete"},on:{click:function(i){return t.deleteProcess(e.row)}}},[i("i",{staticClass:"fas fa-trash"})])]}}])},[i("template",{slot:"toolbar"},[i("button",{directives:[{name:"show",rawName:"v-show",value:t.supportsCreate,expression:"supportsCreate"}],attrs:{title:"Add new custom process"},on:{click:t.addProcessFromScript}},[i("i",{staticClass:"fas fa-plus"}),t._v(" Add")])])],2)},U=[],J={name:"CustomProcessPanel",mixins:[D("userProcesses","custom process","custom processes"),a["a"]],data(){return{columns:{id:{name:"ID",primaryKey:!0,sort:"asc"},summary:{name:"Summary",edit:this.updateSummary},actions:{name:"Actions",filterable:!1,sort:!1}}}},computed:{...o["a"].mapState("editor",["process"])},mounted(){this.listen("replaceProcess",this.replaceProcess)},methods:{showInEditor(t){this.refreshElement(t,t=>this.emit("editProcess",t))},getIdField(t){return{name:"id",label:"Name",schema:{type:"string"},default:null,value:t}},getSummaryField(t){return{name:"summary",label:"Summary",schema:{type:"string"},default:null,value:t,optional:!0}},getDescriptionField(t){return{name:"description",label:"Description",schema:{type:"string",subtype:"commonmark"},default:null,value:t,description:"CommonMark (Markdown) is allowed.",optional:!0}},getCategoriesField(t){return{name:"categories",label:"Categories",schema:{type:"array",items:{type:"string"}},default:[],value:t,optional:!0}},getDeprecatedField(t=!1){return{name:"deprecated",label:"Deprecated",schema:{type:"boolean"},default:!1,value:t,optional:!0}},getExperimentalField(t=!1){return{name:"experimental",label:"Experimental",schema:{type:"boolean"},default:!1,value:t,optional:!0}},getFields(t){return[this.getIdField(t.id),this.getSummaryField(t.summary),this.getDescriptionField(t.description),this.getCategoriesField(t.categories),this.getDeprecatedField(t.deprecated),this.getExperimentalField(t.experimental)]},addProcessFromScript(){let t=this.getFields(this.process);this.emit("showDataForm","Store a new custom process",t,t=>this.addProcess(this.normalize(this.process,t)))},normalize(t,e){return Object.assign({},"function"===typeof t.toJSON?t.toJSON():t,e)},addProcess(t){this.create({parameters:[t.id,t]}).catch(e=>o["a"].exception(this,e,"Store Process Error: "+t.id))},processInfo(t){this.emit("showProcessInfo",t)},editMetadata(t){this.refreshElement(t,t=>{let e=this.getFields(t);this.emit("showDataForm","Edit metadata for a process graph",e,e=>this.updateMetadata(t,e))})},replaceProcess(t,e){t instanceof B["UserProcess"]&&this.updateMetadata(t,e)},updateSummary(t,e){this.updateMetadata(t,{title:e})},updateMetadata(t,e){this.update({data:t,parameters:this.normalize(t,e)}).catch(e=>o["a"].exception(this,e,"Update Process Error: "+t.id))},deleteProcess(t){this.delete({data:t}).catch(e=>o["a"].exception(this,e,"Delete Process Error: "+t.id))}}},H=J,G=Object(d["a"])(H,V,U,!1,null,null,null),z=G.exports,X=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("DataTable",{ref:"table",attrs:{data:t.data,columns:t.columns,id:"ServicePanel"},scopedSlots:t._u([{key:"enabled",fn:function(t){return[i("span",{staticClass:"boolean"},[i("span",{directives:[{name:"show",rawName:"v-show",value:!0===t.row.enabled,expression:"p.row.enabled === true"}]},[i("i",{staticClass:"fas fa-check-circle"})]),i("span",{directives:[{name:"show",rawName:"v-show",value:!1===t.row.enabled,expression:"p.row.enabled === false"}]},[i("i",{staticClass:"fas fa-times-circle"})]),i("span",{directives:[{name:"show",rawName:"v-show",value:"boolean"!==typeof t.row.enabled,expression:"typeof p.row.enabled !== 'boolean'"}]},[i("i",{staticClass:"fas fa-question-circle"})])])]}},{key:"actions",fn:function(e){return[i("button",{directives:[{name:"show",rawName:"v-show",value:t.supportsRead,expression:"supportsRead"}],attrs:{title:"Details"},on:{click:function(i){return t.serviceInfo(e.row)}}},[i("i",{staticClass:"fas fa-info"})]),i("button",{directives:[{name:"show",rawName:"v-show",value:t.supportsUpdate,expression:"supportsUpdate"}],attrs:{title:"Edit metadata"},on:{click:function(i){return t.editMetadata(e.row)}}},[i("i",{staticClass:"fas fa-edit"})]),i("button",{directives:[{name:"show",rawName:"v-show",value:t.supportsRead,expression:"supportsRead"}],attrs:{title:"Edit process"},on:{click:function(i){return t.showInEditor(e.row)}}},[i("i",{staticClass:"fas fa-project-diagram"})]),i("button",{directives:[{name:"show",rawName:"v-show",value:t.supportsDelete,expression:"supportsDelete"}],attrs:{title:"Delete"},on:{click:function(i){return t.deleteService(e.row)}}},[i("i",{staticClass:"fas fa-trash"})]),i("button",{directives:[{name:"show",rawName:"v-show",value:e.row.enabled&&t.isMapServiceSupported(e.row.type),expression:"p.row.enabled && isMapServiceSupported(p.row.type)"}],attrs:{title:"View on map"},on:{click:function(i){return t.viewService(e.row)}}},[i("i",{staticClass:"fas fa-map"})]),i("button",{directives:[{name:"show",rawName:"v-show",value:t.supports("debugService"),expression:"supports('debugService')"}],attrs:{title:"View logs"},on:{click:function(i){return t.showLogs(e.row)}}},[i("i",{staticClass:"fas fa-bug"})])]}}])},[i("template",{slot:"toolbar"},[i("button",{directives:[{name:"show",rawName:"v-show",value:t.supportsCreate,expression:"supportsCreate"}],attrs:{title:"Add new service"},on:{click:function(e){return t.createServiceFromScript()}}},[i("i",{staticClass:"fas fa-plus"}),t._v(" Create")])])],2)},Y=[],W=i("a1bc"),q={name:"ServicePanel",mixins:[D("services","web service","web services"),a["a"]],data(){return{columns:{id:{name:"ID",primaryKey:!0,hide:!0},title:{name:"Title",computedValue:t=>o["a"].getResourceTitle(t),edit:this.updateTitle},type:{name:"Type",format:"UpperCase"},enabled:{name:"Enabled",edit:this.toggleEnabled},created:{name:"Submitted",format:"DateTime",sort:"desc"},actions:{name:"Actions",filterable:!1,sort:!1}}}},computed:{...o["a"].mapState("editor",["process"]),...o["a"].mapState(["serviceTypes"]),...o["a"].mapGetters(["supports","supportsBilling","supportsBillingPlans"])},mounted(){this.listen("replaceProcess",this.replaceProcess)},methods:{isMapServiceSupported(t){return"string"===typeof t&&W["a"].supportedMapServices.includes(t.toLowerCase())},showInEditor(t){this.refreshElement(t,t=>this.emit("editProcess",t))},showLogs(t){this.emit("viewLogs",t)},serviceCreated(t){var e=[];this.isMapServiceSupported(t.type)&&e.push({text:"View on map",action:()=>this.viewService(t)}),this.supportsRead&&e.push({text:"Details",action:()=>this.serviceInfo(t)}),this.supportsDelete&&e.push({text:"Delete",action:()=>this.deleteService(t)}),o["a"].confirm(this,"Web Service created!",e)},getTitleField(t=null){return{name:"title",label:"Title",schema:{type:"string"},default:null,value:t,optional:!0}},getDescriptionField(t=null){return{name:"description",label:"Description",schema:{type:"string",subtype:"commonmark"},default:null,value:t,description:"CommonMark (Markdown) is allowed.",optional:!0}},getServiceTypeField(t){return{name:"type",label:"Type",schema:{type:"string",subtype:"service-type"},value:t}},getBillingPlanField(t){return{name:"plan",label:"Billing plan",schema:{type:"string",subtype:"billing-plan"},value:t,optional:!0}},getBudgetField(t=null){return{name:"budget",label:"Budget",schema:{type:"number",subtype:"budget"},default:null,value:t,optional:!0}},getEnabledField(t=!0){return{name:"enabled",label:"Enabled",schema:{type:"boolean"},default:!0,value:t,optional:!0}},getConfigField(t){return{name:"configuration",label:"Service Configuration",schema:{type:"object",subtype:"service-config"},value:t,optional:!0}},normalizeToDefaultData(t){return"undefined"===typeof t.title||"string"===typeof t.title&&0!==t.title.length||(t.title=null),"undefined"===typeof t.description||"string"===typeof t.description&&0!==t.description.length||(t.description=null),"undefined"!==typeof t.enabled&&"boolean"!==typeof t.enabled&&(t.enabled=!0),"undefined"===typeof t.configuration||o["a"].isObject(t.configuration)||(t.configuration={}),"undefined"===typeof t.plan||"string"===typeof t.plan&&0!==t.plan.length||(t.plan=null),"undefined"!==typeof t.budget&&("number"!==typeof t.budget||t.budget<0)&&(t.budget=null),t},createService(t,e){e=this.normalizeToDefaultData(e),this.create({parameters:[t,e.type,e.title,e.description,e.enabled,e.configuration,e.plan,e.budget]}).then(t=>this.serviceCreated(t)).catch(t=>o["a"].exception(this,t,"Create Service Error: "+(e.title||"")))},createServiceFromScript(){var t=[this.getTitleField(),this.getDescriptionField(),this.getServiceTypeField(),this.getEnabledField(),this.supportsBillingPlans?this.getBillingPlanField():null,this.supportsBilling?this.getBudgetField():null,this.getConfigField()];this.emit("showDataForm","Create new web service",t,t=>this.createService(this.process,t))},editMetadata(t){this.refreshElement(t,t=>{var e=[this.getTitleField(t.title),this.getDescriptionField(t.description),this.getEnabledField(t.enabled),this.supportsBillingPlans?this.getBillingPlanField(t.plan):null,this.supportsBilling?this.getBudgetField(t.budget):null,this.getConfigField(t.configuration)];this.emit("showDataForm","Edit web service",e,e=>this.updateService(t,e))})},serviceInfo(t){this.refreshElement(t,t=>{this.emit("showServiceInfo",t.getAll())})},replaceProcess(t,e){t instanceof B["Service"]&&this.updateService(t,{process:e})},updateTitle(t,e){this.updateService(t,{title:e})},toggleEnabled(t){this.updateService(t,{enabled:!t.enabled})},updateService(t,e){this.update({data:t,parameters:this.normalizeToDefaultData(e)}).catch(e=>o["a"].exception(this,e,"Update Service Error: "+o["a"].getResourceTitle(t)))},deleteService(t){this.delete({data:t}).then(()=>this.emit("removeWebService",t.id)).catch(e=>o["a"].exception(this,e,"Delete Service Error: "+o["a"].getResourceTitle(t)))},viewService(t){o["a"].info(this,"Requesting tiles from server. Please wait..."),this.emit("viewWebService",t)}}},K=q,Z=(i("916f"),Object(d["a"])(K,X,Y,!1,null,null,null)),Q=Z.exports,tt={name:"UserWorkspace",components:{FilePanel:I,JobPanel:R,CustomProcessPanel:z,ServicePanel:Q,Tabs:v["default"],Tab:b["default"]},computed:{...o["a"].mapGetters(["supports"]),showJobs(){return this.supports("listJobs")||this.supports("createJob")},showServices(){return this.supports("listServices")||this.supports("createService")},showCustomProcesses(){return this.supports("listUserProcesses")||this.supports("setUserProcess")},showFiles(){return this.supports("listFiles")||this.supports("uploadFile")}},methods:{onShow(t){t.$children.length&&"function"===typeof t.$children[0].onShow&&t.$children[0].onShow()},onHide(t){t.$children.length&&"function"===typeof t.$children[0].onHide&&t.$children[0].onHide()}}},et=tt,it=(i("b5d7"),Object(d["a"])(et,m,g,!1,null,null,null)),st=it.exports,nt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Tabs",{ref:"tabs",attrs:{id:"viewerContent"},scopedSlots:t._u([{key:"default",fn:function(){return[i("Tab",{attrs:{id:"mapView",name:"Map",icon:"fa-map",selected:!0},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.tab;return[i("MapViewer",{ref:"mapViewer",attrs:{id:"mapCanvas",show:e.active,center:[50.1725,9.15],zoom:6}})]}}])})]},proxy:!0},{key:"dynamic",fn:function(t){var e=t.tab;return["fa-bug"===e.icon?i("LogViewer",{attrs:{data:e.data}}):"fa-image"===e.icon?i("ImageViewer",{attrs:{data:e.data}}):i("DataViewer",{attrs:{data:e.data}})]}}])})},rt=[],at=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dataViewer"},[t.isError?i("div",{staticClass:"noDataMessage"},[t._v(t._s(t.content.message))]):"string"===typeof t.content?i("div",{staticClass:"text"},[t._v(t._s(t.content))]):null!==t.content?i("ObjectTree",{staticClass:"tree",attrs:{data:t.content}}):i("div",{staticClass:"noDataMessage"},[i("i",{staticClass:"fas fa-spinner fa-spin"}),t._v(" Loading data...")])],1)},ot=[],lt=(i("5319"),i("0a37")),ct={name:"DataViewer",mixins:[a["a"]],props:{data:{type:Object,required:!0}},components:{ObjectTree:lt["default"]},computed:{...o["a"].mapState(["connection"]),isError(){return this.content instanceof Error}},data(){return{content:null}},watch:{data(){this.processData(this.data)}},created(){this.processData(this.data)},methods:{processData(t){if(t instanceof Blob)switch(t.type){case"application/json":o["a"].blobToText(t,t=>{var e=JSON.parse(t.target.result);this.content=e});break;case"text/plain":o["a"].blobToText(t,t=>{this.content=nl2br(t.target.result)});break;case"text/html":o["a"].blobToText(t,t=>{this.content=t.target.result});break;default:this.error("Sorry, content type not supported.")}else t.url?this.connection.download(t.url,!1).then(t=>this.processData(t.data)).catch(t=>o["a"].exception(this,t,"Download File Error")):this.error("Sorry, internal data format not supported.")},nl2br(t){return"undefined"===typeof t||null===t?"":(t+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br>$2")},error(t){this.content=new Error(t)}}},ut=ct,ht=(i("1843"),Object(d["a"])(ut,at,ot,!1,null,"394f25a4",null)),dt=ht.exports,pt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"imageContainer",staticClass:"imageViewer"},[i("div",{ref:"loading",staticClass:"noDataMessage"},[i("i",{staticClass:"fas fa-spinner fa-spin"}),t._v(" Loading image...")]),i("img",{ref:"image",attrs:{alt:""},on:{click:t.resize}})])},ft=[],mt=(i("2b3d"),{name:"ImageViewer",props:{data:{type:Object,required:!0}},mounted(){this.data.blob?this.showImageBlob(this.data.blob):this.data.url&&this.showImage(this.data.url),this.resize()},methods:{showImage(t){this.$refs.image.src=t,this.$refs.image.onload=()=>{this.$refs.loading.style.display="none"}},showImageBlob(t){this.showImage(URL.createObjectURL(t))},resize(){this.$refs.image&&(this.$refs.image.style.maxWidth?(this.$refs.image.style.maxWidth=null,this.$refs.image.style.cursor="zoom-out",this.$refs.image.title="Click to shrink (fit to screen)"):(this.$refs.image.style.maxWidth="100%",this.$refs.image.style.cursor="zoom-in",this.$refs.image.title="Click to enlarge"))}}}),gt=mt,vt=(i("aab4"),Object(d["a"])(gt,pt,ft,!1,null,"8fe7759e",null)),bt=vt.exports,yt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"log-viewer"},[Array.isArray(t.logs)&&t.logs.length?i("div",{staticClass:"log-container"},[i("div",{staticClass:"log-header"},[i("MultiSelect",{attrs:{multiple:!0,options:t.levels,allowEmpty:!1,taggable:!0,closeOnSelect:!1,placeholder:"Select the log levels shown"},model:{value:t.levelsShown,callback:function(e){t.levelsShown=e},expression:"levelsShown"}})],1),i("ul",{staticClass:"log-body"},t._l(t.logs,(function(e){var s;return i("li",{directives:[{name:"show",rawName:"v-show",value:t.levelsShown.includes(e.level),expression:"levelsShown.includes(log.level)"}],key:e.id,class:(s={},s[e.level]=!0,s.expanded=e.expanded,s)},[i("summary",[i("span",{staticClass:"toggle",on:{click:function(i){return t.toggle(e)}}},[t._v("▸")]),i("span",{staticClass:"log-message"},[t._v(t._s(e.message))])]),e.expanded?i("ul",{staticClass:"details"},[i("li",[t._v("ID: "+t._s(e.id))]),e.code?i("li",[t._v("Code: "+t._s(e.code))]):t._e(),i("li",[t._v("Level: "+t._s(e.level))]),Array.isArray(e.path)&&e.path.length?i("li",[t._v(" Path: "),i("ol",{staticClass:"path"},t._l(e.path,(function(e,s){return i("li",{key:s},[t._v("#"+t._s(e))])})),0)]):t._e(),"undefined"!==typeof e.data&&null!==e.data?i("li",[t._v(" Data:"),i("br"),i("ObjectTree",{attrs:{data:e.data}})],1):t._e(),Array.isArray(e.links)&&e.links.length?i("li",[t._v(" Related Resources:"),i("br"),i("LinkList",{attrs:{links:e.links}})],1):t._e()]):t._e()])})),0)]):Array.isArray(t.logs)&&!t.logs.length?i("div",{staticClass:"noDataMessage"},[t._v("No logs available.")]):i("div",{staticClass:"noDataMessage"},[i("i",{staticClass:"fas fa-spinner fa-spin"}),t._v(" Loading logs...")])])},wt=[],xt=i("4845"),St=i("8e5f"),_t=i.n(St),Ct={name:"LogViewer",mixins:[a["a"]],components:{LinkList:xt["default"],MultiSelect:_t.a,ObjectTree:lt["default"]},props:{data:{type:[Object,Array],required:!0}},data(){let t=["debug","info","warning","error"];return{levels:t,levelsShown:t,logs:null,syncTimer:null}},computed:{...o["a"].mapState(["connection"]),isJob(){return o["a"].isObject(this.data)&&"function"===typeof this.data.debugJob},isService(){return o["a"].isObject(this.data)&&"function"===typeof this.data.debugService},logIterator(){return this.isJob?this.data.debugJob():this.isService?this.data.debugService():null}},created(){this.isJob&&this.listen("jobStatusUpdated",this.onJobStatusUpdated)},beforeDestroy(){this.onHide()},methods:{toggle(t){this.$set(t,"expanded",!t.expanded)},onShow(){this.loadNext(),this.isJob?this.onJobStatusUpdated(this.data):this.isService&&this.startWatcher()},onHide(){this.stopWatcher()},onJobStatusUpdated(t){if(t===this.data&&"string"===typeof this.data.status)switch(this.data.status.toLowerCase()){case"running":case"queued":this.startWatcher();break;default:this.stopWatcher()}},startWatcher(){null===this.syncTimer&&(this.syncTimer=setInterval(this.loadNext.bind(this),1e4))},stopWatcher(){null!==this.syncTimer&&(clearInterval(this.syncTimer),this.syncTimer=null)},async loadNext(){if(this.logIterator){let t=await this.logIterator.nextLogs();Array.isArray(this.logs)||(this.logs=[]);for(let e of t)this.logs.push(e)}else Array.isArray(this.data)&&!this.logs&&(this.logs=this.data)}}},Et=Ct,kt=(i("532e"),i("9aa7"),Object(d["a"])(Et,yt,wt,!1,null,"0305adb1",null)),Pt=kt.exports,Dt=i("a5c1"),Tt=i("b40f"),Ot=i.n(Tt),Mt={name:"Viewer",mixins:[a["a"]],components:{Tab:b["default"],Tabs:v["default"],DataViewer:dt,ImageViewer:bt,LogViewer:Pt,MapViewer:Dt["a"]},mounted(){this.listen("viewBlob",this.showViewer),this.listen("viewLink",this.showViewer),this.listen("viewSyncResult",this.showSyncResults),this.listen("viewJobResults",this.showJobResults),this.listen("viewWebService",this.showWebService),this.listen("viewLogs",this.showLogs),this.listen("removeWebService",this.removeWebService)},data(){return{tabCounter:{}}},computed:{...o["a"].mapState(["connection"])},methods:{showWebService(t){this.showMapViewer(),this.$refs.mapViewer.showWebService(t)},removeWebService(t){this.$refs.mapViewer.removeLayerFromMap(t)},showMapViewer(){this.$refs.tabs.selectTab("mapView")},showSyncResults(t){this.connection.computeResult(t).then(t=>{Array.isArray(t.logs)&&t.logs.length>0&&this.showLogs(t.logs),this.showViewer(t.data)}).catch(t=>{let e="Processing Error";"string"===typeof t.message&&t.message.length>W["a"].snotifyDefaults.bodyMaxLength?(this.showLogs([{id:t.id||"unknown",code:t.code||void 0,level:"error",message:t.message,links:t.links||[]}]),o["a"].error(this,"Synchronous processing failed. Please see the logs for details.",e)):o["a"].exception(this,t,e)})},showJobResults(t,e){for(var i in t.assets){var s=t.assets[i];this.showViewer(s,this.makeTitle(i,e.id,!0))}},showLogs(t){let e=Array.isArray(t)?"Logs":o["a"].getResourceTitle(t,!0);this.$refs.tabs.addTab(e,"fa-bug",t,null,!0,!0,t=>this.onShow(t),t=>this.onHide(t))},onShow(t){t.$children.length&&"function"===typeof t.$children[0].onShow&&t.$children[0].onShow()},onHide(t){t.$children.length&&"function"===typeof t.$children[0].onHide&&t.$children[0].onHide()},uniqueTitle(t){return this.tabCounter[t]?(this.tabCounter[t]++,t+" ("+this.tabCounter[t]+")"):(this.tabCounter[t]=1,t)},makeTitle(t,e,i=!1){return t?i?this.uniqueTitle(t):t:this.uniqueTitle(e)},async showViewer(t,e=null){var i={};switch(o["a"].isObject(t)&&"string"===typeof t.href&&"string"===typeof t.type?(i.type=t.type,i.url=t.href):t instanceof Blob?(i.type=t.type,i.blob=t):o["a"].error(this,"Sorry, invalid data received."),"string"===typeof i.type&&-1!==i.type.indexOf("/")&&-1===i.type.indexOf("*")||o["a"].error(this,"Sorry, can't detect content type."),Object.assign(i,Ot.a.parse(i.type)),i.type){case"image/png":case"image/jpg":case"image/jpeg":case"image/gif":this.$refs.tabs.addTab(this.makeTitle(e,"Image"),"fa-image",i,null,!0,!0);break;case"application/json":case"text/plain":case"text/html":this.$refs.tabs.addTab(this.makeTitle(e,"Data"),"fa-database",i,null,!0,!0);break;case"image/tiff":if(i.url&&"geotiff"===i.parameters.application){this.showMapViewer(),this.$refs.mapViewer.updateGeoTiffLayer(i.url,this.makeTitle(e,"GeoTiff"));break}default:if(i.blob instanceof Blob){B["OpenEO"].Environment.saveToFile(i.blob,o["a"].makeFileName("result",i.type));break}if(i.url)try{let t=await this.connection._get(i.url,"","blob"),e=o["a"].getFileNameFromURL(i.url);if(t.data instanceof Blob){B["OpenEO"].Environment.saveToFile(t.data,o["a"].makeFileName(e,i.type));break}}catch(s){console.error(s)}o["a"].error(this,"Sorry, content type not supported by the viewer and can't be downloaded.")}}}},It=Mt,Ft=(i("15dd"),Object(d["a"])(It,nt,rt,!1,null,null,null)),jt=Ft.exports,Bt=i("ceb0"),Lt=i("cbd9"),$t=i("79e5"),At={name:"IDE",mixins:[a["a"]],components:{DiscoveryToolbar:Lt["a"],Editor:Bt["default"],Viewer:jt,UserMenu:f,UserWorkspace:st,CollectionModal:()=>i.e("chunk-f2ff1258").then(i.bind(null,"8295")),ProcessModal:()=>i.e("chunk-7878eb47").then(i.bind(null,"732b")),ServerInfoModal:()=>i.e("chunk-811a8722").then(i.bind(null,"2406")),JobInfoModal:()=>i.e("chunk-6f38e0cf").then(i.bind(null,"fd61")),JobEstimateModal:()=>i.e("chunk-2d0a43e2").then(i.bind(null,"0639")),ServiceInfoModal:()=>i.e("chunk-2d0aeb72").then(i.bind(null,"0af1")),ParameterModal:()=>Promise.resolve().then(i.bind(null,"c2dc")),SchemaModal:()=>i.e("chunk-114bb9e1").then(i.bind(null,"ea2d")),UdfRuntimeModal:()=>i.e("chunk-28ddf598").then(i.bind(null,"8a57"))},data(){return{moving:!1,movingOffset:0,separators:[{left:"discovery",right:"workspace",anchor:"left",width:"20%"},{left:"workspace",right:"viewer",anchor:"right",width:"30%"}],version:r.version,resizeListener:null,userInfoUpdater:null}},computed:{...o["a"].mapState(["connection"]),...o["a"].mapState("editor",["context","process"]),...o["a"].mapGetters(["title","isAuthenticated","apiVersion"]),...o["a"].mapGetters("jobs",{supportsJobUpdate:"supportsUpdate"}),...o["a"].mapGetters("services",{supportsServiceUpdate:"supportsUpdate"}),...o["a"].mapGetters("userProcesses",{getProcessById:"getAllById",supportsUserProcessUpdate:"supportsUpdate"}),contextTitle(){return null!==this.context?o["a"].getResourceTitle(this.context,!0):""},saveSupported(){return null!==this.context&&(this.context instanceof B["Job"]&&this.supportsJobUpdate||this.context instanceof B["Service"]&&this.supportsServiceUpdate||this.context instanceof B["UserProcess"]&&this.supportsUserProcessUpdate)}},mounted(){this.listen("showCollection",this.showCollectionInfo),this.listen("showProcess",this.showProcessInfoById),this.listen("showJobInfo",this.showJobInfo),this.listen("showJobEstimate",this.showJobEstimate),this.listen("showProcessInfo",this.showProcessInfo),this.listen("showServiceInfo",this.showServiceInfo),this.listen("showUdfRuntimeInfo",this.showUdfRuntimeInfo),this.listen("showSchema",this.showSchemaInfo),this.listen("showDataForm",this.showDataForm),this.listen("editProcess",this.editProcess),this.resizeListener=t=>this.emit("windowResized",t),window.addEventListener("resize",this.resizeListener),this.isAuthenticated&&(this.userInfoUpdater=setInterval(this.describeAccount,12e4)),this.emit("title",this.title)},beforeDestroy(){null!==this.resizeListener&&window.removeEventListener("resize",this.resizeListener),null!==this.userInfoUpdater&&clearInterval(this.userInfoUpdater)},methods:{...o["a"].mapActions(["describeAccount","describeCollection"]),...o["a"].mapActions("userProcesses",{readUserProcess:"read"}),...o["a"].mapMutations("editor",["setContext","setProcess"]),saveProcess(){this.emit("replaceProcess",this.context,this.process)},updateEditor(t){this.setProcess(t),null===t&&this.setContext(null)},editProcess(t){this.setContext(t)},insertProcess(t){this.$refs.editor.insertProcess(t)},startMovingSeparator(t,e){this.moving=!1,1===t.which&&(this.moving=e)},stopMovingSeparator(t){this.moving=!1},moveSeparator(t){if(!1!==this.moving&&this.separators[this.moving]&&0!==t.movementX){var e,i=this.separators[this.moving],s=this.$refs[i[i.anchor]];e="right"===i.anchor?Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.documentElement.clientWidth)-t.x:t.x,s.style.width=e+"px",this.emit("windowResized",t),t.preventDefault(),t.stopPropagation()}},centerSeparator(t,e){this.moving=!1;var i=this.separators[e];if(i){var s=this.$refs[i[i.anchor]];s.getBoundingClientRect().width<220?s.style.width=i.width:s.style.width=0,this.emit("windowResized",t)}},showCollectionInfo(t){this.describeCollection(t).then(t=>this.$refs.collectionModal.show(t)).catch(e=>o["a"].error(this,"Sorry, can't load collection details for "+t+"."))},showProcessInfoById(t){this._showProcessInfo(this.getProcessById(t))},showProcessInfo(t){this._showProcessInfo(t)},showUdfRuntimeInfo(t,e,i=null){this.$refs.udfRuntimeModal.show(t,e,i)},showSchemaInfo(t,e,i=null){null===i&&(i="This is a parameter for a user-defined process.\nIt is a value made available by the parent entity (usually another process or a secondary web service) that is executing this processes for further use.\nThe value will comply to the following data type(s):"),this.$refs.schemaModal.show(t,e,i)},_showProcessInfo(t){t.native?this._showProcessInfoModal(t):this.readUserProcess({data:t}).then(t=>this._showProcessInfoModal(t.toJSON())).catch(e=>o["a"].exception(this,e,"Load Process Error: "+t.id))},_showProcessInfoModal(t){this.$refs.processModal.show(t)},showServiceInfo(t){this.$refs.serviceModal.show(t)},showJobInfo(t,e=null){this.$refs.jobModal.show(t,e)},showJobEstimate(t,e){this.$refs.jobEstimateModal.show(t,e)},showServerInfo(){this.$refs.serverInfoModal.show()},showWebEditorInfo(){this.emit("showWebEditorInfo")},showDataForm(t,e,i=null,s=null){var n="function"===typeof i,r={},a=[];for(let o of e)null!==o&&(a.push(new $t["c"](o)),r[o.name]=o.value);this.$refs.parameterModal.show(t,a,r,n,i,s)}}},Nt=At,Rt=(i("352f"),Object(d["a"])(Nt,s,n,!1,null,null,null));e["default"]=Rt.exports},f42e:function(t,e,i){"use strict";i("307b")}}]);
//# sourceMappingURL=chunk-53bebd45.1fdd2a98.js.map